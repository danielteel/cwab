{"version":3,"sources":["../../wab - Copy/src/components/WABMenu.js","../../wab - Copy/src/common.js","../../wab - Copy/src/components/Aircraft.js","../../wab - Copy/src/useSorted.js","../../wab - Copy/src/components/ConfirmationModal.js","../../wab - Copy/src/components/Cargo.js","../../wab - Copy/src/reducers/aircraftReducer.js","../../wab - Copy/src/reducers/cargoReducer.js","../../wab - Copy/src/reducers/fuelReducer.js","../../wab - Copy/src/getLocalStorageSize.js","../../wab - Copy/src/components/Options.js","../../wab - Copy/src/components/IndividualFuel.js","../../wab - Copy/src/components/Fuel.js","../../wab - Copy/src/reducers/selectedMenuReducer.js","../../wab - Copy/src/ChartObjects.js","../../wab - Copy/src/components/Calced.js","../../wab - Copy/src/charts.js","../../wab - Copy/src/App.js","../../wab - Copy/src/index.js"],"names":["WABMenu","_ref","menuItems","selectedMenu","selectedMenuDispatch","page","_jsx","Menu","attached","style","overflowX","overflowY","touchAction","children","map","item","Item","name","title","active","onClick","realNumber","string","real","Number","isFinite","toMAC","arm","Math","round","calcArm","weight","moment","divider","arguments","length","undefined","formatArm","formatMoment","formatWeight","calcMoment","isAboutEquals","a","b","smallestDiff","abs","displayVal","number","formatted","decimal","toFixed","i","isGoodObject","obj","Array","isArray","inputStyle","paddingLeft","paddingRight","Aircraft","aircraft","aircraftDispatch","_jsxs","_Fragment","Header","textAlign","Table","unstackable","maxWidth","Row","HeaderCell","Body","Cell","TouchInput","as","Input","value","basicWeight","onChange","v","fluid","type","input","basicMoment","crewWeight","crewMoment","baggageWeight","baggageMoment","stewardsWeight","stewardsMoment","emergencyWeight","emergencyMoment","extraWeight","extraMoment","readOnly","operatingWeight","operatingMoment","sortReducer","state","key","dir","matchSort","sortObj","getSortedList","sorted","sortDetails","list","sortGetterArgs","listCopy","sortDetail","find","details","sort","aVal","bVal","getter","String","localeCompare","Date","console","warn","ConfirmationModal","onYes","onNo","isOpen","content","Modal","open","size","Content","Description","Actions","Button","positive","color","noPadCell","padding","border","deleteCell","Cargo","cargo","cargoDispatch","deleteItemId","_setDeleteItemId","useState","itemList","sortBy","items","sortedDispatch","useReducer","_len","_key","bind","useSorted","armTotal","weightTotal","momentTotal","forEach","setDeleteItemId","id","trim","sortable","className","colSpan","display","alignItems","Group","vertical","icon","labelPosition","flexGrow","fontSize","width","collapsing","disabled","floated","negative","e","Footer","emptyAircraft","aircraftReducer","action","payload","s","fields","field","sanitizeAircraft","error","useAircraftReducer","hysterisis","current","useStoredReducer","localStorage","sanitizeCargo","cargoReducer","callback","expectedArm","index","element","entries","filter","newItem","arrayOfObjs","property","newKey","currentKey","getUniqueId","useCargoReducer","itemGroup","itemGroupDispatch","maxAux","maxExt","maxIB","maxOB","momentSimplifier","blankSingleFuel","lext","main1","main2","laux","raux","main3","main4","rext","totalFuel","totalMoment","obs","ibs","auxs","exts","blankFuel","takeoff","landing","interpolateTable","valueIn","table","below","above","in","out","resultDiff","valDiff","getSingleAuxMoment","auxFuel","getSingleExtMoment","extFuel","getSingleIBMoment","ibFuel","getSingleOBMoment","obFuel","sanitizeFuelState","addReadOnly","fuelReducer","useFuelReducer","fuel","fuelDispatch","getUsedSpace","storageUsed","getItem","getSpaceUsedByWAB","spaceUsedByWAB","toLowerCase","startsWith","Options","setSpaceUsedByWAB","spaceUsed","setSpaceUsed","deleteLocalModal","setDeleteLocalModal","useEffect","flushSaveToStorage","storageChanged","window","addEventListener","removeEventListener","Segment","secondary","Progress","total","progress","precision","label","ceil","IndividualFuel","setFuel","compact","desiredTotalFuel","mains","max","min","outboards","inboards","marginBottom","Fuel","newFuel","selectedMenuReducer","isAnyNil","vals","allowableDelta","Point","constructor","x","y","this","flip","tempX","distance","otherPoint","xDiff","yDiff","sqrt","Line","pointsArray","points","point","flipPoints","isLinear","yIsInputAxis","lastX","goingUp","findSegment","leftX","rightX","Rect","pointA","pointB","isPointInside","px","py","setPointA","toPoint","setPointB","getSegmentIntersectionWith","seg1","seg2","needsToBeTouching","xy","t","ua","rect1","rect2","getSegmentIntersection","otherSeg","figureYCrossingWith","xAxis","intersection","figureYCrossing","ChartObject","initialValue","calc","chartObjectArray","alertsArray","noticesArray","LinearChart","xOrYRefObj","zRefObj","super","_len2","lines","_key2","line","figureChart","xOrYIn","zIn","_aboveLine$findSegmen","_belowLine$findSegmen","belowLine","aboveLine","linesAreSame","currentLine","aboveCrossing","belowCrossing","PolyChart","xInRefObj","yInRefObj","_len4","_key4","figurePoly","xIn","yIn","minX","maxX","currentPoint","horizSeg","curSeg","intersectsLeftOfX","_curSeg$getSegmentInt","ChartConstant","ScriptRuntime","findChart","linear","popFn","z","chartName","chart","NumberObj","clamp","figureClamp","poly","trend","exit","entry","figureTrend","alert","push","BoolObj","notice","buildExternList","thisObj","externs","Interpreter","funcDef","ChartInput","script","invalid","interpreter","StringObj","invalidObj","result","runCode","log","message","Boolean","exitObject","ChartScript","scriptRuntime","charts","calcInputs","alerts","notices","calcArray","O","T","P","L","val","_$1","$operatingWeight","$fuelWeight","$cargoWeight","_$5","_$6","$externalFuelforwardCG","$externalFuelAftCG","$noExternalFuelForwardCG","$noExternalFuelAftCG","$operatingAreaFoamExtAR","displayOpArea","Calced","cargoWeight","cargoMoment","takeoffMAC","takeoffForwardCG","takeoffAftCG","takeoffOpArea","landingMAC","landingForwardCG","landingAftCG","landingOpArea","App","sessionStorage","useSelectedMenuReducer","pageToShow","Container","margin","inverted","flexDirection","ReactDOM","render","React","StrictMode","document","getElementById"],"mappings":"iPACe,SAASA,EAAOC,GAAkD,IAAjD,UAACC,EAAS,aAAEC,EAAY,qBAAEC,GAAqBH,EAG3E,OAFKE,GAAiBA,EAAaE,MAAMD,EAAqBF,EAAU,GAAGG,MAGnEC,cAACC,IAAI,CAACC,UAAQ,EAACC,MAAO,CAACC,UAAW,OAAQC,UAAU,OAAQC,YAAY,eAAeC,SAE/EX,EAAUY,KAAKC,GAAQT,cAACC,IAAKS,KAAI,CAC7BP,MAAO,CAACG,YAAY,eAEpBK,KAAMF,EAAKG,MACXC,QAAoB,OAAZhB,QAAY,IAAZA,OAAY,EAAZA,EAAcE,QAASU,EAAKV,KACpCe,QAASA,IAAIhB,EAAqBW,EAAKV,OAHlC,OAAOU,EAAKV,SAQzC,C,6BCfA,SAASgB,EAAWC,GAChB,IAAIC,EAAOC,OAAOF,GAElB,OADKG,SAASF,KAAOA,EAAK,GACnBA,CACX,CAEA,SAASG,EAAMC,GACX,OAAOC,KAAKC,MAAO,KAAKL,OAAOG,GAAK,OAAQ,MAAM,IAAI,EAC1D,CAEA,SAASG,EAAQC,EAAQC,GAAqB,IAAbC,EAAOC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,IACrC,OAOJ,SAAmBP,GAAkB,IAAbM,EAAOC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,IAE5B,OADAP,EAAIN,EAAWM,GACRC,KAAKC,MAAMF,EAAIM,GAASA,CACnC,CAVWI,CAbY,IAaDC,EAAaN,GAA0BO,EAAaR,GAASE,EACnF,CAEA,SAASO,EAAWT,EAAQJ,GACxB,OAAOW,EAAcd,OAAOO,GAAQP,OAAOG,GAjBxB,IAkBvB,CAOA,SAASY,EAAaR,GAElB,OADAA,EAAOV,EAAWU,GACXH,KAAKC,MAAa,IAAPE,GAAY,GAClC,CAEA,SAASO,EAAaN,GAClB,OAAOJ,KAAKC,MAAyB,IAAnBR,EAAWW,IAAe,GAChD,CAEA,SAASS,EAAcC,EAAEC,GAA2B,IAAxBC,EAAYV,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,KAGrC,OAFAQ,EAAErB,EAAWqB,GACbC,EAAEtB,EAAWsB,GACTf,KAAKiB,IAAIH,EAAEC,GAAGC,CAItB,CAEA,SAASE,EAAWC,GAAmB,IAI/BC,EAJoBC,EAAOf,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,EAKhC,GAJAa,EAAOvB,OAAOuB,GACTtB,SAASsB,KAASA,EAAO,GAG1BE,GAAS,EACTD,EAAUD,EAAOG,QAAQD,OACxB,CACDD,EAAUD,EACV,IAAK,IAAII,EAAE,EAAEA,EAAEF,EAAQE,IACnBH,GAAW,GAEfA,EAAUpB,KAAKC,MAAMmB,GACrB,IAAK,IAAIG,EAAE,EAAEA,EAAEF,EAAQE,IACnBH,GAAW,EAEnB,CACA,OAAOA,CACX,CAeA,SAASI,EAAaC,GAClB,QAAsB,kBAANA,GAAkBC,MAAMC,QAAQF,IAAc,OAANA,EAC5D,CCvEA,MAEMG,EAAW,CAAC/C,MAAM,CAACgD,YAAY,MAAOC,aAAa,QAG1C,SAASC,EAAQ1D,GAA+B,IAA9B,SAAC2D,EAAQ,iBAAEC,GAAiB5D,EAEzD,OACI6D,eAAAC,WAAA,CAAAlD,SAAA,CACIP,cAAC0D,IAAM,CAACC,UAAU,SAAQpD,SAAC,aAG3BiD,eAACI,IAAK,CAACC,aAAW,EAAC1D,MAAO,CAAC2D,SAAU,SAASvD,SAAA,CAC1CP,cAAC4D,IAAMF,OAAM,CAAAnD,SACTiD,eAACI,IAAMG,IAAG,CAAAxD,SAAA,CACNP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,iBACrCP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,WACrCP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,aAG7CP,cAAC4D,IAAMK,KAAI,CAAA1D,SACPiD,eAACI,IAAMG,IAAG,CAAAxD,SAAA,CACNP,cAAC4D,IAAMM,KAAI,CAAA3D,SACPP,cAACmE,IAAU,CAACC,GAAIC,IAAOC,MAAOhB,EAASiB,YAAaC,SAAWC,IAC3DlB,EAAiB,MAAO,IAAID,EAAUiB,YAAaE,GAAG,EACvDC,OAAK,EAACC,KAAK,SAAS/D,MAAM,eAAegE,MAAO1B,MAEvDlD,cAAC4D,IAAMM,KAAI,CAAA3D,SACPP,cAACmE,IAAU,CAACC,GAAIC,IAAOC,MAAOhB,EAASuB,YAAaL,SAAWC,IAC3DlB,EAAiB,MAAO,IAAID,EAAUuB,YAAaJ,GAAG,EACvDC,OAAK,EAACC,KAAK,SAAS/D,MAAM,eAAegE,MAAO1B,MAEvDlD,cAAC4D,IAAMM,KAAI,CAAA3D,SACPP,cAACmE,IAAU,CAACC,GAAIC,IAAOC,MAAO9C,EAAQ8B,EAASiB,YAAajB,EAASuB,aAAcL,SAAWC,IAC1FlB,EAAiB,MAAO,IAAID,EAAUuB,YAAa3C,EAAWoB,EAASiB,YAAaE,IAAI,EACzFC,OAAK,EAACC,KAAK,SAAS/D,MAAM,YAAYgE,MAAO1B,cAKhEM,eAACI,IAAK,CAACC,aAAW,EAAC1D,MAAO,CAAC2D,SAAU,SAASvD,SAAA,CAC1CP,cAAC4D,IAAMF,OAAM,CAAAnD,SACTiD,eAACI,IAAMG,IAAG,CAAAxD,SAAA,CACNP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,gBACrCP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,WACrCP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,aAG7CP,cAAC4D,IAAMK,KAAI,CAAA1D,SACPiD,eAACI,IAAMG,IAAG,CAAAxD,SAAA,CACNP,cAAC4D,IAAMM,KAAI,CAAA3D,SACPP,cAACmE,IAAU,CAACC,GAAIC,IAAOC,MAAOhB,EAASwB,WAAYN,SAAWC,IAC1DlB,EAAiB,MAAO,IAAID,EAAUwB,WAAYL,GAAG,EACtDC,OAAK,EAACC,KAAK,SAAS/D,MAAM,cAAcgE,MAAO1B,MAEtDlD,cAAC4D,IAAMM,KAAI,CAAA3D,SACPP,cAACmE,IAAU,CAACC,GAAIC,IAAOC,MAAOhB,EAASyB,WAAYP,SAAWC,IAC1DlB,EAAiB,MAAO,IAAID,EAAUyB,WAAYN,GAAG,EACtDC,OAAK,EAACC,KAAK,SAAS/D,MAAM,cAAcgE,MAAO1B,MAEtDlD,cAAC4D,IAAMM,KAAI,CAAA3D,SACPP,cAACmE,IAAU,CAACC,GAAIC,IAAOC,MAAO9C,EAAQ8B,EAASwB,WAAYxB,EAASyB,YAAaP,SAAWC,IACxFlB,EAAiB,MAAO,IAAID,EAAUyB,WAAY7C,EAAWoB,EAASwB,WAAYL,IAAI,EACvFC,OAAK,EAACC,KAAK,SAAS/D,MAAM,WAAWgE,MAAO1B,WAI3DlD,cAAC4D,IAAMF,OAAM,CAAAnD,SACTiD,eAACI,IAAMG,IAAG,CAAAxD,SAAA,CACNP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,oBACrCP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,WACrCP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,aAG7CP,cAAC4D,IAAMK,KAAI,CAAA1D,SACPiD,eAACI,IAAMG,IAAG,CAAAxD,SAAA,CACNP,cAAC4D,IAAMM,KAAI,CAAA3D,SACPP,cAACmE,IAAU,CAACC,GAAIC,IAAOC,MAAOhB,EAAS0B,cAAeR,SAAWC,IAC7DlB,EAAiB,MAAO,IAAID,EAAU0B,cAAeP,GAAG,EACzDC,OAAK,EAACC,KAAK,SAAS/D,MAAM,mBAAmBgE,MAAO1B,MAE3DlD,cAAC4D,IAAMM,KAAI,CAAA3D,SACPP,cAACmE,IAAU,CAACC,GAAIC,IAAOC,MAAOhB,EAAS2B,cAAeT,SAAWC,IAC7DlB,EAAiB,MAAO,IAAID,EAAU2B,cAAeR,GAAG,EACzDC,OAAK,EAACC,KAAK,SAAS/D,MAAM,mBAAmBgE,MAAO1B,MAE3DlD,cAAC4D,IAAMM,KAAI,CAAA3D,SACPP,cAACmE,IAAU,CAACC,GAAIC,IAAOC,MAAO9C,EAAQ8B,EAAS0B,cAAe1B,EAAS2B,eAAgBT,SAAWC,IAC9FlB,EAAiB,MAAO,IAAID,EAAU2B,cAAe/C,EAAWoB,EAAS0B,cAAeP,IAAI,EAC7FC,OAAK,EAACC,KAAK,SAAS/D,MAAM,gBAAgBgE,MAAO1B,WAIhElD,cAAC4D,IAAMF,OAAM,CAAAnD,SACTiD,eAACI,IAAMG,IAAG,CAAAxD,SAAA,CACNP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,oBACrCP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,WACrCP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,aAG7CP,cAAC4D,IAAMK,KAAI,CAAA1D,SACPiD,eAACI,IAAMG,IAAG,CAAAxD,SAAA,CACNP,cAAC4D,IAAMM,KAAI,CAAA3D,SACPP,cAACmE,IAAU,CAACC,GAAIC,IAAOC,MAAOhB,EAAS4B,eAAgBV,SAAWC,IAC9DlB,EAAiB,MAAO,IAAID,EAAU4B,eAAgBT,GAAG,EAC1DC,OAAK,EAACC,KAAK,SAAS/D,MAAM,kBAAkBgE,MAAO1B,MAE1DlD,cAAC4D,IAAMM,KAAI,CAAA3D,SACPP,cAACmE,IAAU,CAACC,GAAIC,IAAOC,MAAOhB,EAAS6B,eAAgBX,SAAWC,IAC9DlB,EAAiB,MAAO,IAAID,EAAU6B,eAAgBV,GAAG,EAC1DC,OAAK,EAACC,KAAK,SAAS/D,MAAM,kBAAkBgE,MAAO1B,MAE1DlD,cAAC4D,IAAMM,KAAI,CAAA3D,SACPP,cAACmE,IAAU,CAACC,GAAIC,IAAOC,MAAO9C,EAAQ8B,EAAS4B,eAAgB5B,EAAS6B,gBAAiBX,SAAWC,IAChGlB,EAAiB,MAAO,IAAID,EAAU6B,eAAgBjD,EAAWoB,EAAS4B,eAAgBT,IAAI,EAC/FC,OAAK,EAACC,KAAK,SAAS/D,MAAM,eAAegE,MAAO1B,WAI/DlD,cAAC4D,IAAMF,OAAM,CAAAnD,SACTiD,eAACI,IAAMG,IAAG,CAAAxD,SAAA,CACNP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,iBACrCP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,WACrCP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,aAG7CP,cAAC4D,IAAMK,KAAI,CAAA1D,SACPiD,eAACI,IAAMG,IAAG,CAAAxD,SAAA,CACNP,cAAC4D,IAAMM,KAAI,CAAA3D,SACPP,cAACmE,IAAU,CAACC,GAAIC,IAAOC,MAAOhB,EAAS8B,gBAAiBZ,SAAWC,IAC/DlB,EAAiB,MAAO,IAAID,EAAU8B,gBAAiBX,GAAG,EAC3DC,OAAK,EAACC,KAAK,SAAS/D,MAAM,eAAegE,MAAO1B,MAEvDlD,cAAC4D,IAAMM,KAAI,CAAA3D,SACPP,cAACmE,IAAU,CAACC,GAAIC,IAAOC,MAAOhB,EAAS+B,gBAAiBb,SAAWC,IAC/DlB,EAAiB,MAAO,IAAID,EAAU+B,gBAAiBZ,GAAG,EAC3DC,OAAK,EAACC,KAAK,SAAS/D,MAAM,eAAegE,MAAO1B,MAEvDlD,cAAC4D,IAAMM,KAAI,CAAA3D,SACPP,cAACmE,IAAU,CAACC,GAAIC,IAAOC,MAAO9C,EAAQ8B,EAAS8B,gBAAiB9B,EAAS+B,iBAAkBb,SAAWC,IAClGlB,EAAiB,MAAO,IAAID,EAAU+B,gBAAiBnD,EAAWoB,EAAS8B,gBAAiBX,IAAI,EACjGC,OAAK,EAACC,KAAK,SAAS/D,MAAM,YAAYgE,MAAO1B,WAI5DlD,cAAC4D,IAAMF,OAAM,CAAAnD,SACTiD,eAACI,IAAMG,IAAG,CAAAxD,SAAA,CACNP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,iBACrCP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,WACrCP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,aAG7CP,cAAC4D,IAAMK,KAAI,CAAA1D,SACPiD,eAACI,IAAMG,IAAG,CAAAxD,SAAA,CACNP,cAAC4D,IAAMM,KAAI,CAAA3D,SACPP,cAACmE,IAAU,CAACC,GAAIC,IAAOC,MAAOhB,EAASgC,YAAad,SAAWC,IAC3DlB,EAAiB,MAAO,IAAID,EAAUgC,YAAab,GAAG,EACvDC,OAAK,EAACC,KAAK,SAAS/D,MAAM,eAAegE,MAAO1B,MAEvDlD,cAAC4D,IAAMM,KAAI,CAAA3D,SACPP,cAACmE,IAAU,CAACC,GAAIC,IAAOC,MAAOhB,EAASiC,YAAaf,SAAWC,IAC3DlB,EAAiB,MAAO,IAAID,EAAUiC,YAAad,GAAG,EACvDC,OAAK,EAACC,KAAK,SAAS/D,MAAM,eAAegE,MAAO1B,MAEvDlD,cAAC4D,IAAMM,KAAI,CAAA3D,SACPP,cAACmE,IAAU,CAACC,GAAIC,IAAOC,MAAO9C,EAAQ8B,EAASgC,YAAahC,EAASiC,aAAcf,SAAWC,IAC1FlB,EAAiB,MAAO,IAAID,EAAUiC,YAAarD,EAAWoB,EAASgC,YAAab,IAAI,EACzFC,OAAK,EAACC,KAAK,SAAS/D,MAAM,YAAYgE,MAAO1B,cAMhEM,eAACI,IAAK,CAACC,aAAW,EAAC1D,MAAO,CAAC2D,SAAU,SAASvD,SAAA,CAC1CP,cAAC4D,IAAMF,OAAM,CAAAnD,SACTiD,eAACI,IAAMG,IAAG,CAAAxD,SAAA,CACNP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,cACrCP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,WACrCP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,aAG7CP,cAAC4D,IAAMK,KAAI,CAAA1D,SACPiD,eAACI,IAAMG,IAAG,CAAAxD,SAAA,CACNP,cAAC4D,IAAMM,KAAI,CAACP,UAAU,SAAQpD,SACzB+C,EAASkC,SAASC,kBAEvBzF,cAAC4D,IAAMM,KAAI,CAACP,UAAU,SAAQpD,SACzB+C,EAASkC,SAASE,kBAEvB1F,cAAC4D,IAAMM,KAAI,CAACP,UAAU,SAAQpD,SACzBiB,EAAQ8B,EAASkC,SAASC,gBAAiBnC,EAASkC,SAASE,6BAO1F,C,aC1MA,SAASC,EAAYC,EAAOC,GACxB,OAAIA,IAAMD,EAAMC,IACI,IAAZD,EAAME,IACC,CAACD,MAAKC,KAAM,GAEhB,CAACD,IAAK,KAAMC,IAAK,GAErB,CAACD,MAAKC,IAAK,EACtB,CAEA,SAASC,EAAUC,EAASH,GACxB,OAAIG,GAAWA,EAAQH,MAAMA,EAClBG,EAAQF,IAAI,EAAE,YAAY,aAE9B,IACX,CAEA,SAASG,EAAcC,EAAQC,EAAaC,EAAMC,GAC9C,IAAKrD,MAAMC,QAAQmD,GAAO,OAAOA,EACjC,MAAME,EAAS,IAAIF,GACnB,GAAiB,OAAbF,EAAOL,IAAW,CAClB,MAAMU,EAAWJ,EAAYK,MAAMC,GAAWA,EAAQZ,MAAMK,EAAOL,MAC/DU,GACAD,EAASI,MAAM,CAACtE,EAAGC,KACf,IAAIsE,EAAMC,EAQV,MAP+B,oBAApBL,EAAWM,QAClBF,EAAKJ,EAAWM,OAAOzE,KAAMiE,GAC7BO,EAAKL,EAAWM,OAAOxE,KAAMgE,KAE7BM,EAAKvE,EAAE8D,EAAOL,KACde,EAAKvE,EAAE6D,EAAOL,MAEI,WAAlBU,EAAW5B,KACJuB,EAAOJ,KAAO5E,OAAOyF,GAAQzF,OAAO0F,IACnB,WAAlBL,EAAW5B,KACVuB,EAAOJ,IAAMgB,OAAOH,GAAMI,cAAcD,OAAOF,IAC9B,SAAlBL,EAAW5B,KACVuB,EAAOJ,KAAO,IAAIkB,KAAKL,GAAQ,IAAIK,KAAKJ,KAEnDK,QAAQC,KAAK,yDAAyDX,EAAW5B,KAAK,KAC/E,EAAC,GAGpB,CACA,OAAO2B,CACX,C,aC7Ce,SAASa,EAAiBxH,GAAwC,IAAvC,MAACyH,EAAK,KAAEC,EAAI,OAAEC,EAAM,MAAE1G,EAAK,QAAE2G,GAAQ5H,EAC3E,OACI6D,eAACgE,IAAK,CAACC,KAAMH,EAAQI,KAAK,OAAMnH,SAAA,CAE5BgH,EAEIvH,cAACwH,IAAM9D,OAAM,CAAAnD,SAAEK,IAEf,KAERZ,cAACwH,IAAMG,QAAO,CAAApH,SACZP,cAACwH,IAAMI,YAAW,CAAArH,SACbgH,GAAgBvH,cAAC0D,IAAM,CAAAnD,SAAEK,QAGhC4C,eAACgE,IAAMK,QAAO,CAAAtH,SAAA,CACZP,cAAC8H,IAAM,CAACC,UAAQ,EAACR,QAAS,MAAOzG,QAASsG,IAC1CpH,cAAC8H,IAAM,CAACE,MAAM,QAAQT,QAAS,KAAMzG,QAASuG,SAIxD,CCXA,MAAMY,EAAU,CAACC,QAAQ,MAAOC,OAAO,QACjCC,EAAW,CAACF,QAAQ,kBAAmBC,OAAO,QAC9CjF,EAAW,CAAC/C,MAAM,CAACgD,YAAY,MAAOC,aAAa,QAInD+C,EAAY,CACd,CAACN,IAAK,OAAQlB,KAAM,UACpB,CAACkB,IAAK,SAAUlB,KAAM,UACtB,CAACkB,IAAK,SAAUlB,KAAM,UACtB,CAACkB,IAAK,MAAOlB,KAAM,WAGR,SAAS0D,EAAK1I,GAAyB,IAAxB,MAAC2I,EAAK,cAAEC,GAAc5I,EAChD,MAAO6I,EAAcC,GAAoBC,mBAAS,OAC3CC,EAAUC,EAAQ7C,GFsB7B,SAAmBI,EAAa0C,GAC5B,MAAO3C,EAAQ4C,GAAkBC,qBAAWpD,EAAa,CAACE,IAAK,KAAMC,IAAK,IAAI,QAAAkD,EAAApH,UAAAC,OADxCwE,EAAc,IAAArD,MAAAgG,EAAA,EAAAA,EAAA,KAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAd5C,EAAc4C,EAAA,GAAArH,UAAAqH,GAGpD,MAAO,CAAChD,EAAcC,EAAQC,EAAa0C,EAAOxC,GAAiByC,EAAgB/C,EAAUmD,KAAK,KAAMhD,GAC5G,CE1B0CiD,CAAUhD,EAAamC,GAG7D,IAAkCc,EAA9BC,EAAY,EAAGC,EAAY,EAEvB,OAARX,QAAQ,IAARA,KAAUY,SAAS9I,IACf4I,GAAanI,OAAOT,EAAKgB,QACzB6H,GAAapI,OAAOT,EAAKiB,OAAO,IAEpC2H,EAAYpH,EAAaoH,GACzBC,EAAYtH,EAAasH,GACzBF,EAAS5H,EAAQ6H,EAAaC,GAE9B,MAAME,EAAmBC,IACrB,IAAK,MAAMhJ,KAAQkI,EACf,GAAIlI,EAAKgJ,KAAOA,GACW,KAAnBhJ,EAAKE,KAAK+I,QAAevH,EAAc1B,EAAKgB,OAAQ,IAAMU,EAAc1B,EAAKiB,OAAQ,GAErF,YADA6G,EAAc,SAAUkB,GAKpChB,EAAiBgB,EAAG,EAGxB,OACIjG,eAAAC,WAAA,CAAAlD,SAAA,CACIP,cAACmH,EAAiB,CAACvG,MAAO,wCACd0G,OAAuB,OAAfkB,EACRpB,MAAOA,KACHmB,EAAc,SAAUC,GACxBgB,EAAgB,KAAK,EAEzBnC,KAAMA,KACFmC,EAAgB,KAAK,IAGrChG,eAACI,IAAK,CAACC,aAAW,EAAC1D,MAAO,CAAC2D,SAAU,SAAU6F,UAAQ,EAAApJ,SAAA,CACnDiD,eAACI,IAAMF,OAAM,CAACkG,UAAU,eAAcrJ,SAAA,CAClCP,cAAC4D,IAAMG,IAAG,CAAAxD,SACNP,cAAC4D,IAAMI,WAAU,CAAC6F,QAAQ,IAAGtJ,SACzBiD,eAAA,OAAKrD,MAAO,CAAC2J,QAAQ,OAAQC,WAAW,UAAUxJ,SAAA,CAC9CP,cAAC8H,IAAOkC,MAAK,CAACC,UAAQ,EAAA1J,SAClBP,cAAC8H,IAAM,CAACoC,KAAK,MAAMC,cAAc,OAAOpC,UAAQ,EAACL,KAAK,QAAQH,QAAQ,MAAOzG,QAASA,IAAIyH,EAAc,SAAU,UAGtHvI,cAAA,OAAKG,MAAO,CAACiK,SAAS,IAAKzG,UAAU,SAAU0G,SAAS,SAAS9J,SAAC,iBAI9EiD,eAACI,IAAMG,IAAG,CAAAxD,SAAA,CACNP,cAAC4D,IAAMI,WAAU,CAACsG,MAAO,EAAGpE,OAAQH,EAAU,QAAWjF,QAASA,IAAI8H,EAAO,QAAQrI,SAAG,WACxFP,cAAC4D,IAAMI,WAAU,CAACsG,MAAO,EAAGpE,OAAQH,EAAU,UAAWjF,QAASA,IAAI8H,EAAO,UAAUrI,SAAC,WACxFP,cAAC4D,IAAMI,WAAU,CAACsG,MAAO,EAAGpE,OAAQH,EAAU,UAAWjF,QAASA,IAAI8H,EAAO,UAAUrI,SAAC,WACxFP,cAAC4D,IAAMI,WAAU,CAACsG,MAAO,EAAGpE,OAAQH,EAAU,OAAWjF,QAASA,IAAI8H,EAAO,OAAOrI,SAAI,WACxFP,cAAC4D,IAAMI,WAAU,CAACuG,YAAU,EAACD,MAAO,EAAGxJ,QAASA,IAAI8H,EAAO,cAGnE5I,cAAC4D,IAAMK,KAAI,CAAA1D,SAEK,OAARoI,QAAQ,IAARA,KAAU9G,OACV8G,EAASnI,KAAKC,GACN+C,eAACI,IAAMG,IAAG,CAAAxD,SAAA,CACNP,cAAC4D,IAAMM,KAAI,CAAC/D,MAAO8H,EAAU1H,SACzBP,cAACmE,IAAU,CAACC,GAAIC,IAAOC,MAAO7D,EAAKE,KAAM6D,SAAWC,GAAI8D,EAAc,SAAU,IAAI9H,EAAME,KAAM8D,IAAKC,OAAK,EAACE,MAAO1B,MAEtHlD,cAAC4D,IAAMM,KAAI,CAAC/D,MAAO8H,EAAU1H,SACzBP,cAACmE,IAAU,CAACC,GAAIC,IAAOC,MAAO7D,EAAKgB,OAAQ+C,SAAWC,IAC9C8D,EAAc,SAAU,IAAI9H,EAAMgB,OAAQgD,EAAG/C,OAAQQ,EAAWuC,EAAGhE,EAAKY,KAAMA,IAAKZ,EAAKY,KAAK,EAClGqD,OAAK,EAAEC,KAAK,SAAS/D,MAAM,SAASgE,MAAO1B,MAElDlD,cAAC4D,IAAMM,KAAI,CAAC/D,MAAO8H,EAAU1H,SACzBP,cAACmE,IAAU,CAACC,GAAIC,IAAOC,MAAO7D,EAAKiB,OAAQ8C,SAAWC,GAAI8D,EAAc,SAAU,IAAI9H,EAAMiB,OAAQ+C,EAAGpD,IAAKG,EAAQf,EAAKgB,OAAQgD,KAAMC,OAAK,EAACC,KAAK,SAAS/D,MAAM,SAASgE,MAAO1B,MAErLlD,cAAC4D,IAAMM,KAAI,CAAC/D,MAAO,IAAI8H,EAAWtE,UAAU,UAAUpD,SAClDP,cAACmE,IAAU,CAACC,GAAIC,IAAOC,MAAO7D,EAAKY,IAAKmD,SAAWC,GAAI8D,EAAc,SAAU,IAAI9H,EAAMY,IAAKoD,EAAG/C,OAAQQ,EAAWzB,EAAKgB,OAAQgD,KAAMC,OAAK,EAAC8F,SAAUrI,EAAc1B,EAAKgB,OAAO,GAAIkD,KAAMxC,EAAc1B,EAAKgB,OAAO,GAAG,KAAK,SAAUb,MAAM,MAAMgE,MAAO1B,MAE9PlD,cAAC4D,IAAMM,KAAI,CAAC/D,MAAOiI,EAAW7H,SAC1BP,cAAC8H,IAAM,CAAC2C,QAAQ,QAAQP,KAAK,QAAQQ,UAAQ,EAAChD,KAAK,OAAO5G,QAAU6J,IAChEnB,EAAgB/I,EAAKgJ,GAAG,QAjBpBhJ,EAAKgJ,MAuBzBzJ,cAAC4D,IAAMG,IAAG,CAAC5D,MAAO,CAACwD,UAAU,UAAUpD,SACnCP,cAAC4D,IAAMM,KAAI,CAAC2F,QAAQ,IAAGtJ,SAAC,iBAO5B,OAARoI,QAAQ,IAARA,KAAU9G,OACN7B,cAAC4D,IAAMgH,OAAM,CAAArK,SACTiD,eAACI,IAAMG,IAAG,CAAAxD,SAAA,CACNP,cAAC4D,IAAMM,KAAI,CAAA3D,SAAC,UACZP,cAAC4D,IAAMM,KAAI,CAAA3D,SAAE8I,IACbrJ,cAAC4D,IAAMM,KAAI,CAAA3D,SAAE+I,IACbtJ,cAAC4D,IAAMM,KAAI,CAAA3D,SAAE6I,IACbpJ,cAAC4D,IAAMM,KAAI,SAInB,UAKxB,C,6BCrIA,MAAM2G,EAAgB,CAClBtG,YAAa,EACbM,YAAa,EAEbC,WAAY,EACZC,WAAY,EAEZC,cAAe,EACfC,cAAe,EAEfC,eAAgB,EAChBC,eAAgB,EAEhBC,gBAAiB,EACjBC,gBAAiB,EAEjBC,YAAa,EACbC,YAAa,EAEbC,SAAS,CACLC,gBAAiB,EACjBC,gBAAiB,IA4BzB,SAASoF,EAAgBlF,EAAOmF,EAAQC,GAMpC,OAJKlI,EAAa8C,KACdA,EAAMiF,GAGFE,GACJ,IAAK,QACD,OAAOF,EAEX,IAAK,MACD,OAnBSI,EAhBrB,SAA0BA,GACtB,MAAMC,EAAO,CACT,cAAe,cACf,aAAc,aACd,gBAAiB,gBACjB,iBAAkB,iBAClB,kBAAmB,kBACnB,cAAe,eAEnB,IAAK,MAAMC,KAASD,EAChBD,EAAEE,GAAOjK,OAAO+J,EAAEE,IACbhK,SAAS8J,EAAEE,MAASF,EAAEE,GAAO,GAEtC,OAAOF,CACX,CAqB+BG,CAAiBJ,IAlB1CxF,SAAS,CACPC,gBAAiBwF,EAAE1G,YAAY0G,EAAEnG,WAAWmG,EAAEjG,cAAciG,EAAE/F,eAAe+F,EAAE7F,gBAAgB6F,EAAE3F,YACjGI,gBAAiBuF,EAAEpG,YAAYoG,EAAElG,WAAWkG,EAAEhG,cAAcgG,EAAE9F,eAAe8F,EAAE5F,gBAAgB4F,EAAE1F,aAE9F0F,EAgBH,QAEI,OADAhE,QAAQoE,MAAM,mCAAoCN,GAC3CnF,EAvBnB,IAAqBqF,CAyBrB,CAEA,SAASK,IAAoC,IAAjBC,EAAU3J,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,IACnC,MAAO0B,GAAWkI,QAASjI,IAAqBkI,YAAiB,gBAAiBX,EAAiBD,EAAea,aAAcH,GAEhI,MAAO,CAACjI,EAAUC,EACtB,CCnEA,SAASoI,EAAcrD,GACnB,IAAK,MAAM7H,KAAQ6H,EACf7H,EAAKgB,OAAOP,OAAOT,EAAKgB,QACxBhB,EAAKiB,OAAOR,OAAOT,EAAKiB,QACxBjB,EAAKY,IAAIH,OAAOT,EAAKY,KAEzB,OAAOiH,CACX,CAEA,SAASsD,EAAahG,EAAOmF,EAAQC,EAASa,GAI1C,OAFK7I,MAAMC,QAAQ2C,KAAQA,EAAM,IAEzBmF,GACJ,IAAK,QACD,MAAO,GAEX,IAAK,SAAS,CACV,MAAMlC,EAAMjD,EAEZoF,EAAQvJ,OAAOP,OAAO8J,EAAQvJ,QAC9BuJ,EAAQtJ,OAAOR,OAAO8J,EAAQtJ,QAC9BsJ,EAAQ3J,IAAIH,OAAO8J,EAAQ3J,KAE3B,MAAMyK,EAActK,EAAQwJ,EAAQvJ,OAAQuJ,EAAQtJ,QAC/CS,EAAc2J,EAAad,EAAQ3J,IAAK,MACzC2J,EAAQ3J,IAAIyK,GAGhB,IAAK,MAAOC,EAAOC,KAAYnD,EAAMoD,UACjC,GAAID,EAAQvC,KAAKuB,EAAQvB,GAAG,CACxBZ,EAAMkD,GAAOf,EACb,KACJ,CAGJ,OAAOW,EAAc9C,EACzB,CACA,IAAK,SAAS,CACV,MAAMA,EAAMjD,EACN6D,EAAoB,kBAAVuB,EAAqBA,EAAQvB,GAAKuB,EAClD,OAAOnC,EAAMqD,QAAQzL,KAAUA,EAAKgJ,KAAOA,IAC/C,CACA,IAAK,SAAS,CACV,IAAI0C,EAAUnB,EAMd,OALKlI,EAAaqJ,KAAUA,EAhD7B,CAACxL,KAAK,GAAIc,OAAQ,EAAGC,OAAQ,EAAGL,IAAK,IAkDpC8K,EAAQ1C,GNQpB,SAAqB2C,EAAaC,GAC9B,IAAIC,EAAS,EACb,IACI,IAAK,MAAM7L,KAAQ2L,EAAY,CAC3B,IAAIG,EAAarL,OAAOT,EAAK4L,IACxBlL,SAASoL,KAAaA,EAAa,GACpCD,GAAQC,IAAYD,EAASC,EAAW,EAChD,CACJ,CAAE,MACF,CACA,OAAOD,CACX,CMnBuBE,CAAY5G,EAAO,MAC1BiG,GAAUA,EAASM,EAAQ1C,IAExBkC,EAAc,IAAI/F,EAAOuG,GACpC,CACA,QACI,OAAOvG,EAEnB,CAEA,SAAS6G,IAAiC,IAAjBlB,EAAU3J,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,IAChC,MAAO8K,GAAYlB,QAASmB,IAAsBlB,YAAiB,aAAcG,EAAc,GAAIF,aAAcH,GAEjH,MAAO,CAACmB,EAAWC,EACvB,CClEA,MAAMC,EAAS,KACTC,EAAS,KACTC,EAAQ,KACRC,EAAQ,KACRC,EAAiB,IAEjBC,EAAgB,CAClBC,KAAM,EACNC,MAAO,EACPC,MAAO,EACPC,KAAM,EACNC,KAAM,EACNC,MAAO,EACPC,MAAO,EACPC,KAAM,EAENjI,SAAS,CACLkI,UAAW,EACXC,YAAa,EACbC,IAAK,EACLC,IAAK,EACLC,KAAM,EACNC,KAAM,IAIRC,EAAY,CACdC,QAAShB,EACTiB,QAASjB,GAIb,SAASkB,GAAiBC,EAASC,GAC/B,IAAIC,EAAM,KACNC,EAAM,KACV,IAAK,MAAM9N,KAAQ4N,EAAM,CACrB,GAAIlM,EAAciM,EAAS3N,EAAK+N,IAAI,CAChCD,EAAM9N,EACN6N,EAAM7N,EACN,KACJ,CACI2N,GAAS3N,EAAK+N,KACF,OAARF,EACI7N,EAAK+N,GAAGF,EAAME,KACdF,EAAM7N,GAGV6N,EAAM7N,GAGV2N,GAAS3N,EAAK+N,KACF,OAARD,EACI9N,EAAK+N,GAAGD,EAAMC,KACdD,EAAM9N,GAGV8N,EAAM9N,EAGlB,CAEA,GAAW,MAAP8N,GAAsB,MAAPD,EACf,OAAO,KAGX,GAAIA,IAAQC,GAASpM,EAAcmM,EAAME,GAAID,EAAMC,IAC/C,OAAOD,EAAME,IAGjB,MAAMC,EAAaH,EAAME,IAAMH,EAAMG,IAC/BE,EAAUJ,EAAMC,GAAKF,EAAME,GACjC,OAASJ,EAAUE,EAAME,IAAMG,EAAWD,EAAaJ,EAAMG,GACjE,CAEA,SAASG,GAAmBC,GASxB,OAAOV,GAAiBU,EARV,CACV,CAACL,GAAI,EAAaC,IAAK,OACvB,CAACD,GAAI5B,OAAa6B,IAAK,KACvB,CAACD,GAAI5B,KAAa6B,IAAK,OACvB,CAACD,GAAI5B,OAAa6B,IAAK,OACvB,CAACD,GAAI5B,EAAa6B,IAAK,SAGaI,EAAQ7B,CACpD,CAEA,SAAS8B,GAAmBC,GASxB,OAAOZ,GAAiBY,EARV,CACV,CAACP,GAAI,EAAaC,IAAK,OACvB,CAACD,GAAI3B,KAAa4B,IAAK,KACvB,CAACD,GAAI3B,KAAa4B,IAAK,OACvB,CAACD,GAAI3B,KAAa4B,IAAK,KACvB,CAACD,GAAI3B,EAAa4B,IAAK,SAGaM,EAAQ/B,CACpD,CAEA,SAASgC,GAAkBC,GASvB,OAAOd,GAAiBc,EARV,CACV,CAACT,GAAI,EAAYC,IAAK,OACtB,CAACD,GAAI1B,KAAY2B,IAAK,OACtB,CAACD,GAAI1B,KAAY2B,IAAK,OACtB,CAACD,GAAI1B,KAAY2B,IAAK,OACtB,CAACD,GAAI1B,EAAY2B,IAAK,OAGaQ,EAAOjC,CAClD,CAEA,SAASkC,GAAkBC,GASvB,OAAOhB,GAAiBgB,EARV,CACV,CAACX,GAAI,EAAYC,IAAK,KACtB,CAACD,GAAIzB,OAAY0B,IAAK,OACtB,CAACD,GAAIzB,KAAY0B,IAAK,OACtB,CAACD,GAAIzB,OAAY0B,IAAK,OACtB,CAACD,GAAIzB,EAAY0B,IAAK,SAGaU,EAAOnC,CAClD,CASA,SAASoC,GAAkBnE,GACvB,MAAMC,EAAO,CAAC,QAAS,QAAS,QAAS,QAAS,OAAQ,OAAQ,OAAQ,QAC1E,IAAK,MAAMC,KAASD,EAChBD,EAAEE,GAAOjK,OAAO+J,EAAEE,IACbhK,SAAS8J,EAAEE,MAASF,EAAEE,GAAO,GAC9BF,EAAEE,GAAO,IAAGF,EAAEE,GAAO,GAY7B,OATIF,EAAEiC,KAAKL,IAAQ5B,EAAEiC,KAAKL,GACtB5B,EAAEwC,KAAKZ,IAAQ5B,EAAEwC,KAAKZ,GACtB5B,EAAEoC,KAAKT,IAAQ3B,EAAEoC,KAAKT,GACtB3B,EAAEqC,KAAKV,IAAQ3B,EAAEqC,KAAKV,GACtB3B,EAAEkC,MAAMJ,IAAO9B,EAAEkC,MAAMJ,GACvB9B,EAAEuC,MAAMT,IAAO9B,EAAEuC,MAAMT,GACvB9B,EAAEmC,MAAMN,IAAO7B,EAAEmC,MAAMN,GACvB7B,EAAEsC,MAAMT,IAAO7B,EAAEsC,MAAMT,GAEpB7B,CACX,CAEA,SAASoE,GAAYpE,GA3BrB,IAAuBiC,EAAMC,EAAOC,EAAOC,EAAMC,EAAMC,EAAOC,EAAOC,EAoCjE,OARAxC,EAAEzF,SAAS,CACPkI,UAAWzC,EAAEiC,KAAKjC,EAAEwC,KAAKxC,EAAEoC,KAAKpC,EAAEqC,KAAKrC,EAAEkC,MAAMlC,EAAEmC,MAAMnC,EAAEsC,MAAMtC,EAAEuC,MACjEG,aA9BeT,EA8BYjC,EAAEiC,KA9BRC,EA8BclC,EAAEkC,MA9BTC,EA8BgBnC,EAAEmC,MA9BXC,EA8BkBpC,EAAEoC,KA9BdC,EA8BoBrC,EAAEqC,KA9BhBC,EA8BsBtC,EAAEsC,MA9BjBC,EA8BwBvC,EAAEuC,MA9BnBC,EA8B0BxC,EAAEwC,KA7BtFnM,KAAKC,MAAMuN,GAAmB5B,GAAM4B,GAAmBrB,GAC1DmB,GAAmBvB,GAAMuB,GAAmBtB,GAC5C0B,GAAkB5B,GAAO4B,GAAkBzB,GAC3C2B,GAAkB/B,GAAO+B,GAAkB1B,KA2B3CI,IAAK3C,EAAEkC,MAAMlC,EAAEuC,MACfK,IAAK5C,EAAEmC,MAAMnC,EAAEsC,MACfO,KAAM7C,EAAEoC,KAAKpC,EAAEqC,KACfS,KAAM9C,EAAEiC,KAAKjC,EAAEwC,MAEZxC,CACX,CAEA,SAASqE,GAAY1J,EAAOmF,EAAQC,GAMhC,OAJKlI,EAAa8C,KACdA,EAAMoI,GAGFjD,GACJ,IAAK,QACD,OAAOiD,EAEX,IAAK,cAED,OADAhD,EAAQqE,GAAYD,GAAkBpE,IAC/B,IAAIpF,EAAOqI,QAASjD,GAE/B,IAAK,cAED,OADAA,EAAQqE,GAAYD,GAAkBpE,IAC/B,IAAIpF,EAAOsI,QAASlD,GAE/B,IAAK,MAGD,OAFAA,EAAQiD,QAAQoB,GAAYD,GAAkBpE,EAAQiD,UACtDjD,EAAQkD,QAAQmB,GAAYD,GAAkBpE,EAAQkD,UAC/ClD,EAEX,QAEI,OADA/D,QAAQoE,MAAM,+BAAgCN,GACvCnF,EAEnB,CAEA,SAAS2J,KAAgC,IAAjBhE,EAAU3J,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,IAC/B,MAAO4N,GAAOhE,QAASiE,IAAiBhE,YAAiB,YAAa6D,GAAatB,EAAWtC,aAAcH,GAE5G,MAAO,CAACiE,EAAMC,EAClB,CCpKA,SAASC,KACL,IAAIC,EAAY,EAChB,IACI,IAAK,IAAI9M,EAAE,EAAEA,EAAE6I,aAAa7J,OAAOgB,IAAI,CACnC,MAAMgD,EAAM6F,aAAa7F,IAAIhD,GAC7B8M,GAAa9J,EAAIhE,OAAO6J,aAAakE,QAAQ/J,GAAKhE,MACtD,CACJ,CAAE,MAAO8I,GACT,CACA,OAAOgF,CACX,CC9BA,SAASE,KACL,IAAIC,EAAiB,EACrB,IACI,IAAK,IAAIjN,EAAI,EAAGA,EAAI6I,aAAa7J,OAAQgB,IAAI,CACzC,MAAMgD,EAAI6F,aAAa7F,IAAIhD,GAC3B,GAAIgD,EAAI6D,OAAOqG,cAAcC,WAAW,SAAS,CAE7CF,GADWpE,aAAakE,QAAQ/J,GAAKhE,OAAOgE,EAAIhE,MAEpD,CACJ,CACJ,CAAE,MAAO8I,GACT,CACA,OAAOmF,CACX,CAEe,SAASG,KAEpB,MAAO3M,EAAUC,GAAoB+H,EAAmB,IACjDhD,EAAOC,GAAiBkE,EAAgB,IACxC+C,EAAMC,GAAgBF,GAAe,IAErCO,EAAgBI,GAAqBxH,mBAAS,IAC9CyH,EAAWC,GAAgB1H,mBAAS,IACpC2H,EAAkBC,GAAuB5H,oBAAS,GAgBzD,OAdA6H,qBAAW,KACPC,cACAN,EAAkBL,MAClBO,EAAaV,MAEb,MAAMe,EAAiBA,KACnBP,EAAkBL,MAClBO,EAAaV,KAAe,EAIhC,OADAgB,OAAOC,iBAAiB,UAAWF,GAC5B,IAAIC,OAAOE,oBAAoB,UAAWH,EAAe,GACjE,CAACnI,EAAOhF,EAAUkM,IAGjBxP,cAAAyD,WAAA,CAAAlD,SACQiD,eAACqN,IAAO,CAACC,WAAS,EAAAvQ,SAAA,CACdP,cAAC0D,IAAM,CAACU,GAAG,KAAKT,UAAU,SAAQpD,SAAC,kBAEnCP,cAAC+Q,IAAQ,CACLzM,MAAOwL,EACPkB,MAAOb,EACPc,SAAS,UACTC,UAAW,EACXC,MAAO,gBAAgB7P,KAAK8P,KAAKtB,EAAe,MAAM,SAASxO,KAAK8P,KAAKjB,EAAU,MAAM,QAE7FnQ,cAACmH,EAAiB,CACdvG,MAAM,gBACN2G,QAAQ,uEACRF,KAAMA,IAAIiJ,GAAoB,GAC9BlJ,MAAOA,KACHqI,EAAa,SACblH,EAAc,SACdhF,EAAiB,SACjB+M,GAAoB,EAAM,EAE9BhJ,OAAQ+I,IAEZrQ,cAAC8H,IAAM,CAAC4C,UAAQ,EAAC5J,QAASA,IAAIwP,GAAoB,GAAM/P,SAAC,+BAI7E,CC7EA,MAAM2C,GAAW,CAAC/C,MAAM,CAACgD,YAAY,MAAOC,aAAa,QAE1C,SAASiO,GAAc1R,GAAkB,IAAjB,KAAC6P,EAAI,QAAE8B,GAAQ3R,EAClD,OAAO6D,eAAAC,WAAA,CAAAlD,SAAA,CACHiD,eAACI,IAAK,CAAC2N,SAAO,EAAC7J,KAAK,QAAQ7D,aAAW,EAAC1D,MAAO,CAAC2D,SAAS,SAASvD,SAAA,CAC9DP,cAAC4D,IAAMF,OAAM,CAAAnD,SACTiD,eAACI,IAAMG,IAAG,CAAAxD,SAAA,CACNP,cAAC4D,IAAMI,WAAU,CAAAzD,SAAC,eAClBP,cAAC4D,IAAMI,WAAU,CAAAzD,SAAC,gBAG1BP,cAAC4D,IAAMK,KAAI,CAAA1D,SACPiD,eAACI,IAAMG,IAAG,CAAAxD,SAAA,CACNP,cAAC4D,IAAMM,KAAI,CAAA3D,SACPP,cAACmE,IAAU,CAACC,GAAIC,IAChBC,MAAOkL,EAAKhK,SAASkI,UACrBlJ,SAAWC,IACP,MAAM+M,EAAiB/M,EACvBA,EAAEvD,OAAOuD,GACT,MAAMgN,EAAQnQ,KAAKoQ,IAAI,EAAGpQ,KAAKqQ,IAAI,MAAOlN,IAC1CA,GAAI,MACJ,MAAMqJ,EAAOxM,KAAKoQ,IAAI,EAAGpQ,KAAKqQ,IAAI,MAAOlN,IACzCA,GAAI,MACJ,MAAMsJ,EAAMzM,KAAKoQ,IAAI,EAAGpQ,KAAKqQ,IAAI,MAAOlN,IAExC,IAAImN,EAAUtQ,KAAKoQ,IAAI,EAAGD,EAAM,EAAE,KAC9BI,EAASvQ,KAAKoQ,IAAI,EAAGD,EAAM,EAAE,KAC7BD,EAAiB,MACjBI,EAAUH,EAAM,EAChBI,EAASJ,EAAM,GAEnBH,EAAQ,CACJnE,MAAOyE,EAAU,EACjBxE,MAAOyE,EAAS,EAChBtE,MAAOsE,EAAS,EAChBrE,MAAOoE,EAAU,EACjBvE,KAAMS,EAAK,EACXR,KAAMQ,EAAK,EACXZ,KAAMa,EAAK,EACXN,KAAMM,EAAK,GACb,EACHrJ,OAAK,EAAEC,KAAK,SAAS/D,MAAM,aAAagE,MAAO1B,OAEtDlD,cAAC4D,IAAMM,KAAI,CAAA3D,SAAEiP,EAAKhK,SAASmI,sBAIvCnK,eAACI,IAAK,CAAC2N,SAAO,EAAC7J,KAAK,QAAQ7D,aAAW,EAAC1D,MAAO,CAAC2D,SAAU,SAASvD,SAAA,CAC/DP,cAAC4D,IAAMF,OAAM,CAAAnD,SACTiD,eAACI,IAAMG,IAAG,CAAAxD,SAAA,CACNP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,QACrCP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,QACrCP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,SACrCP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,cAG7CP,cAAC4D,IAAMK,KAAI,CAAC9D,MAAO,CAAC2R,aAAc,GAAGvR,SACjCiD,eAACI,IAAMG,IAAG,CAAAxD,SAAA,CACNP,cAAC4D,IAAMM,KAAI,CAAA3D,SACPP,cAACmE,IAAU,CAACC,GAAIC,IAAOC,MAAOkL,EAAKrC,MAAMqC,EAAKhC,MAAOhJ,SAAWC,IAC5DA,EAAEvD,OAAOuD,GACT6M,EAAQ,IAAI9B,EAAMrC,MAAO1I,EAAE,EAAG+I,MAAO/I,EAAE,GAAG,EAC3CC,OAAK,EAAEC,KAAK,SAAS/D,MAAM,YAAYgE,MAAO1B,OAErDlD,cAAC4D,IAAMM,KAAI,CAAA3D,SACPP,cAACmE,IAAU,CAACC,GAAIC,IAAOC,MAAOkL,EAAKpC,MAAMoC,EAAKjC,MAAO/I,SAAWC,IAC5DA,EAAEvD,OAAOuD,GACT6M,EAAQ,IAAI9B,EAAMpC,MAAO3I,EAAE,EAAG8I,MAAO9I,EAAE,GAAG,EAC3CC,OAAK,EAAEC,KAAK,SAAS/D,MAAM,WAAWgE,MAAO1B,OAEpDlD,cAAC4D,IAAMM,KAAI,CAAA3D,SACPP,cAACmE,IAAU,CAACC,GAAIC,IAAOC,MAAOkL,EAAKnC,KAAKmC,EAAKlC,KAAM9I,SAAWC,IAC1DA,EAAEvD,OAAOuD,GACT6M,EAAQ,IAAI9B,EAAMnC,KAAM5I,EAAE,EAAG6I,KAAM7I,EAAE,GAAG,EACzCC,OAAK,EAAEC,KAAK,SAAS/D,MAAM,aAAagE,MAAO1B,OAEtDlD,cAAC4D,IAAMM,KAAI,CAAA3D,SACPP,cAACmE,IAAU,CAACC,GAAIC,IAAOC,MAAOkL,EAAKtC,KAAKsC,EAAK/B,KAAMjJ,SAAWC,IAC1DA,EAAEvD,OAAOuD,GACT6M,EAAQ,IAAI9B,EAAMtC,KAAMzI,EAAE,EAAGgJ,KAAMhJ,EAAE,GAAG,EACzCC,OAAK,EAAEC,KAAK,SAAS/D,MAAM,YAAYgE,MAAO1B,eAKjEM,eAACI,IAAK,CAAC2N,SAAO,EAAE7J,KAAK,QAAS7D,aAAW,EAAC1D,MAAO,CAAC2D,SAAU,SAASvD,SAAA,CACjEP,cAAC4D,IAAMF,OAAM,CAAAnD,SACTiD,eAACI,IAAMG,IAAG,CAAAxD,SAAA,CACNP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,UACrCP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,WACrCP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,WACrCP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,eAG7CP,cAAC4D,IAAMK,KAAI,CAAA1D,SACPiD,eAACI,IAAMG,IAAG,CAAAxD,SAAA,CACNP,cAAC4D,IAAMM,KAAI,CAAA3D,SACPP,cAACmE,IAAU,CAACC,GAAIC,IAAOC,MAAOkL,EAAKtC,KAAM1I,SAAWC,IAChD6M,EAAQ,IAAI9B,EAAMtC,KAAMzI,GAAG,EAC5BC,OAAK,EAAEC,KAAK,SAAS/D,MAAM,QAAQgE,MAAO1B,OAEjDlD,cAAC4D,IAAMM,KAAI,CAAA3D,SACPP,cAACmE,IAAU,CAACC,GAAIC,IAAOC,MAAOkL,EAAKrC,MAAO3I,SAAWC,IACjD6M,EAAQ,IAAI9B,EAAMrC,MAAO1I,GAAG,EAC7BC,OAAK,EAAEC,KAAK,SAAS/D,MAAM,SAASgE,MAAO1B,OAElDlD,cAAC4D,IAAMM,KAAI,CAAA3D,SACPP,cAACmE,IAAU,CAACC,GAAIC,IAAOC,MAAOkL,EAAKpC,MAAO5I,SAAWC,IACjD6M,EAAQ,IAAI9B,EAAMpC,MAAO3I,GAAG,EAC7BC,OAAK,EAAEC,KAAK,SAAS/D,MAAM,SAASgE,MAAO1B,OAElDlD,cAAC4D,IAAMM,KAAI,CAAA3D,SACPP,cAACmE,IAAU,CAACC,GAAIC,IAAOC,MAAOkL,EAAKnC,KAAM7I,SAAWC,IAChD6M,EAAQ,IAAI9B,EAAMnC,KAAM5I,GAAG,EAC5BC,OAAK,EAAEC,KAAK,SAAS/D,MAAM,QAAQgE,MAAO1B,YAIzDlD,cAAC4D,IAAMF,OAAM,CAAAnD,SACTiD,eAACI,IAAMG,IAAG,CAAAxD,SAAA,CACNP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,UACrCP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,WACrCP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,WACrCP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,eAG7CP,cAAC4D,IAAMK,KAAI,CAAA1D,SACPiD,eAACI,IAAMG,IAAG,CAAAxD,SAAA,CACNP,cAAC4D,IAAMM,KAAI,CAAA3D,SACPP,cAACmE,IAAU,CAACC,GAAIC,IAAOC,MAAOkL,EAAKlC,KAAM9I,SAAWC,IAChD6M,EAAQ,IAAI9B,EAAMlC,KAAM7I,GAAG,EAC5BC,OAAK,EAAEC,KAAK,SAAS/D,MAAM,QAAQgE,MAAO1B,OAEjDlD,cAAC4D,IAAMM,KAAI,CAAA3D,SACPP,cAACmE,IAAU,CAACC,GAAIC,IAAOC,MAAOkL,EAAKjC,MAAO/I,SAAWC,IACjD6M,EAAQ,IAAI9B,EAAMjC,MAAO9I,GAAG,EAC7BC,OAAK,EAAEC,KAAK,SAAS/D,MAAM,SAASgE,MAAO1B,OAElDlD,cAAC4D,IAAMM,KAAI,CAAA3D,SACPP,cAACmE,IAAU,CAACC,GAAIC,IAAOC,MAAOkL,EAAKhC,MAAOhJ,SAAWC,IACjD6M,EAAQ,IAAI9B,EAAMhC,MAAO/I,GAAG,EAC7BC,OAAK,EAAEC,KAAK,SAAS/D,MAAM,SAASgE,MAAO1B,OAElDlD,cAAC4D,IAAMM,KAAI,CAAA3D,SACPP,cAACmE,IAAU,CAACC,GAAIC,IAAOC,MAAOkL,EAAK/B,KAAMjJ,SAAWC,IAChD6M,EAAQ,IAAI9B,EAAM/B,KAAMhJ,GAAG,EAC5BC,OAAK,EAAEC,KAAK,SAAS/D,MAAM,QAAQgE,MAAO1B,iBAMrE,CCrJe,SAAS6O,GAAIpS,GAAuB,IAAtB,KAAC6P,EAAI,aAAEC,GAAa9P,EAC7C,OACI6D,eAAAC,WAAA,CAAAlD,SAAA,CACIP,cAAC0D,IAAM,CAACC,UAAU,SAAQpD,SAAC,iBAG3BP,cAACqR,GAAc,CAAC7B,KAAMA,EAAKvB,QAASqD,QAAUU,IAC1CvC,EAAa,cAAeuC,EAAQ,IAGxChS,cAAC0D,IAAM,CAACC,UAAU,SAAQpD,SAAC,iBAG3BP,cAACqR,GAAc,CAAC7B,KAAMA,EAAKtB,QAASoD,QAAUU,IAC1CvC,EAAa,cAAeuC,EAAQ,MAIpD,CCtBA,SAASC,GAAoBrM,EAAOmF,EAAQC,GACxC,MAAO,CAACjL,KAAMgL,KAAWC,EAC7B,C,aCDA,SAASkH,KAAkB,IAAD,IAAAlJ,EAAApH,UAAAC,OAALsQ,EAAI,IAAAnP,MAAAgG,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAJkJ,EAAIlJ,GAAArH,UAAAqH,GACxB,IAAK,MAAM7G,KAAK+P,EACf,GAAQ,OAAJ/P,QAAgBN,IAAJM,EAAe,OAAO,EAEvC,OAAO,CACR,CAEA,SAASD,GAAcC,EAAGC,GAA2B,IAAxB+P,EAAcxQ,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,KAC3C,OAAIsQ,GAAS9P,EAAEC,IAEXf,KAAKiB,IAAIH,EAAEC,IAAI+P,CAIpB,CAKA,MAAMC,GACLC,YAAYC,EAAEC,GACTD,aAAaF,IAChBI,KAAKF,EAAIA,EAAEA,EACXE,KAAKD,EAAID,EAAEC,IAEXC,KAAKF,EAAIL,GAASK,GAAK,EAAIA,EAC3BE,KAAKD,EAAIN,GAASM,GAAK,EAAIA,EAE7B,CAEAE,OACC,MAAMC,EAAMF,KAAKF,EACjBE,KAAKF,EAAEE,KAAKD,EACZC,KAAKD,EAAEG,CACR,CAEAC,SAASC,GACR,MAAMC,EAAQxR,KAAKiB,IAAIsQ,EAAWN,EAAIE,KAAKF,GACrCQ,EAAQzR,KAAKiB,IAAIsQ,EAAWL,EAAIC,KAAKD,GAC3C,OAAOlR,KAAK0R,KAAKF,EAAMA,EAAQC,EAAMA,EACtC,EAGD,MAAME,GACLX,YAAYY,GAAyB,IAAZ5O,EAAK1C,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,KAC1BsR,aAAuBD,IAC1BR,KAAKU,OAAOD,EAAYC,OAAO3S,KAAK4S,GAAiB,IAAIf,GAAMe,KAC/DX,KAAKnO,MAAM4O,EAAY5O,QAEvBmO,KAAKU,OAAOD,EAAY1S,KAAK4S,GAAiB,IAAIf,GAAMe,KACxDX,KAAKnO,MAAMA,EAEb,CAEA+O,aACC,IAAK,MAAMD,KAASX,KAAKU,OACxBC,EAAMV,MAER,CAEAY,SAASC,GACR,GAAId,KAAKU,OAAOtR,OAAS,EACxB,OAAO,EAGR,GAAIM,GAAeoR,EAAed,KAAKU,OAAO,GAAGX,EAAIC,KAAKU,OAAO,GAAGZ,EAAKgB,EAAed,KAAKU,OAAO,GAAGX,EAAIC,KAAKU,OAAO,GAAGZ,GACzH,OAAO,EAGR,IAAIiB,EAASD,EAAed,KAAKU,OAAO,GAAGX,EAAIC,KAAKU,OAAO,GAAGZ,EAC1DkB,GAAWF,EAAed,KAAKU,OAAO,GAAGX,EAAIC,KAAKU,OAAO,GAAGZ,GAAKiB,EAErE,IAAK,IAAI3Q,EAAI,EAAGA,EAAI4P,KAAKU,OAAOtR,OAAQgB,IAAK,CAC5C,GAAI4Q,GACH,IAAKF,EAAed,KAAKU,OAAOtQ,GAAG2P,EAAIC,KAAKU,OAAOtQ,GAAG0P,IAAMiB,EAC3D,OAAO,OAGR,IAAKD,EAAed,KAAKU,OAAOtQ,GAAG2P,EAAIC,KAAKU,OAAOtQ,GAAG0P,IAAMiB,EAC3D,OAAO,EAGTA,EAASD,EAAed,KAAKU,OAAOtQ,GAAG2P,EAAIC,KAAKU,OAAOtQ,GAAG0P,CAC3D,CACA,OAAO,CACR,CAGAmB,YAAYnB,GACX,GAAIE,KAAKU,OAAOtR,OAAS,IAA4B,IAAvB4Q,KAAKa,UAAS,GAC3C,OAAO,KAGR,MAAMK,EAAQlB,KAAKU,OAAO,GAAGZ,EACvBqB,EAASnB,KAAKU,OAAOV,KAAKU,OAAOtR,OAAO,GAAG0Q,EAGjD,GAAKoB,EAAMC,GAAUrB,EAAEoB,GAAWC,EAAOD,GAASpB,EAAEoB,EACnD,OAAO,IAAI9C,GAAQ4B,KAAKU,OAAO,GAAIV,KAAKU,OAAO,IACzC,GAAKQ,EAAMC,GAAUrB,EAAEqB,GAAYA,EAAOD,GAASpB,EAAEqB,EAC3D,OAAO,IAAI/C,GAAQ4B,KAAKU,OAAOV,KAAKU,OAAOtR,OAAS,GAAG4Q,KAAKU,OAAOV,KAAKU,OAAOtR,OAAS,IAGzF,IAAK,IAAIgB,EAAI,EAAGA,EAAI4P,KAAKU,OAAOtR,OAAO,EAAGgB,IACzC,GAAK0P,GAAKE,KAAKU,OAAOtQ,GAAG0P,GAAOA,GAAKE,KAAKU,OAAOtQ,EAAI,GAAG0P,GAAOA,GAAKE,KAAKU,OAAOtQ,GAAG0P,GAAOA,GAAKE,KAAKU,OAAOtQ,EAAI,GAAG0P,EACjH,OAAO,IAAI1B,GAAQ4B,KAAKU,OAAOtQ,GAAI4P,KAAKU,OAAOtQ,EAAI,IAIrD,OAAO,IACR,EAID,MAAMgR,GACLvB,YAAYwB,EAAQC,GACfD,aAAkBD,IACrBpB,KAAKqB,OAAO,IAAIzB,GAAMyB,EAAOA,QAC7BrB,KAAKsB,OAAO,IAAI1B,GAAMyB,EAAOC,UAE7BtB,KAAKqB,OAAO,IAAIzB,GAAMyB,GACtBrB,KAAKsB,OAAO,IAAI1B,GAAM0B,GAExB,CAEAC,cAAarU,GAAmC,IAAjC4S,EAAE0B,EAAIzB,EAAG0B,GAAGvU,EAAEuI,EAAOtG,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,QAACE,EACpC,QAAcA,IAAVoG,EACH,OAAS+L,GAAMxB,KAAKqB,OAAOvB,GAAK0B,GAAMxB,KAAKsB,OAAOxB,GAAO0B,GAAMxB,KAAKsB,OAAOxB,GAAK0B,GAAMxB,KAAKqB,OAAOvB,KAChG2B,GAAMzB,KAAKqB,OAAOtB,GAAK0B,GAAMzB,KAAKsB,OAAOvB,GAAO0B,GAAMzB,KAAKsB,OAAOvB,GAAK0B,GAAMzB,KAAKqB,OAAOtB,GACvF,CACJ,MAAMpQ,EAAE,IAAIiQ,GAAMI,KAAKqB,QACjBzR,EAAE,IAAIgQ,GAAMI,KAAKsB,QAcvB,OAZI3R,EAAEmQ,EAAElQ,EAAEkQ,GACTnQ,EAAEmQ,GAAGrK,EAAS7F,EAAEkQ,GAAGrK,IAEnB9F,EAAEmQ,GAAGrK,EAAS7F,EAAEkQ,GAAGrK,GAEhB9F,EAAEoQ,EAAEnQ,EAAEmQ,GACTpQ,EAAEoQ,GAAGtK,EAAS7F,EAAEmQ,GAAGtK,IAEnB9F,EAAEoQ,GAAGtK,EAAS7F,EAAEmQ,GAAGtK,GAGL,IAAI2L,GAAKzR,EAAGC,GACT2R,cAAc,IAAI3B,GAAM4B,EAAGC,GAC9C,CACD,EAID,MAAMrD,GACLyB,YAAYwB,EAAQC,GACfD,aAAkBjD,IACrB4B,KAAKqB,OAAO,IAAIzB,GAAMyB,EAAOA,QAC7BrB,KAAKsB,OAAO,IAAI1B,GAAMyB,EAAOC,UAE7BtB,KAAKqB,OAAO,IAAIzB,GAAMyB,GACtBrB,KAAKsB,OAAO,IAAI1B,GAAM0B,GAExB,CAEAI,UAAUC,GACT3B,KAAKqB,OAAS,IAAIzB,GAAM+B,EACzB,CACAC,UAAUD,GACT3B,KAAKsB,OAAS,IAAI1B,GAAM+B,EACzB,CAIA,iCAAOE,CAA2BC,EAAMC,EAAMC,GAC7C,MAAMC,EAAG,IAAIrC,GAAM,EAAE,GACfsC,GAAKH,EAAKT,OAAOvB,EAAIgC,EAAKV,OAAOtB,IAAI+B,EAAKR,OAAOxB,EAAIgC,EAAKT,OAAOvB,IAAMiC,EAAKT,OAAOxB,EAAIiC,EAAKV,OAAOvB,IAAIgC,EAAKR,OAAOvB,EAAI+B,EAAKT,OAAOtB,GACzI,GAAIlR,KAAKiB,IAAIoS,IAAI,KAAS,CACzB,MAAMC,IAAOJ,EAAKT,OAAOxB,EAAIiC,EAAKV,OAAOvB,IAAIgC,EAAKT,OAAOtB,EAAIgC,EAAKV,OAAOtB,IAAMgC,EAAKT,OAAOvB,EAAIgC,EAAKV,OAAOtB,IAAI+B,EAAKT,OAAOvB,EAAIiC,EAAKV,OAAOvB,IAAMoC,EAIjJ,GAHAD,EAAGnC,EAAIgC,EAAKT,OAAOvB,EAAIqC,GAAML,EAAKR,OAAOxB,EAAIgC,EAAKT,OAAOvB,GACzDmC,EAAGlC,EAAI+B,EAAKT,OAAOtB,EAAIoC,GAAML,EAAKR,OAAOvB,EAAI+B,EAAKT,OAAOtB,GAErDiC,EAAmB,CACtB,MAAMI,EAAQ,IAAIhB,GAAKU,EAAKT,OAAQS,EAAKR,QACnCe,EAAQ,IAAIjB,GAAKW,EAAKV,OAAQU,EAAKT,QACzC,IAAMc,EAAMb,cAAcU,KAAOI,EAAMd,cAAcU,GACpD,OAAO,IAET,CACA,OAAOA,CACR,CACA,OAAO,IACR,CAGAK,uBAAuBC,EAAUP,GAChC,OAAO5D,GAAQyD,2BAA2B7B,KAAMuC,EAAUP,EAC3D,CAGA,0BAAOQ,CAAoBV,EAAMW,GAChC,MAAMV,EAAO,IAAI3D,GAAQ,IAAIwB,GAAM6C,GAAQ,KAAM,IAAI7C,GAAM6C,EAAO,MAC5DC,EAAetE,GAAQyD,2BAA2BC,EAAMC,GAAM,GACpE,OAAoB,MAAhBW,EACIA,EAAa3C,EAEd,IACR,CAGA4C,gBAAgBF,GACf,OAAOrE,GAAQoE,oBAAoBxC,KAAMyC,EAC1C,EAID,MAAMG,GACL/C,cAA4D,IAAhD3R,EAAIiB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,GAAI+C,EAAI/C,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,cAAe0T,EAAY1T,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,KACrD6Q,KAAK9R,KAAKA,EACV8R,KAAK9N,KAAKA,EACV8N,KAAKnO,MAAMgR,CACZ,CAEAC,KAAKC,EAAkBC,EAAaC,GAAc,EAInD,MAAMC,WAAoBN,GACzB/C,cAAkF,IAA7DiB,EAAY3R,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GAAQgU,EAAUhU,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,KAAMiU,EAAOjU,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,KACjEkU,MADelU,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,GACJ,SAAU,MAEtB6Q,KAAKc,aAAaA,EAElBd,KAAKmD,WAAWA,EAChBnD,KAAKoD,QAAQA,EAAQ,QAAAE,EAAAnU,UAAAC,OANqDmU,EAAK,IAAAhT,MAAA+S,EAAA,EAAAA,EAAA,KAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAALD,EAAKC,EAAA,GAAArU,UAAAqU,GAQ3EjT,MAAMC,QAAQ+S,IACjBvD,KAAKuD,MAAMA,EAAMxV,KAAK0V,GAAgB,IAAIjD,GAAKiD,KAC3C3C,GACHd,KAAKuD,MAAMzM,SAAS2M,IAASA,EAAK7C,YAAY,KAG/CZ,KAAKuD,MAAM,EAEb,CAEAT,KAAKC,EAAkBC,EAAaC,GAC/BxD,GAASO,KAAKmD,WAAYnD,KAAKoD,SAClCpD,KAAKnO,MAAM,KAEXmO,KAAKnO,MAAQmO,KAAK0D,YAAY1D,KAAKmD,WAAWtR,MAAOmO,KAAKoD,QAAQvR,MAEpE,CAEA6R,YAAYC,EAAQC,GAAK,IAADC,EAAAC,EACvB,GAAIrE,GAASkE,EAAOC,GAAM,OAAO,KACjC,IAAIG,EAAU,KACVC,EAAU,KACVC,GAAa,EAEjB,IAAK,IAAIC,KAAelE,KAAKuD,MAAM,CAClC,GAAI7T,GAAcwU,EAAYrS,MAAO+R,GAAK,CACzCG,EAAUG,EACVF,EAAUE,EACVD,GAAa,EACb,KACD,CACIC,EAAYrS,MAAQ+R,IACnBG,EACCA,EAAUlS,MAAQqS,EAAYrS,QAAOkS,EAAUG,GAEnDH,EAAUG,GAGRA,EAAYrS,MAAQ+R,IACnBI,EACCA,EAAUnS,MAAQqS,EAAYrS,QAAOmS,EAAUE,GAEnDF,EAAUE,EAGb,CACA,GAAIzE,GAASuE,EAAWD,GAAY,OAAO,KAE3C,IAAII,EAA2C,QAA9BN,EAACG,EAAU/C,YAAY0C,UAAO,IAAAE,OAAA,EAA7BA,EAA+BlB,gBAAgBgB,GACjE,GAAIM,EAAc,OAAOE,EAEzB,IAAIC,EAA2C,QAA9BN,EAACC,EAAU9C,YAAY0C,UAAO,IAAAG,OAAA,EAA7BA,EAA+BnB,gBAAgBgB,GAEjE,OAAIlE,GAAS0E,EAAeC,GAAuB,MAE1CR,EAAMG,EAAUlS,QAAUmS,EAAUnS,MAAQkS,EAAUlS,QAASsS,EAAgBC,GAAiBA,CAC1G,EAiID,MAAMC,WAAkBzB,GACvB/C,cAA+D,IAA1CyE,EAASnV,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,KAAMoV,EAASpV,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,KAC9CkU,MADelU,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,GACJ,OAAQ,MAEpB6Q,KAAKsE,UAAUA,EACftE,KAAKuE,UAAUA,EAAU,QAAAC,EAAArV,UAAAC,OAJ8BmU,EAAK,IAAAhT,MAAAiU,EAAA,EAAAA,EAAA,KAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAALlB,EAAKkB,EAAA,GAAAtV,UAAAsV,GAMxDlU,MAAMC,QAAQ+S,GACjBvD,KAAKuD,MAAMA,EAAMxV,KAAK0V,GAAgB,IAAIjD,GAAKiD,KAE/CzD,KAAKuD,MAAM,EAEb,CAEAT,KAAKC,EAAkBC,EAAaC,GAC/BxD,GAASO,KAAKsE,UAAWtE,KAAKuE,WACjCvE,KAAKnO,MAAM,KAEXmO,KAAKnO,MAAMmO,KAAK0E,WAAW1E,KAAKsE,UAAUzS,MAAOmO,KAAKuE,UAAU1S,MAElE,CAEA6S,WAAWC,EAAKC,GACf,GAAInF,GAASkF,EAAKC,GAAM,OAAO,KAE/B,IAAIC,EAAK,EACLC,EAAK,EACT,IAAK,IAAIZ,KAAelE,KAAKuD,MAC5B,IAAK,IAAIwB,KAAgBb,EAAYxD,OAChCqE,EAAajF,EAAEgF,IAAMA,EAAKC,EAAajF,GACvCiF,EAAajF,EAAE+E,IAAMA,EAAKE,EAAajF,GAI7C,IAAIkF,EAAW,IAAI5G,GAAQ,IAAIwB,GAAMiF,EAAK,EAAGD,GAAM,IAAIhF,GAAMkF,EAAK,EAAEF,IAChEK,EAAS,IAAI7G,GAEjB,IAAK,IAAI8F,KAAelE,KAAKuD,MAAO,CACnC,IAAI2B,EAAoB,EAExB,GAAIhB,EAAYxD,OAAOtR,OAAS,EAAG,CAClC,IAAK,IAAIgB,EAAI,EAAGA,EAAI8T,EAAYxD,OAAOtR,OAAQgB,IAAK,CAAC,IAAD+U,EACnDF,EAAOvD,UAAUwC,EAAYxD,OAAOtQ,IAChCA,IAAM8T,EAAYxD,OAAOtR,OAAS,EACrC6V,EAAOrD,UAAUsC,EAAYxD,OAAO,IAEpCuE,EAAOrD,UAAUsC,EAAYxD,OAAOtQ,EAAE,KAGU,QAA7C+U,EAAAF,EAAO3C,uBAAuB0C,GAAU,UAAK,IAAAG,OAAA,EAA7CA,EAA+CrF,IAAK6E,GACvDO,GAEF,CAEA,GAAIA,EAAoB,GAAKA,EAAkB,EAAI,EAClD,OAAOhB,EAAYrS,KAErB,CACD,CACA,OAAO,IACR,EA0ED,MAAMuT,WAAsBxC,GAC3B/C,cACCwD,MADelU,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,GACJ,WADaA,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,EAE3B,EAGD,MAAMkW,GACLxF,YAAYkD,EAAkBC,EAAaC,GAAc,KAMzDqC,UAAY,CAACpX,EAAMgE,KAClB,GAAW,OAAPhE,GAAsB,OAAPgE,EAAa,OAAO,KACvC,IAAK,MAAM5B,KAAO0P,KAAK+C,iBACtB,GAAIzS,EAAIpC,OAAOA,GAAQoC,EAAI4B,OAAOA,EACjC,OAAO5B,EAGT,OAAO,IAAI,EACX,KAEDiV,OAAUC,IACT,MAAMC,EAAED,IACF1F,EAAE0F,IACFE,EAAUF,IAEVG,EAAM3F,KAAKsF,UAAUI,EAAU7T,MAAO,UAE5C,OAAa,MAAT4T,EAAE5T,OAAwB,MAATiO,EAAEjO,OAAsB,MAAP8T,EAAoB,IAAIC,KAAU,KAAM,MAAM,GAE7E,IAAIA,KAAU,KAAMD,EAAMjC,YAAY5D,EAAEjO,MAAO4T,EAAE5T,QAAQ,EAAM,EACtE,KACDgU,MAASL,IACR,MAAM3T,EAAM2T,IACN1F,EAAE0F,IACFE,EAAUF,IAEVG,EAAM3F,KAAKsF,UAAUI,EAAU7T,MAAO,SAE5C,OAAiB,MAAbA,EAAMA,OAAwB,MAATiO,EAAEjO,OAAsB,MAAP8T,EAAoB,IAAIC,KAAU,KAAM,MAAM,GAEjF,IAAIA,KAAU,KAAMD,EAAMG,YAAYhG,EAAEjO,MAAOA,EAAMA,QAAQ,EAAM,EAC1E,KACDkU,KAAQP,IACP,MAAMzF,EAAEyF,IACF1F,EAAE0F,IACFE,EAAUF,IAEVG,EAAM3F,KAAKsF,UAAUI,EAAU7T,MAAO,QAE5C,OAAa,MAATkO,EAAElO,OAAwB,MAATiO,EAAEjO,OAAsB,MAAP8T,EAAoB,IAAIC,KAAU,KAAM,MAAM,GAE7E,IAAIA,KAAU,KAAMD,EAAMjB,WAAW5E,EAAEjO,MAAOkO,EAAElO,QAAQ,EAAM,EACrE,KACDmU,MAASR,IACR,MAAMS,EAAKT,IACLU,EAAMV,IACN3T,EAAM2T,IACNE,EAAUF,IAEVG,EAAM3F,KAAKsF,UAAUI,EAAU7T,MAAO,SAE5C,OAAgB,MAAZoU,EAAKpU,OAA4B,MAAbqU,EAAMrU,OAA4B,MAAbA,EAAMA,OAAsB,MAAP8T,EAAoB,IAAIC,KAAU,KAAM,MAAM,GAEzG,IAAIA,KAAU,KAAMD,EAAMQ,YAAYtU,EAAMA,MAAOqU,EAAMrU,MAAOoU,EAAKpU,QAAQ,EAAM,EAE1F,KACDuU,MAASZ,IACRxF,KAAKgD,YAAYqD,KAAKb,IAAQ3T,OACvB,IAAIyU,KAAQ,KAAM,MAAM,IAC/B,KAEDC,OAAUf,IACTxF,KAAKiD,aAAaoD,KAAKb,IAAQ3T,OACxB,IAAIyU,KAAQ,KAAM,MAAM,IAC/B,KAEDE,gBAAmBC,IAClB,MAAMC,EAAQ,CACbC,KAAYC,QAAQ,YAAa5G,KAAKuF,OAAQ,SAAU,SAAU,SAAU,UAC5EoB,KAAYC,QAAQ,WAAY5G,KAAK6F,MAAO,SAAU,SAAU,SAAU,UAC1Ec,KAAYC,QAAQ,UAAW5G,KAAK+F,KAAM,SAAU,SAAU,SAAU,UACxEY,KAAYC,QAAQ,WAAY5G,KAAKgG,MAAO,SAAU,SAAU,SAAU,SAAU,UACpFW,KAAYC,QAAQ,QAAS5G,KAAKoG,MAAO,OAAQ,UACjDO,KAAYC,QAAQ,SAAU5G,KAAKuG,OAAQ,OAAQ,WAGpD,GAAIvG,KAAK+C,iBAAiB,CACzB,IAAK,MAAMzS,KAAO0P,KAAK+C,iBACP,aAAXzS,EAAI4B,MACPwU,EAAQL,KAAK,IAAIT,KAAUtV,EAAIpC,KAAMoC,EAAIuB,OAAO,IAGlD,GAAI4U,GAA0B,UAAfA,EAAQvU,KAAe,CACrC,IAAK,MAAM5B,KAAO0P,KAAK+C,iBACP,UAAXzS,EAAI4B,MACPwU,EAAQL,KAAK,IAAIT,KAAUtV,EAAIpC,KAAMoC,EAAIuB,OAAO,IAIlD,IAAK,MAAMvB,KAAO0P,KAAK+C,iBAAiB,CACvC,GAAIzS,EAAIpC,OAAOuY,EAAQvY,KAAM,MACd,UAAXoC,EAAI4B,MAA6B,aAAX5B,EAAI4B,MAC7BwU,EAAQL,KAAK,IAAIT,KAAUtV,EAAIpC,KAAMoC,EAAIuB,OAAO,GAElD,CACD,CACD,CAEA,OAAO6U,CAAO,EAvGd1G,KAAK+C,iBAAiBA,EACtB/C,KAAKgD,YAAYA,EACjBhD,KAAKiD,aAAaA,CACnB,EAwGD,MAAM4D,WAAmBjE,GACxB/C,cAAmD,IAA9BiH,EAAM3X,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,GAAI0T,EAAY1T,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,KAC5CkU,MADelU,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,GACJ,QAAS,MACrB6Q,KAAK8G,OAAOA,EACZ9G,KAAK+G,SAAQ,EACb/G,KAAK7N,MAAM0Q,CACZ,CAEAC,KAAKC,EAAkBC,EAAaC,GACnC,MAAM+D,EAAc,IAAIL,KAGlBD,EAFgB,IAAIrB,GAActC,EAAkBC,EAAaC,GAE3CuD,gBAAgBxG,MACtCyG,EAAU,IAAIQ,KAAU,QAASjH,KAAK7N,OAAO,GACnDuU,EAAQL,KAAKI,GACb,MAAMS,EAAa,IAAIZ,KAAQ,WAAW,GAAO,GACjDI,EAAQL,KAAKa,GAEb,MAAMC,EAAOH,EAAYI,QAAQpH,KAAK8G,OAAQ,UAAU,GAAM,EAAOJ,GACjES,EAAOvO,OACVpE,QAAQ6S,IAAIrH,KAAK9R,KAAM,aAAaiZ,EAAOvO,MAAM0O,SACjDtE,EAAYqD,KAAK,iBAAiBrG,KAAK9R,KAAK,oBAAoBiZ,EAAOvO,OACvEoH,KAAK+G,SAAQ,EACb/G,KAAKnO,MAAM,OAEXmO,KAAK+G,QAAQQ,QAAQL,EAAWrV,OAChCmO,KAAKnO,MAAMsV,EAAOK,WAAW3V,MAE/B,EAGD,MAAM4V,WAAoB7E,GACzB/C,cAAgC,IAAXiH,EAAM3X,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,GAC3BkU,MADelU,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,GACJ,SAAU,MACtB6Q,KAAK8G,OAAOA,CACb,CAEAhE,KAAKC,EAAkBC,EAAaC,GACnC,MAAM+D,EAAc,IAAIL,KAClBe,EAAgB,IAAIrC,GAActC,EAAkBC,EAAaC,GACjEkE,EAAOH,EAAYI,QAAQpH,KAAK8G,OAAQ,UAAU,GAAM,EAAOY,EAAclB,gBAAgBxG,OAC/FmH,EAAOvO,OACVpE,QAAQ6S,IAAIrH,KAAK9R,KAAM,aAAaiZ,EAAOvO,MAAM0O,SACjDtE,EAAYqD,KAAK,mBAAmBrG,KAAK9R,KAAK,cAAciZ,EAAOvO,OACnEoH,KAAKnO,MAAM,MAEXmO,KAAKnO,MAAMsV,EAAOK,WAAW3V,KAE/B,ECpsBD,MAAM8V,GAAS,ICRA,MACd9H,cAAc,KAqBd+H,WAAW,KACV,MAAMC,EAAO,GACPC,EAAQ,GACd,IAAK,IAAIxX,KAAO0P,KAAK+H,UACL,UAAXzX,EAAI4B,MAAgB5B,EAAIwS,KAAK9C,KAAK+H,UAAWF,EAAQC,GAE1D,MAAO,CAACD,EAAQC,EAAQ,EACvB,KAEFhF,KAAK,KACJ,MAAM+E,EAAO,GACPC,EAAQ,GACd,IAAK,IAAIxX,KAAO0P,KAAK+H,UACpBzX,EAAIwS,KAAK9C,KAAK+H,UAAWF,EAAQC,GAElC,MAAO,CAACD,EAAQC,EAAQ,EAnCxB,MAAME,GAAE,EAEFC,EAAEjI,KACFkI,EAAEA,CAACpI,EAAEC,IAAY,IAAIH,GAAME,EAAEC,GAC7BoI,EAAE,SAACC,GAAiB,IAAD,IAAA7R,EAAApH,UAAAC,OAATsR,EAAM,IAAAnQ,MAAAgG,EAAA,EAAAA,EAAA,KAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAANkK,EAAMlK,EAAA,GAAArH,UAAAqH,GAAI,OAAO,IAAIgK,GAAKE,EAAO0H,EAAK,EACtDH,EAAEI,IAAI,IAAIjD,GAAc,OAAO,GAC/B6C,EAAEK,iBAAiB,IAAIzB,GAAW,kBAAkB,sBAAsB,SAC1EoB,EAAEM,YAAY,IAAI1B,GAAW,aAAa,sBAAsB,SAChEoB,EAAEO,aAAa,IAAI3B,GAAW,cAAc,sBAAsB,KAClEoB,EAAEQ,IAAI,IAAIhB,GAAY,cAAc,gDACpCQ,EAAES,IAAI,IAAIjB,GAAY,iBAAiB,qCACvCQ,EAAEU,uBAAuB,IAAIzF,GAAY,wBAAwB8E,EAAEC,EAAEQ,IAAIR,EAAEI,IAAIF,EAAE,EAAED,EAAE,OAAO,YAAYA,EAAE,OAAO,YAAYA,EAAE,OAAO,YAAYA,EAAE,OAAO,YAAYA,EAAE,OAAO,YAAYA,EAAE,OAAO,YAAYA,EAAE,OAAO,YAAYA,EAAE,OAAO,YAAYA,EAAE,OAAO,YAAYA,EAAE,OAAO,WAAWA,EAAE,OAAO,YAAYA,EAAE,MAAM,YAAYA,EAAE,OAAO,aACtVD,EAAEW,mBAAmB,IAAI1F,GAAY,oBAAoB8E,EAAEC,EAAEQ,IAAIR,EAAEI,IAAIF,EAAE,EAAED,EAAE,OAAO,YAAYA,EAAE,OAAO,YAAYA,EAAE,OAAO,YAAYA,EAAE,OAAO,WAAWA,EAAE,OAAO,YAAYA,EAAE,MAAM,YAAYA,EAAE,OAAO,WAAWA,EAAE,OAAO,WAAWA,EAAE,OAAO,WAAWA,EAAE,OAAO,WAAWA,EAAE,OAAO,WAAWA,EAAE,OAAO,aACpTD,EAAEY,yBAAyB,IAAI3F,GAAY,0BAA0B8E,EAAEC,EAAEQ,IAAIR,EAAEI,IAAIF,EAAE,EAAED,EAAE,OAAO,WAAWA,EAAE,MAAM,YAAYA,EAAE,OAAO,YAAYA,EAAE,OAAO,WAAWA,EAAE,OAAO,WAAWA,EAAE,OAAO,YAAYA,EAAE,OAAO,WAAWA,EAAE,OAAO,YAAYA,EAAE,MAAM,WAAWA,EAAE,OAAO,WAAWA,EAAE,OAAO,cAC1SD,EAAEa,qBAAqB,IAAI5F,GAAY,sBAAsB8E,EAAEC,EAAEQ,IAAIR,EAAEI,IAAIF,EAAE,EAAED,EAAE,OAAO,WAAWA,EAAE,OAAO,WAAWA,EAAE,OAAO,WAAWA,EAAE,OAAO,WAAWA,EAAE,OAAO,WAAWA,EAAE,OAAO,WAAWA,EAAE,MAAM,YAAYA,EAAE,OAAO,YAAYA,EAAE,OAAO,WAAWA,EAAE,OAAO,cAC7QD,EAAEc,wBAAwB,IAAI1E,GAAU,yBAAyB4D,EAAEM,YAAYN,EAAES,IAAIP,EAAE,EAAED,GAAG,QAAQ,YAAYA,EAAE,SAAS,YAAYA,EAAE,UAAU,YAAYA,EAAE,UAAU,YAAYA,EAAE,UAAU,YAAYA,EAAE,UAAU,YAAYA,EAAE,UAAU,WAAWA,EAAE,UAAU,WAAWA,GAAG,OAAO,WAAWC,EAAE,EAAED,GAAG,QAAQ,YAAYA,EAAE,SAAS,YAAYA,EAAE,UAAU,YAAYA,EAAE,UAAU,YAAYA,EAAE,UAAU,YAAYA,EAAE,UAAU,YAAYA,EAAE,UAAU,WAAWA,EAAE,UAAU,YAAYA,EAAE,UAAU,YAAYA,EAAE,UAAU,YAAYA,EAAE,SAAS,YAAYA,EAAE,QAAQ,YAAYA,GAAG,OAAO,aAAaC,EAAE,EAAED,GAAG,OAAO,YAAYA,EAAE,QAAQ,YAAYA,EAAE,SAAS,YAAYA,EAAE,UAAU,YAAYA,EAAE,UAAU,YAAYA,EAAE,UAAU,YAAYA,EAAE,UAAU,WAAWA,EAAE,UAAU,YAAYA,EAAE,UAAU,WAAWA,EAAE,UAAU,YAAYA,EAAE,UAAU,YAAYA,EAAE,UAAU,YAAYA,EAAE,UAAU,YAAYA,EAAE,UAAU,YAAYA,EAAE,UAAU,WAAWA,EAAE,UAAU,YAAYA,EAAE,SAAS,YAAYA,GAAG,QAAQ,aAAaC,EAAE,EAAED,EAAE,UAAU,WAAWA,EAAE,UAAU,YAAYA,EAAE,UAAU,YAAYA,EAAE,UAAU,YAAYA,EAAE,UAAU,YAAYA,EAAE,UAAU,YAAYA,EAAE,UAAU,cAEzqCD,EAAEF,UAAU,CAACE,EAAEI,IAAIJ,EAAEK,iBAAiBL,EAAEM,YAAYN,EAAEO,aAAaP,EAAEQ,IAAIR,EAAES,IAAIT,EAAEU,uBAAuBV,EAAEW,mBAAmBX,EAAEY,yBAAyBZ,EAAEa,qBAAqBb,EAAEc,wBAClL,GDVD,SAASC,GAAcZ,GACnB,OAAU,IAANA,EAAgB,IACV,IAANA,EAAgB,IACV,IAANA,EAAgB,IACV,IAANA,EAAgB,IACb,GACX,CAEe,SAASa,KACpB,MAAOpY,EAAUC,GAAoB+H,EAAmB,MACjDkE,EAAMC,GAAgBF,GAAe,MACrCjH,EAAOC,GAAiBkE,EAAgB,KAE/C,IAAIkP,EAAY,EACZC,EAAY,EAChB,IAAK,MAAMnb,KAAQ6H,EACfqT,GAAalb,EAAKgB,OAClBma,GAAanb,EAAKiB,OAGtB0Y,GAAOW,iBAAiBnW,MAAMtB,EAASkC,SAASC,gBAChD2U,GAAOY,YAAYpW,MAAM4K,EAAKvB,QAAQzI,SAASkI,UAC/C0M,GAAOa,aAAarW,MAAM+W,EAC1BvB,GAAO7E,OAEP,MAAMsG,EAAaza,EAAMI,EAAQ8B,EAASkC,SAASC,gBAAgBkW,EAAYnM,EAAKvB,QAAQzI,SAASkI,UAAWpK,EAASkC,SAASE,gBAAgBkW,EAAYpM,EAAKvB,QAAQzI,SAASmI,cAC9KmO,EAAmB1B,GAAOgB,uBAAuB9W,MACjDyX,EAAe3B,GAAOiB,mBAAmB/W,MACzC0X,EAAgBP,GAAcrB,GAAOoB,wBAAwBlX,OACnE2C,QAAQ6S,IAAIM,GAAOoB,yBAEnBpB,GAAOY,YAAYpW,MAAM4K,EAAKtB,QAAQ1I,SAASkI,UAC/C0M,GAAO7E,OAEP,MAAM0G,EAAa7a,EAAMI,EAAQ8B,EAASkC,SAASC,gBAAgBkW,EAAYnM,EAAKtB,QAAQ1I,SAASkI,UAAWpK,EAASkC,SAASE,gBAAgBkW,EAAYpM,EAAKtB,QAAQ1I,SAASmI,cAC9KuO,EAAmB9B,GAAOgB,uBAAuB9W,MACjD6X,EAAe/B,GAAOiB,mBAAmB/W,MACzC8X,EAAgBX,GAAcrB,GAAOoB,wBAAwBlX,OACnE,OACId,eAAAC,WAAA,CAAAlD,SAAA,CACIP,cAAC0D,IAAM,CAACC,UAAU,SAAQpD,SAAC,WAG3BiD,eAACI,IAAK,CAACC,aAAW,EAAC1D,MAAO,CAAC2D,SAAU,SAASvD,SAAA,CAC1CP,cAAC4D,IAAMF,OAAM,CAAAnD,SACTiD,eAACI,IAAMG,IAAG,CAAAxD,SAAA,CACNP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,cACrCP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,WACrCP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,cAG7CP,cAAC4D,IAAMK,KAAI,CAAA1D,SACPiD,eAACI,IAAMG,IAAG,CAAAxD,SAAA,CACNP,cAAC4D,IAAMM,KAAI,CAACP,UAAU,SAAQpD,SAAE+C,EAASkC,SAASC,kBAClDzF,cAAC4D,IAAMM,KAAI,CAACP,UAAU,SAAQpD,SAAE+C,EAASkC,SAASE,kBAClDlC,eAACI,IAAMM,KAAI,CAACP,UAAU,SAAQpD,SAAA,CAAEa,EAAMI,EAAQ8B,EAASkC,SAASC,gBAAiBnC,EAASkC,SAASE,kBAAkB,YAG7H1F,cAAC4D,IAAMF,OAAM,CAAAnD,SACTiD,eAACI,IAAMG,IAAG,CAAAxD,SAAA,CACNP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,qBACrCP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,WACrCP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,cAG7CP,cAAC4D,IAAMK,KAAI,CAAA1D,SACPiD,eAACI,IAAMG,IAAG,CAAAxD,SAAA,CACNP,cAAC4D,IAAMM,KAAI,CAACP,UAAU,SAAQpD,SAAE+C,EAASkC,SAASC,gBAAgBkW,IAClE3b,cAAC4D,IAAMM,KAAI,CAACP,UAAU,SAAQpD,SAAE+C,EAASkC,SAASE,gBAAgBkW,IAClEpY,eAACI,IAAMM,KAAI,CAACP,UAAU,SAAQpD,SAAA,CAAEa,EAAMI,EAAQ8B,EAASkC,SAASC,gBAAgBkW,EAAarY,EAASkC,SAASE,gBAAgBkW,IAAc,eAIzJpY,eAACI,IAAK,CAACC,aAAW,EAAC1D,MAAO,CAAC2D,SAAU,SAASvD,SAAA,CAC1CP,cAAC4D,IAAMF,OAAM,CAAAnD,SACTiD,eAACI,IAAMG,IAAG,CAAAxD,SAAA,CACNP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,mBACrCP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,WACrCP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,cAG7CP,cAAC4D,IAAMK,KAAI,CAAA1D,SACPiD,eAACI,IAAMG,IAAG,CAAAxD,SAAA,CACNP,cAAC4D,IAAMM,KAAI,CAACP,UAAU,SAAQpD,SAAE+C,EAASkC,SAASC,gBAAgBkW,EAAYnM,EAAKvB,QAAQzI,SAASkI,YACpG1N,cAAC4D,IAAMM,KAAI,CAACP,UAAU,SAAQpD,SAAE+C,EAASkC,SAASE,gBAAgBkW,EAAYpM,EAAKvB,QAAQzI,SAASmI,cACpGnK,eAACI,IAAMM,KAAI,CAACP,UAAU,SAAQpD,SAAA,CACzBsb,EAAW,YAIxB7b,cAAC4D,IAAMF,OAAM,CAAAnD,SACTiD,eAACI,IAAMG,IAAG,CAAAxD,SAAA,CACNP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,YACrCP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,iBACrCP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,sBAG7CP,cAAC4D,IAAMK,KAAI,CAAA1D,SACPiD,eAACI,IAAMG,IAAG,CAAAxD,SAAA,CACNP,cAAC4D,IAAMM,KAAI,CAACP,UAAU,SAAQpD,SAAEyb,IAChCxY,eAACI,IAAMM,KAAI,CAACP,UAAU,SAAQpD,SAAA,CAAEiC,EAAWsZ,EAAiB,GAAG,OAC/DtY,eAACI,IAAMM,KAAI,CAACP,UAAU,SAAQpD,SAAA,CAAEiC,EAAWuZ,EAAa,GAAG,eAIvEvY,eAACI,IAAK,CAACC,aAAW,EAAC1D,MAAO,CAAC2D,SAAU,SAASvD,SAAA,CAC1CP,cAAC4D,IAAMF,OAAM,CAAAnD,SACTiD,eAACI,IAAMG,IAAG,CAAAxD,SAAA,CACNP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,mBACrCP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,WACrCP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,cAG7CP,cAAC4D,IAAMK,KAAI,CAAA1D,SACPiD,eAACI,IAAMG,IAAG,CAAAxD,SAAA,CACNP,cAAC4D,IAAMM,KAAI,CAACP,UAAU,SAAQpD,SAAE+C,EAASkC,SAASC,gBAAgBkW,EAAYnM,EAAKtB,QAAQ1I,SAASkI,YACpG1N,cAAC4D,IAAMM,KAAI,CAACP,UAAU,SAAQpD,SAAE+C,EAASkC,SAASE,gBAAgBkW,EAAYpM,EAAKtB,QAAQ1I,SAASmI,cACpGnK,eAACI,IAAMM,KAAI,CAACP,UAAU,SAAQpD,SAAA,CACzB0b,EAAW,YAIxBjc,cAAC4D,IAAMF,OAAM,CAAAnD,SACTiD,eAACI,IAAMG,IAAG,CAAAxD,SAAA,CACNP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,YACrCP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,iBACrCP,cAAC4D,IAAMI,WAAU,CAACL,UAAU,SAAQpD,SAAC,sBAG7CP,cAAC4D,IAAMK,KAAI,CAAA1D,SACPiD,eAACI,IAAMG,IAAG,CAAAxD,SAAA,CACNP,cAAC4D,IAAMM,KAAI,CAACP,UAAU,SAAQpD,SAAE6b,IAChC5Y,eAACI,IAAMM,KAAI,CAACP,UAAU,SAAQpD,SAAA,CAAEiC,EAAW0Z,EAAiB,GAAG,OAC/D1Y,eAACI,IAAMM,KAAI,CAACP,UAAU,SAAQpD,SAAA,CAAEiC,EAAW2Z,EAAa,GAAG,iBAMnF,CEzIA,MAAMvc,GAAU,CACZ,CAACG,KAAM,WAAYa,MAAO,YAC1B,CAACb,KAAM,OAAQa,MAAO,QACtB,CAACb,KAAM,QAASa,MAAO,SACvB,CAACb,KAAM,SAASa,MAAO,UACvB,CAACb,KAAM,UAAWa,MAAO,YA0Cdyb,OApCf,WACI,MAAOxc,EAAcC,GJpBzB,WAAiD,IAAjByL,EAAU3J,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,IACvC,MAAO/B,GAAe2L,QAAS1L,IAAyB2L,YAAiB,YAAawG,GAAqB,CAAClS,KAAM,YAAauc,eAAgB/Q,GAE/I,MAAO,CAAC1L,EAAcC,EAC1B,CIgBiDyc,CAAuB,MAC7DjZ,EAAUC,GAAoB+H,EAAmB,MACjDkE,EAAMC,GAAgBF,GAAe,MACrCjH,EAAOC,GAAiBkE,EAAgB,KAE/C,IAAI+P,EAAW,KAgBf,MAdyB,cAAT,OAAZ3c,QAAY,IAAZA,OAAY,EAAZA,EAAcE,MACdyc,EAAWxc,cAACqD,EAAQ,CAACC,SAAUA,EAAUC,iBAAkBA,IAChC,UAAT,OAAZ1D,QAAY,IAAZA,OAAY,EAAZA,EAAcE,MACpByc,EAAWxc,cAAC+R,GAAI,CAACvC,KAAMA,EAAMC,aAAcA,IAChB,WAAT,OAAZ5P,QAAY,IAAZA,OAAY,EAAZA,EAAcE,MACpByc,EAAWxc,cAACqI,EAAK,CAACC,MAAOA,EAAOC,cAAeA,IACpB,YAAT,OAAZ1I,QAAY,IAAZA,OAAY,EAAZA,EAAcE,MACpByc,EAAWxc,cAAC0b,GAAM,IACS,aAAT,OAAZ7b,QAAY,IAAZA,OAAY,EAAZA,EAAcE,MACpByc,EAAWxc,cAACiQ,GAAO,IAEnBnQ,EAAqB,YAIrB0D,eAACiZ,IAAS,CAACtc,MAAO,CAACiK,SAAS,EAAGsS,OAAO,GAAGnc,SAAA,CACrCiD,eAACqN,IAAO,CAAC8L,UAAQ,EAACzc,SAAS,MAAKK,SAAA,CAC5BP,cAAC0D,IAAM,CAACU,GAAG,KAAKT,UAAU,SAAQpD,SAAC,SACnCP,cAAC0D,IAAM,CAACU,GAAG,KAAKT,UAAU,SAASxD,MAAO,CAAC6H,MAAM,aAAazH,SAAC,0BAEnEP,cAACN,EAAO,CAACE,UAAWA,GAAWC,aAAcA,EAAcC,qBAAsBA,IACjFE,cAAC6Q,IAAO,CAAC3Q,SAAS,SAAS4Q,WAAS,EAAC3Q,MAAO,CAAC4J,WAAW,SAAUD,QAAQ,OAAQ8S,cAAc,UAAUrc,SACrGic,MAIjB,ECpDAK,IAASC,OACP9c,cAAC+c,IAAMC,WAAU,CAAAzc,SACfP,cAAA,OAAK4J,UAAU,aAAYrJ,SACzBP,cAACqc,GAAG,QAGRY,SAASC,eAAe,Q","file":"static/js/main.000130d3.chunk.js","sourcesContent":["import { Menu } from \"semantic-ui-react\";\r\nexport default function WABMenu({menuItems, selectedMenu, selectedMenuDispatch}){\r\n    if (!selectedMenu || !selectedMenu.page) selectedMenuDispatch(menuItems[0].page);\r\n\r\n    return (\r\n            <Menu attached style={{overflowX: 'auto', overflowY:'clip', touchAction:'pan-x pan-y'}}>\r\n                {\r\n                    menuItems.map( item => <Menu.Item\r\n                        style={{touchAction:'pan-x pan-y'}}\r\n                        key={\"menu\"+item.page}\r\n                        name={item.title}\r\n                        active={selectedMenu?.page === item.page}\r\n                        onClick={()=>selectedMenuDispatch(item.page)}\r\n                    />)\r\n                }\r\n            </Menu>\r\n    );\r\n}","const momentSimplifier=1000;\r\n\r\nfunction realNumber(string){\r\n    let real = Number(string);\r\n    if (!isFinite(real)) real=0;\r\n    return real;\r\n}\r\n\r\nfunction toMAC(arm){\r\n    return Math.round((100*(Number(arm)-487.4))/164.5*10)/10;\r\n}\r\n\r\nfunction calcArm(weight, moment, divider=100){\r\n    return formatArm((formatMoment(moment)*momentSimplifier)/formatWeight(weight), divider);\r\n}\r\n\r\nfunction calcMoment(weight, arm){\r\n    return formatMoment((Number(weight)*Number(arm))/momentSimplifier);\r\n}\r\n\r\nfunction formatArm(arm, divider=100){\r\n    arm=realNumber(arm);\r\n    return Math.round(arm*divider)/divider;\r\n}\r\n\r\nfunction formatWeight(weight){\r\n    weight=realNumber(weight);\r\n    return Math.round(weight*100)/100;\r\n}\r\n\r\nfunction formatMoment(moment){\r\n    return Math.round(realNumber(moment)*10000)/10000;\r\n}\r\n\r\nfunction isAboutEquals(a,b, smallestDiff=0.0000001){\r\n    a=realNumber(a);\r\n    b=realNumber(b);\r\n    if (Math.abs(a-b)<smallestDiff){\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nfunction displayVal(number, decimal=0){\r\n    number=Number(number);\r\n    if (!isFinite(number)) number=0;\r\n\r\n    let formatted;\r\n    if (decimal>=0){\r\n        formatted=number.toFixed(decimal);\r\n    }else{\r\n        formatted=number;\r\n        for (let i=0;i>decimal;i--){\r\n            formatted/=10;\r\n        }\r\n        formatted=Math.round(formatted);\r\n        for (let i=0;i>decimal;i--){\r\n            formatted*=10;\r\n        }\r\n    }\r\n    return formatted;\r\n}\r\n\r\nfunction getUniqueId(arrayOfObjs, property){\r\n    let newKey = 0;\r\n    try {\r\n        for (const item of arrayOfObjs){\r\n            let currentKey = Number(item[property]);\r\n            if (!isFinite(currentKey)) currentKey = 0;\r\n            if (newKey<=currentKey) newKey = currentKey+1;\r\n        }\r\n    } catch {\r\n    }\r\n    return newKey;\r\n}\r\n\r\nfunction isGoodObject(obj){\r\n    return !(typeof obj!=='object' || Array.isArray(obj) || obj===null);\r\n}\r\n\r\n\r\n\r\nexport {toMAC, calcArm, calcMoment, realNumber, formatArm, formatWeight, formatMoment, isAboutEquals, displayVal, getUniqueId, isGoodObject, momentSimplifier};","import TouchInput from '@dteel/touch-input'\r\nimport { Table, Input, Button, Header } from 'semantic-ui-react';\r\n\r\nimport {useState} from 'react';\r\n\r\nimport { calcArm, calcMoment } from '../common';\r\n\r\nconst noPadCell={padding:'1px', border:'none'};\r\nconst deleteCell={padding:'0px 4px 0px 0px', border:'none'};\r\nconst inputStyle={style:{paddingLeft:'5px', paddingRight:'5px'}};\r\n\r\n\r\nexport default function Aircraft({aircraft, aircraftDispatch}){\r\n  \r\n    return (\r\n        <>\r\n            <Header textAlign='center'>\r\n                Aircraft\r\n            </Header>\r\n            <Table unstackable style={{maxWidth: '650px'}}>\r\n                <Table.Header>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell textAlign='center'>Basic Weight</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Moment</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Arm</Table.HeaderCell>\r\n                    </Table.Row>\r\n                </Table.Header>\r\n                <Table.Body>\r\n                    <Table.Row>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={aircraft.basicWeight} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, basicWeight: v})\r\n                            }} fluid type='number' title='Basic Weight' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={aircraft.basicMoment} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, basicMoment: v})\r\n                            }} fluid type='number' title='Basic Moment' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={calcArm(aircraft.basicWeight, aircraft.basicMoment)} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, basicMoment: calcMoment(aircraft.basicWeight, v)})\r\n                            }} fluid type='number' title='Basic Arm' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                    </Table.Row>\r\n                </Table.Body>\r\n            </Table>\r\n            <Table unstackable style={{maxWidth: '650px'}}>\r\n                <Table.Header>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell textAlign='center'>Crew Weight</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Moment</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Arm</Table.HeaderCell>\r\n                    </Table.Row>\r\n                </Table.Header>\r\n                <Table.Body>\r\n                    <Table.Row>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={aircraft.crewWeight} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, crewWeight: v})\r\n                            }} fluid type='number' title='Crew Weight' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={aircraft.crewMoment} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, crewMoment: v})\r\n                            }} fluid type='number' title='Crew Moment' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={calcArm(aircraft.crewWeight, aircraft.crewMoment)} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, crewMoment: calcMoment(aircraft.crewWeight, v)})\r\n                            }} fluid type='number' title='Crew Arm' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                    </Table.Row>\r\n                </Table.Body>\r\n                <Table.Header>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell textAlign='center'>Crew Bag Weight</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Moment</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Arm</Table.HeaderCell>\r\n                    </Table.Row>\r\n                </Table.Header>\r\n                <Table.Body>\r\n                    <Table.Row>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={aircraft.baggageWeight} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, baggageWeight: v})\r\n                            }} fluid type='number' title='Crew Bags Weight' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={aircraft.baggageMoment} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, baggageMoment: v})\r\n                            }} fluid type='number' title='Crew Bags Moment' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={calcArm(aircraft.baggageWeight, aircraft.baggageMoment)} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, baggageMoment: calcMoment(aircraft.baggageWeight, v)})\r\n                            }} fluid type='number' title='Crew Bags Arm' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                    </Table.Row>\r\n                </Table.Body>\r\n                <Table.Header>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell textAlign='center'>Stewards Weight</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Moment</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Arm</Table.HeaderCell>\r\n                    </Table.Row>\r\n                </Table.Header>\r\n                <Table.Body>\r\n                    <Table.Row>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={aircraft.stewardsWeight} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, stewardsWeight: v})\r\n                            }} fluid type='number' title='Stewards Weight' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={aircraft.stewardsMoment} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, stewardsMoment: v})\r\n                            }} fluid type='number' title='Stewards Moment' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={calcArm(aircraft.stewardsWeight, aircraft.stewardsMoment)} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, stewardsMoment: calcMoment(aircraft.stewardsWeight, v)})\r\n                            }} fluid type='number' title='Stewards Arm' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                    </Table.Row>\r\n                </Table.Body>\r\n                <Table.Header>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell textAlign='center'>Emerg Weight</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Moment</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Arm</Table.HeaderCell>\r\n                    </Table.Row>\r\n                </Table.Header>\r\n                <Table.Body>\r\n                    <Table.Row>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={aircraft.emergencyWeight} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, emergencyWeight: v})\r\n                            }} fluid type='number' title='Emerg Weight' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={aircraft.emergencyMoment} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, emergencyMoment: v})\r\n                            }} fluid type='number' title='Emerg Moment' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={calcArm(aircraft.emergencyWeight, aircraft.emergencyMoment)} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, emergencyMoment: calcMoment(aircraft.emergencyWeight, v)})\r\n                            }} fluid type='number' title='Emerg Arm' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                    </Table.Row>\r\n                </Table.Body>\r\n                <Table.Header>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell textAlign='center'>Extra Weight</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Moment</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Arm</Table.HeaderCell>\r\n                    </Table.Row>\r\n                </Table.Header>\r\n                <Table.Body>\r\n                    <Table.Row>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={aircraft.extraWeight} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, extraWeight: v})\r\n                            }} fluid type='number' title='Extra Weight' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={aircraft.extraMoment} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, extraMoment: v})\r\n                            }} fluid type='number' title='Extra Moment' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={calcArm(aircraft.extraWeight, aircraft.extraMoment)} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, extraMoment: calcMoment(aircraft.extraWeight, v)})\r\n                            }} fluid type='number' title='Extra Arm' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                    </Table.Row>\r\n                </Table.Body>\r\n            </Table>\r\n            \r\n            <Table unstackable style={{maxWidth: '650px'}}>\r\n                <Table.Header>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell textAlign='center'>Op Weight</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Moment</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Arm</Table.HeaderCell>\r\n                    </Table.Row>\r\n                </Table.Header>\r\n                <Table.Body>\r\n                    <Table.Row>\r\n                        <Table.Cell textAlign='center'>\r\n                            {aircraft.readOnly.operatingWeight}\r\n                        </Table.Cell>\r\n                        <Table.Cell textAlign='center'>\r\n                            {aircraft.readOnly.operatingMoment}\r\n                        </Table.Cell>\r\n                        <Table.Cell textAlign='center'>\r\n                            {calcArm(aircraft.readOnly.operatingWeight, aircraft.readOnly.operatingMoment)}\r\n                        </Table.Cell>\r\n                    </Table.Row>\r\n                </Table.Body>\r\n            </Table>\r\n        </>\r\n    );\r\n}","import { useReducer } from \"react\";\r\n\r\nfunction sortReducer(state, key){\r\n    if (key===state.key){\r\n        if (state.dir===1){\r\n            return {key, dir: -1};\r\n        }\r\n        return {key: null, dir: 0};\r\n    }\r\n    return {key, dir: 1};\r\n}\r\n\r\nfunction matchSort(sortObj, key){\r\n    if (sortObj && sortObj.key===key){\r\n        return sortObj.dir>0?'ascending':'descending';\r\n    }\r\n    return null;\r\n}\r\n\r\nfunction getSortedList(sorted, sortDetails, list, sortGetterArgs){\r\n    if (!Array.isArray(list)) return list;\r\n    const listCopy=[...list];\r\n    if (sorted.key!==null){\r\n        const sortDetail=sortDetails.find( details => details.key===sorted.key);\r\n        if (sortDetail){\r\n            listCopy.sort( (a, b) => {\r\n                let aVal, bVal;\r\n                if (typeof sortDetail.getter==='function'){\r\n                    aVal=sortDetail.getter(a, ...sortGetterArgs);\r\n                    bVal=sortDetail.getter(b, ...sortGetterArgs);\r\n                }else{\r\n                    aVal=a[sorted.key];\r\n                    bVal=b[sorted.key];\r\n                }\r\n                if (sortDetail.type==='number'){\r\n                    return sorted.dir * (Number(aVal) - Number(bVal));\r\n                }else if (sortDetail.type==='string'){\r\n                    return sorted.dir * String(aVal).localeCompare(String(bVal));\r\n                }else if (sortDetail.type==='date'){\r\n                    return sorted.dir * (new Date(aVal) - new Date(bVal));\r\n                }\r\n                console.warn(\"useSorted: attempting to sort with unknown sort type '\"+sortDetail.type+\"'\");\r\n                return 0;\r\n            });\r\n        }\r\n    }\r\n    return listCopy;\r\n}\r\n\r\nfunction useSorted(sortDetails, items, ...sortGetterArgs){\r\n    const [sorted, sortedDispatch] = useReducer(sortReducer, {key: null, dir: 0});\r\n\r\n    return [getSortedList(sorted, sortDetails, items, sortGetterArgs), sortedDispatch, matchSort.bind(null, sorted)]\r\n}\r\n\r\nexport {useSorted};","import {Modal, Header, Button} from 'semantic-ui-react';\r\n\r\nexport default function ConfirmationModal({onYes, onNo, isOpen, title, content}){\r\n    return (\r\n        <Modal open={isOpen} size=\"tiny\">\r\n        {\r\n            content\r\n            ?\r\n                <Modal.Header>{title}</Modal.Header>\r\n            :\r\n                null\r\n        }\r\n        <Modal.Content>\r\n          <Modal.Description>\r\n              {content?content:<Header>{title}</Header>}\r\n          </Modal.Description>\r\n        </Modal.Content>\r\n        <Modal.Actions>\r\n          <Button positive content={\"Yes\"} onClick={onYes}/>\r\n          <Button color='black' content={\"No\"} onClick={onNo}/>\r\n        </Modal.Actions>\r\n      </Modal>\r\n    )\r\n}","\r\nimport TouchInput from '@dteel/touch-input'\r\nimport { Table, Input, Button } from 'semantic-ui-react';\r\nimport {useState} from 'react';\r\n\r\nimport {useSorted} from '../useSorted';\r\n\r\nimport ConfirmationModal from './ConfirmationModal';\r\n\r\nimport { calcArm, calcMoment, formatWeight, formatMoment, isAboutEquals } from '../common';\r\n\r\n\r\nconst noPadCell={padding:'1px', border:'none'};\r\nconst deleteCell={padding:'0px 4px 0px 0px', border:'none'};\r\nconst inputStyle={style:{paddingLeft:'5px', paddingRight:'5px'}};\r\n\r\n\r\n\r\nconst sortDetails=[\r\n    {key: 'name', type: 'string'},\r\n    {key: 'weight', type: 'number'},\r\n    {key: 'moment', type: 'number'},\r\n    {key: 'arm', type: 'number'}\r\n];\r\n\r\nexport default function Cargo({cargo, cargoDispatch}){\r\n    const [deleteItemId, _setDeleteItemId] = useState(null);\r\n    const [itemList, sortBy, matchSort] = useSorted(sortDetails, cargo);\r\n\r\n\r\n    let weightTotal=0, momentTotal=0, armTotal;\r\n\r\n    itemList?.forEach( item => {\r\n        weightTotal+=Number(item.weight);\r\n        momentTotal+=Number(item.moment);\r\n    })\r\n    weightTotal=formatWeight(weightTotal);\r\n    momentTotal=formatMoment(momentTotal);\r\n    armTotal=calcArm(weightTotal, momentTotal);\r\n\r\n    const setDeleteItemId = (id) => {\r\n        for (const item of itemList){\r\n            if (item.id === id){\r\n                if (item.name.trim()===\"\" && isAboutEquals(item.weight, 0) && isAboutEquals(item.moment, 0)){\r\n                    cargoDispatch('delete', id);\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n        _setDeleteItemId(id);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <ConfirmationModal title={\"Are you sure you want to delete this?\"}\r\n                        isOpen={deleteItemId!==null}\r\n                        onYes={()=>{\r\n                            cargoDispatch('delete', deleteItemId);\r\n                            setDeleteItemId(null);\r\n                        }}\r\n                        onNo={()=>{\r\n                            setDeleteItemId(null);\r\n                        }}\r\n            />\r\n            <Table unstackable style={{maxWidth: '768px'}} sortable>\r\n                <Table.Header className='stickyheader'>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell colSpan='5'>\r\n                            <div style={{display:'flex', alignItems:'center'}}>\r\n                                <Button.Group vertical>\r\n                                    <Button icon='add' labelPosition='left' positive size='small' content='New'  onClick={()=>cargoDispatch('create', null)}/>\r\n\r\n                                </Button.Group>\r\n                                <div style={{flexGrow:'1', textAlign:'center', fontSize:'1.3em'}}>Cargo</div>\r\n                            </div>\r\n                        </Table.HeaderCell>\r\n                    </Table.Row>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell width={6} sorted={matchSort('name')}   onClick={()=>sortBy('name')}  >Name  </Table.HeaderCell>\r\n                        <Table.HeaderCell width={3} sorted={matchSort('weight')} onClick={()=>sortBy('weight')}>Weight</Table.HeaderCell>\r\n                        <Table.HeaderCell width={3} sorted={matchSort('moment')} onClick={()=>sortBy('moment')}>Moment</Table.HeaderCell>\r\n                        <Table.HeaderCell width={3} sorted={matchSort('arm')}    onClick={()=>sortBy('arm')}   >Arm   </Table.HeaderCell>\r\n                        <Table.HeaderCell collapsing width={1} onClick={()=>sortBy(null)}></Table.HeaderCell>\r\n                    </Table.Row>\r\n                </Table.Header>\r\n                <Table.Body>\r\n                    {\r\n                        itemList?.length ?\r\n                        itemList.map( item => (\r\n                                <Table.Row key={item.id}>\r\n                                    <Table.Cell style={noPadCell}>\r\n                                        <TouchInput as={Input} value={item.name} onChange={(v)=>cargoDispatch('update', {...item, name: v})} fluid input={inputStyle}/>\r\n                                    </Table.Cell>\r\n                                    <Table.Cell style={noPadCell}>\r\n                                        <TouchInput as={Input} value={item.weight} onChange={(v)=>{\r\n                                                cargoDispatch('update', {...item, weight: v, moment: calcMoment(v, item.arm), arm: item.arm})\r\n                                        }} fluid  type='number' title='Weight' input={inputStyle}/>\r\n                                    </Table.Cell>\r\n                                    <Table.Cell style={noPadCell}>\r\n                                        <TouchInput as={Input} value={item.moment} onChange={(v)=>cargoDispatch('update', {...item, moment: v, arm: calcArm(item.weight, v)})} fluid type='number' title='Moment' input={inputStyle}/>\r\n                                    </Table.Cell>\r\n                                    <Table.Cell style={{...noPadCell, textAlign:'center'}}>\r\n                                        <TouchInput as={Input} value={item.arm} onChange={(v)=>cargoDispatch('update', {...item, arm: v, moment: calcMoment(item.weight, v)})} fluid disabled={isAboutEquals(item.weight,0)} type={isAboutEquals(item.weight,0)?null:'number'} title='Arm' input={inputStyle}/>\r\n                                    </Table.Cell>\r\n                                    <Table.Cell style={deleteCell}>\r\n                                        <Button floated='right' icon='minus' negative size='mini' onClick={(e)=>{\r\n                                            setDeleteItemId(item.id);\r\n                                        }}/>\r\n                                    </Table.Cell>\r\n                                </Table.Row>\r\n                            ))\r\n                        :\r\n                            <Table.Row style={{textAlign:'center'}}>\r\n                                <Table.Cell colSpan='5'>\r\n                                    no items\r\n                                </Table.Cell>\r\n                            </Table.Row>\r\n                    }\r\n                </Table.Body>\r\n                {\r\n                    itemList?.length?\r\n                        <Table.Footer>\r\n                            <Table.Row>\r\n                                <Table.Cell>Total</Table.Cell>\r\n                                <Table.Cell>{weightTotal}</Table.Cell>\r\n                                <Table.Cell>{momentTotal}</Table.Cell>\r\n                                <Table.Cell>{armTotal}</Table.Cell>\r\n                                <Table.Cell></Table.Cell>\r\n                            </Table.Row>\r\n                        </Table.Footer>\r\n                    :\r\n                        null\r\n                }\r\n            </Table>\r\n        </>\r\n    );\r\n}","import { useStoredReducer } from \"@dteel/use-stored-reducer\";\r\nimport { isGoodObject } from \"../common\";\r\n\r\nconst emptyAircraft = {\r\n    basicWeight: 0,\r\n    basicMoment: 0,\r\n\r\n    crewWeight: 0,\r\n    crewMoment: 0,\r\n\r\n    baggageWeight: 0,\r\n    baggageMoment: 0,\r\n\r\n    stewardsWeight: 0,\r\n    stewardsMoment: 0,\r\n\r\n    emergencyWeight: 0,\r\n    emergencyMoment: 0,\r\n\r\n    extraWeight: 0,\r\n    extraMoment: 0,\r\n\r\n    readOnly:{\r\n        operatingWeight: 0,\r\n        operatingMoment: 0,\r\n    }\r\n}\r\n\r\nfunction sanitizeAircraft(s){\r\n    const fields=[\r\n        'basicWeight', 'basicMoment',\r\n        'crewWeight', 'crewMoment',\r\n        'baggageWeight', 'baggageMoment',\r\n        'stewardsWeight', 'stewardsMoment',\r\n        'emergencyWeight', 'emergencyMoment',\r\n        'extraWeight', 'extraMoment',\r\n    ];\r\n    for (const field of fields){\r\n        s[field]=Number(s[field]);\r\n        if (!isFinite(s[field])) s[field]=0;\r\n    }\r\n    return s;\r\n}\r\n\r\nfunction addReadOnly(s){\r\n    s.readOnly={\r\n        operatingWeight: s.basicWeight+s.crewWeight+s.baggageWeight+s.stewardsWeight+s.emergencyWeight+s.extraWeight,\r\n        operatingMoment: s.basicMoment+s.crewMoment+s.baggageMoment+s.stewardsMoment+s.emergencyMoment+s.extraMoment\r\n    };\r\n    return s;\r\n}\r\n\r\nfunction aircraftReducer(state, action, payload){\r\n\r\n    if (!isGoodObject(state)){\r\n        state=emptyAircraft;\r\n    }\r\n\r\n    switch (action){\r\n        case 'reset':{\r\n            return emptyAircraft;\r\n        }\r\n        case 'set':{\r\n            return addReadOnly(sanitizeAircraft(payload));\r\n        }\r\n        default:\r\n            console.error('unknown aircraftReducer action: ', action);\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction useAircraftReducer(hysterisis=1000){\r\n    const [aircraft, {current: aircraftDispatch}] = useStoredReducer('cwab-aircraft', aircraftReducer, emptyAircraft, localStorage, hysterisis);\r\n\r\n    return [aircraft, aircraftDispatch];\r\n}\r\n\r\nexport {useAircraftReducer as default, aircraftReducer};","import { useStoredReducer } from \"@dteel/use-stored-reducer\";\r\n\r\nimport { calcArm, getUniqueId, isAboutEquals, isGoodObject } from \"../common\";\r\n\r\nfunction blankItem(){\r\n    return {name:'', weight: 0, moment: 0, arm: 0};\r\n}\r\n\r\nfunction sanitizeCargo(cargo){\r\n    for (const item of cargo){\r\n        item.weight=Number(item.weight);\r\n        item.moment=Number(item.moment);\r\n        item.arm=Number(item.arm);\r\n    }\r\n    return cargo;\r\n}\r\n\r\nfunction cargoReducer(state, action, payload, callback){\r\n\r\n    if (!Array.isArray(state)) state=[];\r\n\r\n    switch (action){\r\n        case 'reset':{\r\n            return [];\r\n        }\r\n        case 'update':{\r\n            const items=state;\r\n            \r\n            payload.weight=Number(payload.weight);\r\n            payload.moment=Number(payload.moment);\r\n            payload.arm=Number(payload.arm);\r\n\r\n            const expectedArm = calcArm(payload.weight, payload.moment);\r\n            if (!isAboutEquals(expectedArm, payload.arm, 0.1)){\r\n                payload.arm=expectedArm;\r\n            }\r\n\r\n            for (const [index, element] of items.entries()){\r\n                if (element.id===payload.id){\r\n                    items[index]=payload;\r\n                    break;\r\n                }\r\n            }\r\n            \r\n            return sanitizeCargo(items);\r\n        }\r\n        case 'delete':{\r\n            const items=state;\r\n            const id=typeof payload==='object' ? payload.id : payload;\r\n            return items.filter( item => !(item.id === id) );\r\n        }\r\n        case 'create':{\r\n            let newItem = payload;\r\n            if (!isGoodObject(newItem)) newItem=blankItem();\r\n\r\n            newItem.id=getUniqueId(state, 'id');\r\n            if (callback) callback(newItem.id);\r\n\r\n            return sanitizeCargo([...state, newItem]);\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction useCargoReducer(hysterisis=1000){\r\n    const [itemGroup, {current: itemGroupDispatch}] = useStoredReducer('cwab-cargo', cargoReducer, [], localStorage, hysterisis);\r\n\r\n    return [itemGroup, itemGroupDispatch];\r\n}\r\n\r\nexport {useCargoReducer as default, cargoReducer};","import { useStoredReducer } from \"@dteel/use-stored-reducer\";\r\nimport { isGoodObject, isAboutEquals } from \"../common\";\r\n\r\nconst maxAux = 5810;\r\nconst maxExt = 8900;    \r\nconst maxIB = 7660;\r\nconst maxOB = 8310;\r\nconst momentSimplifier=1000;\r\n\r\nconst blankSingleFuel={\r\n    lext: 0,\r\n    main1: 0,\r\n    main2: 0,\r\n    laux: 0,\r\n    raux: 0,\r\n    main3: 0,\r\n    main4: 0,\r\n    rext: 0,\r\n\r\n    readOnly:{\r\n        totalFuel: 0,\r\n        totalMoment: 0,\r\n        obs: 0,\r\n        ibs: 0,\r\n        auxs: 0,\r\n        exts: 0\r\n    }\r\n};\r\n\r\nconst blankFuel = {\r\n    takeoff: blankSingleFuel,\r\n    landing: blankSingleFuel\r\n}\r\n\r\n\r\nfunction interpolateTable(valueIn, table){\r\n    let below=null;\r\n    let above=null;\r\n    for (const item of table){\r\n        if (isAboutEquals(valueIn, item.in)){\r\n            above=item;\r\n            below=item;\r\n            break;\r\n        }\r\n        if (valueIn>=item.in){\r\n            if (below!==null){\r\n                if (item.in>below.in){\r\n                    below=item;\r\n                }\r\n            }else{\r\n                below=item;\r\n            }\r\n        }\r\n        if (valueIn<=item.in){\r\n            if (above!==null){\r\n                if (item.in<above.in){\r\n                    above=item;\r\n                }\r\n            }else{\r\n                above=item;\r\n            }\r\n        }\r\n    }\r\n\r\n    if (above==null || below==null){\r\n        return null;\r\n    }\r\n    \r\n    if (below===above || isAboutEquals(below.in, above.in)){\r\n        return above.out;\r\n    }\r\n\r\n    const resultDiff = above.out - below.out;\r\n    const valDiff = above.in - below.in;\r\n    return ((valueIn - below.in) / valDiff) * resultDiff + below.out;\r\n}\r\n\r\nfunction getSingleAuxMoment(auxFuel){\r\n    const table = [\r\n        {in: 0,           out: 560.5},\r\n        {in: maxAux*0.25, out: 559.0},\r\n        {in: maxAux*0.50, out: 557.5},\r\n        {in: maxAux*0.75, out: 556.9},\r\n        {in: maxAux     , out: 556.7},\r\n    ];\r\n\r\n    return interpolateTable(auxFuel, table)*auxFuel/momentSimplifier;\r\n}\r\n\r\nfunction getSingleExtMoment(extFuel){\r\n    const table = [\r\n        {in: 0,           out: 552.7},\r\n        {in: maxExt*0.25, out: 552.0},\r\n        {in: maxExt*0.50, out: 551.3},\r\n        {in: maxExt*0.75, out: 551.0},\r\n        {in: maxExt     , out: 551.2},\r\n    ];\r\n\r\n    return interpolateTable(extFuel, table)*extFuel/momentSimplifier;\r\n}\r\n\r\nfunction getSingleIBMoment(ibFuel){\r\n    const table = [\r\n        {in: 0,          out: 558.1},\r\n        {in: maxIB*0.25, out: 556.8},\r\n        {in: maxIB*0.50, out: 555.5},\r\n        {in: maxIB*0.75, out: 555.2},\r\n        {in: maxIB     , out: 555.0},\r\n    ];\r\n\r\n    return interpolateTable(ibFuel, table)*ibFuel/momentSimplifier;\r\n}\r\n\r\nfunction getSingleOBMoment(obFuel){\r\n    const table = [\r\n        {in: 0,          out: 549.0},\r\n        {in: maxOB*0.25, out: 547.7},\r\n        {in: maxOB*0.50, out: 546.4},\r\n        {in: maxOB*0.75, out: 545.7},\r\n        {in: maxOB     , out: 545.2},\r\n    ];\r\n\r\n    return interpolateTable(obFuel, table)*obFuel/momentSimplifier;\r\n}\r\n\r\nfunction getFuelMoment(lext, main1, main2, laux, raux, main3, main4, rext){\r\n    return Math.round(getSingleExtMoment(lext)+getSingleExtMoment(rext)+\r\n        getSingleAuxMoment(laux)+getSingleAuxMoment(raux)+\r\n        getSingleIBMoment(main2)+getSingleIBMoment(main3)+\r\n        getSingleOBMoment(main1)+getSingleOBMoment(main4));\r\n}\r\n\r\nfunction sanitizeFuelState(s){\r\n    const fields=['main1', 'main2', 'main3', 'main4', 'laux', 'raux', 'lext', 'rext'];\r\n    for (const field of fields){\r\n        s[field]=Number(s[field]);\r\n        if (!isFinite(s[field])) s[field]=0;\r\n        if (s[field]<0) s[field]=0;\r\n    }\r\n\r\n    if (s.lext>maxExt) s.lext=maxExt;\r\n    if (s.rext>maxExt) s.rext=maxExt;\r\n    if (s.laux>maxAux) s.laux=maxAux;\r\n    if (s.raux>maxAux) s.raux=maxAux;\r\n    if (s.main1>maxOB) s.main1=maxOB;\r\n    if (s.main4>maxOB) s.main4=maxOB;\r\n    if (s.main2>maxIB) s.main2=maxIB;\r\n    if (s.main3>maxIB) s.main3=maxIB;\r\n\r\n    return s;\r\n}\r\n\r\nfunction addReadOnly(s){\r\n    s.readOnly={\r\n        totalFuel: s.lext+s.rext+s.laux+s.raux+s.main1+s.main2+s.main3+s.main4,\r\n        totalMoment: getFuelMoment(s.lext, s.main1, s.main2, s.laux, s.raux, s.main3, s.main4, s.rext),\r\n        obs: s.main1+s.main4,\r\n        ibs: s.main2+s.main3,\r\n        auxs: s.laux+s.raux,\r\n        exts: s.lext+s.rext\r\n    };\r\n    return s;\r\n}\r\n\r\nfunction fuelReducer(state, action, payload){\r\n\r\n    if (!isGoodObject(state)){\r\n        state=blankFuel;\r\n    }\r\n\r\n    switch (action){\r\n        case 'reset':\r\n            return blankFuel;\r\n\r\n        case 'set-takeoff':\r\n            payload=addReadOnly(sanitizeFuelState(payload));\r\n            return {...state, takeoff: payload};\r\n\r\n        case 'set-landing':\r\n            payload=addReadOnly(sanitizeFuelState(payload));\r\n            return {...state, landing: payload};\r\n\r\n        case 'set':\r\n            payload.takeoff=addReadOnly(sanitizeFuelState(payload.takeoff));\r\n            payload.landing=addReadOnly(sanitizeFuelState(payload.landing));\r\n            return payload;\r\n\r\n        default:\r\n            console.error('unknown fuelReducer action: ', action);\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction useFuelReducer(hysterisis=1000){\r\n    const [fuel, {current: fuelDispatch}] = useStoredReducer('cwab-fuel', fuelReducer, blankFuel, localStorage, hysterisis);\r\n\r\n    return [fuel, fuelDispatch];\r\n}\r\n\r\nexport {useFuelReducer as default, fuelReducer};","\r\n// let localStorageSize=null;\r\n\r\n// function getLocalStorageSize(){\r\n//     if (localStorageSize!==null) return localStorageSize;\r\n\r\n//     localStorageSize=0;\r\n\r\n//     let dataChunk=\"0\".repeat(10223);\r\n//     let keys=[];\r\n//     let count=0;\r\n//     try {\r\n//         while (count<1000){\r\n//                 const key='wab-calcsize'+String(count++).padStart(5,'0');\r\n//                 localStorage.setItem(key, dataChunk);\r\n//                 keys.push(key);\r\n//         }\r\n//     } catch (e) {\r\n//     }\r\n\r\n//     keys.forEach( key => {\r\n//         localStorageSize+=10000+key.length;\r\n//         localStorage.removeItem(key);\r\n//     });\r\n\r\n//     for (let i=0;i<localStorage.length;i++){\r\n//         const key = localStorage.key(i);\r\n//         localStorageSize+=key.length+localStorage.getItem(key).length;\r\n//     }\r\n    \r\n//     return localStorageSize;\r\n// }\r\n\r\nfunction getUsedSpace(){\r\n    let storageUsed=0;\r\n    try {\r\n        for (let i=0;i<localStorage.length;i++){\r\n            const key = localStorage.key(i);\r\n            storageUsed+=key.length+localStorage.getItem(key).length;\r\n        }\r\n    } catch (e) {\r\n    }\r\n    return storageUsed;\r\n}\r\n\r\nexport {getUsedSpace};\r\n","import { useEffect, useState } from \"react\";\r\nimport { Header, Segment, Progress, Button } from \"semantic-ui-react\";\r\n\r\nimport {flushSaveToStorage} from '@dteel/use-stored-reducer/src/saveToStorage';\r\n\r\nimport useAircraftReducer from '../reducers/aircraftReducer';\r\nimport useCargoReducer from '../reducers/cargoReducer';\r\nimport useFuelReducer from \"../reducers/fuelReducer\";\r\n\r\nimport { getUsedSpace } from '../getLocalStorageSize'\r\nimport ConfirmationModal from './ConfirmationModal';\r\n\r\n\r\nfunction getSpaceUsedByWAB(){\r\n    let spaceUsedByWAB = 0;\r\n    try {\r\n        for (let i = 0; i < localStorage.length; i++){\r\n            const key=localStorage.key(i);\r\n            if (key.trim().toLowerCase().startsWith(\"cwab-\")){\r\n                const size=localStorage.getItem(key).length+key.length;\r\n                spaceUsedByWAB+=size;\r\n            }   \r\n        }\r\n    } catch (e) {\r\n    }\r\n    return spaceUsedByWAB;\r\n}\r\n\r\nexport default function Options(){\r\n\r\n    const [aircraft, aircraftDispatch] = useAircraftReducer(0);\r\n    const [cargo, cargoDispatch] = useCargoReducer(0);\r\n    const [fuel, fuelDispatch] = useFuelReducer(0);\r\n\r\n    const [spaceUsedByWAB, setSpaceUsedByWAB] = useState(0);\r\n    const [spaceUsed, setSpaceUsed] = useState(0);\r\n    const [deleteLocalModal, setDeleteLocalModal] = useState(false);\r\n\r\n    useEffect( ()=>{\r\n        flushSaveToStorage();\r\n        setSpaceUsedByWAB(getSpaceUsedByWAB());\r\n        setSpaceUsed(getUsedSpace());\r\n\r\n        const storageChanged = () => {\r\n            setSpaceUsedByWAB(getSpaceUsedByWAB());\r\n            setSpaceUsed(getUsedSpace());\r\n        };\r\n\r\n        window.addEventListener('storage', storageChanged);\r\n        return ()=>window.removeEventListener('storage', storageChanged);\r\n    }, [cargo, aircraft, fuel]);\r\n\r\n    return (\r\n        <>\r\n                <Segment secondary>\r\n                    <Header as='h4' textAlign=\"center\">Local Storage</Header>\r\n\r\n                    <Progress\r\n                        value={spaceUsedByWAB}\r\n                        total={spaceUsed}\r\n                        progress='percent'\r\n                        precision={1}\r\n                        label={'WABs Useage: '+Math.ceil(spaceUsedByWAB/1024)+' Kb / '+Math.ceil(spaceUsed/1024)+' Kb'}\r\n                    />\r\n                    <ConfirmationModal \r\n                        title=\"Are you sure?\"\r\n                        content=\"This will erase everything WAB related on your device, are you sure?\"\r\n                        onNo={()=>setDeleteLocalModal(false)} \r\n                        onYes={()=>{\r\n                            fuelDispatch('reset');\r\n                            cargoDispatch('reset');\r\n                            aircraftDispatch('reset');\r\n                            setDeleteLocalModal(false);\r\n                        }}\r\n                        isOpen={deleteLocalModal}\r\n                    />\r\n                    <Button negative onClick={()=>setDeleteLocalModal(true)}>Clear WAB LocalStorage</Button>\r\n                </Segment>\r\n        </>\r\n    );\r\n}","import TouchInput from '@dteel/touch-input'\r\nimport { Table, Input } from 'semantic-ui-react';\r\n\r\nconst inputStyle={style:{paddingLeft:'5px', paddingRight:'5px'}};\r\n\r\nexport default function IndividualFuel({fuel, setFuel}){\r\n    return <>\r\n        <Table compact size=\"small\" unstackable style={{maxWidth:'650px'}}>\r\n            <Table.Header>\r\n                <Table.Row>\r\n                    <Table.HeaderCell>Total Fuel</Table.HeaderCell>\r\n                    <Table.HeaderCell>Moment</Table.HeaderCell>\r\n                </Table.Row>\r\n            </Table.Header>\r\n            <Table.Body>\r\n                <Table.Row>\r\n                    <Table.Cell>\r\n                        <TouchInput as={Input} \r\n                        value={fuel.readOnly.totalFuel}\r\n                        onChange={(v)=>{\r\n                            const desiredTotalFuel=v;\r\n                            v=Number(v);\r\n                            const mains = Math.max(0, Math.min(31940, v));\r\n                            v=v-31940;//subtract max main fuel tanks\r\n                            const auxs = Math.max(0, Math.min(11620, v));\r\n                            v=v-11620;//subtract max aux tanks\r\n                            const exts= Math.max(0, Math.min(17800, v));\r\n\r\n                            let outboards=Math.max(0, mains/2+650);\r\n                            let inboards=Math.max(0, mains/2-650);\r\n                            if (desiredTotalFuel<6000){\r\n                                outboards=mains/2;\r\n                                inboards=mains/2;\r\n                            }\r\n                            setFuel({\r\n                                main1: outboards/2,\r\n                                main2: inboards/2,\r\n                                main3: inboards/2,\r\n                                main4: outboards/2,\r\n                                laux: auxs/2,\r\n                                raux: auxs/2,\r\n                                lext: exts/2,\r\n                                rext: exts/2\r\n                            });\r\n                        }} fluid  type='number' title='Total Fuel' input={inputStyle}/>\r\n                    </Table.Cell>\r\n                    <Table.Cell>{fuel.readOnly.totalMoment}</Table.Cell>\r\n                </Table.Row>\r\n            </Table.Body>\r\n        </Table>\r\n        <Table compact size=\"small\" unstackable style={{maxWidth: '650px'}}>\r\n            <Table.Header>\r\n                <Table.Row>\r\n                    <Table.HeaderCell textAlign='center'>OBs</Table.HeaderCell>\r\n                    <Table.HeaderCell textAlign='center'>IBs</Table.HeaderCell>\r\n                    <Table.HeaderCell textAlign='center'>AUXs</Table.HeaderCell>\r\n                    <Table.HeaderCell textAlign='center'>EXTs</Table.HeaderCell>\r\n                </Table.Row>\r\n            </Table.Header>\r\n            <Table.Body style={{marginBottom: 0}}>\r\n                <Table.Row>\r\n                    <Table.Cell>\r\n                        <TouchInput as={Input} value={fuel.main1+fuel.main4} onChange={(v)=>{\r\n                            v=Number(v);\r\n                            setFuel({...fuel, main1: v/2, main4: v/2});\r\n                        }} fluid  type='number' title='Outboards' input={inputStyle}/>\r\n                    </Table.Cell>\r\n                    <Table.Cell>\r\n                        <TouchInput as={Input} value={fuel.main2+fuel.main3} onChange={(v)=>{\r\n                            v=Number(v);\r\n                            setFuel({...fuel, main2: v/2, main3: v/2});\r\n                        }} fluid  type='number' title='Inboards' input={inputStyle}/>\r\n                    </Table.Cell>\r\n                    <Table.Cell>\r\n                        <TouchInput as={Input} value={fuel.laux+fuel.raux} onChange={(v)=>{\r\n                            v=Number(v);\r\n                            setFuel({...fuel, laux: v/2, raux: v/2});\r\n                        }} fluid  type='number' title='Auxiliarys' input={inputStyle}/>\r\n                    </Table.Cell>\r\n                    <Table.Cell>\r\n                        <TouchInput as={Input} value={fuel.lext+fuel.rext} onChange={(v)=>{\r\n                            v=Number(v);\r\n                            setFuel({...fuel, lext: v/2, rext: v/2});\r\n                        }} fluid  type='number' title='Externals' input={inputStyle}/>\r\n                    </Table.Cell>\r\n                </Table.Row>\r\n            </Table.Body>\r\n        </Table>\r\n        <Table compact  size=\"small\"  unstackable style={{maxWidth: '650px'}}>\r\n            <Table.Header>\r\n                <Table.Row>\r\n                    <Table.HeaderCell textAlign='center'>L Ext</Table.HeaderCell>\r\n                    <Table.HeaderCell textAlign='center'>Main 1</Table.HeaderCell>\r\n                    <Table.HeaderCell textAlign='center'>Main 2</Table.HeaderCell>\r\n                    <Table.HeaderCell textAlign='center'>L Aux</Table.HeaderCell>\r\n                </Table.Row>\r\n            </Table.Header>\r\n            <Table.Body>\r\n                <Table.Row>\r\n                    <Table.Cell>\r\n                        <TouchInput as={Input} value={fuel.lext} onChange={(v)=>{\r\n                            setFuel({...fuel, lext: v});\r\n                        }} fluid  type='number' title='L Ext' input={inputStyle}/>\r\n                    </Table.Cell>\r\n                    <Table.Cell>\r\n                        <TouchInput as={Input} value={fuel.main1} onChange={(v)=>{\r\n                            setFuel({...fuel, main1: v});\r\n                        }} fluid  type='number' title='Main 1' input={inputStyle}/>\r\n                    </Table.Cell>\r\n                    <Table.Cell>\r\n                        <TouchInput as={Input} value={fuel.main2} onChange={(v)=>{\r\n                            setFuel({...fuel, main2: v});\r\n                        }} fluid  type='number' title='Main 2' input={inputStyle}/>\r\n                    </Table.Cell>\r\n                    <Table.Cell>\r\n                        <TouchInput as={Input} value={fuel.laux} onChange={(v)=>{\r\n                            setFuel({...fuel, laux: v});\r\n                        }} fluid  type='number' title='L Aux' input={inputStyle}/>\r\n                    </Table.Cell>\r\n                </Table.Row>\r\n            </Table.Body>\r\n            <Table.Header>\r\n                <Table.Row>\r\n                    <Table.HeaderCell textAlign='center'>R Aux</Table.HeaderCell>\r\n                    <Table.HeaderCell textAlign='center'>Main 3</Table.HeaderCell>\r\n                    <Table.HeaderCell textAlign='center'>Main 4</Table.HeaderCell>\r\n                    <Table.HeaderCell textAlign='center'>R Ext</Table.HeaderCell>\r\n                </Table.Row>\r\n            </Table.Header>\r\n            <Table.Body>\r\n                <Table.Row>\r\n                    <Table.Cell>\r\n                        <TouchInput as={Input} value={fuel.raux} onChange={(v)=>{\r\n                            setFuel({...fuel, raux: v});\r\n                        }} fluid  type='number' title='R Aux' input={inputStyle}/>\r\n                    </Table.Cell>\r\n                    <Table.Cell>\r\n                        <TouchInput as={Input} value={fuel.main3} onChange={(v)=>{\r\n                            setFuel({...fuel, main3: v});\r\n                        }} fluid  type='number' title='Main 3' input={inputStyle}/>\r\n                    </Table.Cell>\r\n                    <Table.Cell>\r\n                        <TouchInput as={Input} value={fuel.main4} onChange={(v)=>{\r\n                            setFuel({...fuel, main4: v});\r\n                        }} fluid  type='number' title='Main 4' input={inputStyle}/>\r\n                    </Table.Cell>\r\n                    <Table.Cell>\r\n                        <TouchInput as={Input} value={fuel.rext} onChange={(v)=>{\r\n                            setFuel({...fuel, rext: v});\r\n                        }} fluid  type='number' title='R Ext' input={inputStyle}/>\r\n                    </Table.Cell>\r\n                </Table.Row>\r\n            </Table.Body>\r\n        </Table>\r\n    </>\r\n}\r\n","import { Header } from 'semantic-ui-react';\r\n\r\n\r\nimport IndividualFuel from './IndividualFuel';\r\n\r\n\r\nexport default function Fuel({fuel, fuelDispatch}){\r\n    return (\r\n        <>\r\n            <Header textAlign='center'>\r\n                Takeoff Fuel\r\n            </Header>\r\n            <IndividualFuel fuel={fuel.takeoff} setFuel={(newFuel)=>{\r\n                fuelDispatch('set-takeoff', newFuel);\r\n            }}/>\r\n\r\n            <Header textAlign='center'>\r\n                Landing Fuel\r\n            </Header>\r\n            <IndividualFuel fuel={fuel.landing} setFuel={(newFuel)=>{\r\n                fuelDispatch('set-landing', newFuel);\r\n            }}/>\r\n        </>\r\n    );\r\n}","import {useStoredReducer} from '@dteel/use-stored-reducer';\r\n\r\nfunction selectedMenuReducer(state, action, payload) {\r\n    return {page: action, ...payload};\r\n}\r\n\r\nfunction useSelectedMenuReducer(hysterisis=1000){\r\n    const [selectedMenu, {current: selectedMenuDispatch}] = useStoredReducer('cwab-menu', selectedMenuReducer, {page: 'aircraft'}, sessionStorage, hysterisis);\r\n\r\n    return [selectedMenu, selectedMenuDispatch];\r\n}\r\n\r\n\r\nexport {useSelectedMenuReducer as default, selectedMenuReducer};","import {Interpreter, NumberObj, BoolObj, StringObj} from '@dteel/gpdsl';\r\n\r\n//returns true if any of the inputs are null or undefined\r\nfunction isAnyNil(...vals){\r\n\tfor (const a of vals){\r\n\t\tif (a===null || a===undefined) return true;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nfunction isAboutEquals(a, b, allowableDelta=0.00001){\r\n\tif (isAnyNil(a,b)) return false;\r\n\r\n\tif (Math.abs(a-b)<=allowableDelta){\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\n\r\n\r\n///classess\r\nclass Point {\r\n\tconstructor(x,y){\r\n\t\tif (x instanceof Point){//act as a copy constructor\r\n\t\t\tthis.x = x.x;\r\n\t\t\tthis.y = x.y;\r\n\t\t}else{\r\n\t\t\tthis.x = isAnyNil(x) ? 0 : x;\r\n\t\t\tthis.y = isAnyNil(y) ? 0 : y;\r\n\t\t}\r\n\t}\r\n\r\n\tflip(){\r\n\t\tconst tempX=this.x;\r\n\t\tthis.x=this.y;\r\n\t\tthis.y=tempX;\r\n\t}\r\n\r\n\tdistance(otherPoint){\r\n\t\tconst xDiff = Math.abs(otherPoint.x - this.x);\r\n\t\tconst yDiff = Math.abs(otherPoint.y - this.y);\r\n\t\treturn Math.sqrt(xDiff*xDiff + yDiff*yDiff);\r\n\t}\r\n}\r\n\r\nclass Line {\r\n\tconstructor(pointsArray, value=null){\r\n\t\tif (pointsArray instanceof Line){\r\n\t\t\tthis.points=pointsArray.points.map( point => {return new Point(point);} )\r\n\t\t\tthis.value=pointsArray.value;\r\n\t\t}else{\r\n\t\t\tthis.points=pointsArray.map( point => {return new Point(point);} );\r\n\t\t\tthis.value=value;\r\n\t\t}\r\n\t}\r\n\r\n\tflipPoints(){\r\n\t\tfor (const point of this.points){\r\n\t\t\tpoint.flip();\r\n\t\t}\r\n\t}\r\n\r\n\tisLinear(yIsInputAxis){\r\n\t\tif (this.points.length < 2) {\r\n\t\t\treturn false;//line doesnt have enough points to even have one segment\r\n\t\t}\r\n\t\t\r\n\t\tif (isAboutEquals((yIsInputAxis ? this.points[1].y : this.points[1].x), (yIsInputAxis ? this.points[0].y : this.points[0].x))) {\r\n\t\t\treturn false;//first and second point are on the same x/y location, wouldnt be able to determine direction\r\n\t\t}\r\n\t\t\r\n\t\tlet lastX = (yIsInputAxis ? this.points[0].y : this.points[0].x);\r\n\t\tlet goingUp = (yIsInputAxis ? this.points[1].y : this.points[1].x) > lastX;\r\n\t\t\r\n\t\tfor (let i = 1; i < this.points.length; i++) {\r\n\t\t\tif (goingUp) {\r\n\t\t\t\tif ((yIsInputAxis ? this.points[i].y : this.points[i].x) <= lastX){\r\n\t\t\t\t\treturn false;//line x was ascending, but now its going down\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif ((yIsInputAxis ? this.points[i].y : this.points[i].x) >= lastX) {\r\n\t\t\t\t\treturn false;//line x was descending, but now its going up\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlastX = (yIsInputAxis ? this.points[i].y : this.points[i].x);\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\t//Only finds segments in the x axis (flip the points if you want to find it in the y axis)\r\n\tfindSegment(x) {\r\n\t\tif (this.points.length < 2 || this.isLinear(false)===false) {\r\n\t\t\treturn null;//not enough points for even one segment\r\n\t\t}\r\n\t\t\r\n\t\tconst leftX = this.points[0].x;\r\n\t\tconst rightX = this.points[this.points.length-1].x;\r\n\t\t\r\n\t\t//not going to be able to find a segment within the line, so we have to extrapolate\r\n\t\tif ((leftX<rightX && x<leftX) || (rightX<leftX && x>leftX)) {\r\n\t\t\treturn new Segment(this.points[0], this.points[1]);\r\n\t\t} else if ((leftX<rightX && x>rightX) || (rightX<leftX && x<rightX))  {\r\n\t\t\treturn new Segment(this.points[this.points.length - 2],this.points[this.points.length - 1]);\r\n\t\t}\r\n\t\t\r\n\t\tfor (let i = 0; i < this.points.length-1; i++) {\r\n\t\t\tif ((x >= this.points[i].x  &&  x <= this.points[i + 1].x) || (x <= this.points[i].x  &&  x >= this.points[i + 1].x)) {\r\n\t\t\t\treturn new Segment(this.points[i], this.points[i + 1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn null;//should be impossible to get here unless the line is a mess\r\n\t}\r\n\r\n}\r\n\r\nclass Rect {\r\n\tconstructor(pointA, pointB){\r\n\t\tif (pointA instanceof Rect){\r\n\t\t\tthis.pointA=new Point(pointA.pointA);\r\n\t\t\tthis.pointB=new Point(pointA.pointB);\r\n\t\t}else{\r\n\t\t\tthis.pointA=new Point(pointA);\r\n\t\t\tthis.pointB=new Point(pointB);\r\n\t\t}\r\n\t}\r\n\r\n\tisPointInside({x:px, y: py}, padding=undefined){\r\n\t\tif (padding===undefined){\r\n\t\t\treturn ((px >= this.pointA.x && px <= this.pointB.x) || (px >= this.pointB.x && px <= this.pointA.x)) &&\r\n\t\t\t((py >= this.pointA.y && py <= this.pointB.y) || (py >= this.pointB.y && py <= this.pointA.y));\r\n\t\t}else{\r\n\t\t\tconst a=new Point(this.pointA);\r\n\t\t\tconst b=new Point(this.pointB);\r\n\r\n\t\t\tif (a.x<b.x){\r\n\t\t\t\ta.x-=padding; b.x+=padding;\r\n\t\t\t}else{\r\n\t\t\t\ta.x+=padding; b.x-=padding;\r\n\t\t\t}\r\n\t\t\tif (a.y<b.y){\r\n\t\t\t\ta.y-=padding; b.y+=padding;\r\n\t\t\t}else{\r\n\t\t\t\ta.y+=padding; b.y-=padding;\r\n\t\t\t}\r\n\r\n\t\t\tlet paddedRect=new Rect(a, b);\r\n\t\t\treturn paddedRect.isPointInside(new Point(px,py));\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nclass Segment {\r\n\tconstructor(pointA, pointB){\r\n\t\tif (pointA instanceof Segment){\r\n\t\t\tthis.pointA=new Point(pointA.pointA);\r\n\t\t\tthis.pointB=new Point(pointA.pointB);\r\n\t\t}else{\r\n\t\t\tthis.pointA=new Point(pointA);\r\n\t\t\tthis.pointB=new Point(pointB);\r\n\t\t}\r\n\t}\r\n\r\n\tsetPointA(toPoint){\r\n\t\tthis.pointA = new Point(toPoint);\r\n\t}\r\n\tsetPointB(toPoint){\r\n\t\tthis.pointB = new Point(toPoint);\r\n\t}\r\n\r\n\t//Returns null if unable to get an intersection, will return a Point if able.\r\n\t//This should be a static class method, but whatevs.\r\n\tstatic getSegmentIntersectionWith(seg1, seg2, needsToBeTouching){\r\n\t\tconst xy=new Point(0,0);\r\n\t\tconst t = (seg2.pointB.y - seg2.pointA.y)*(seg1.pointB.x - seg1.pointA.x) - (seg2.pointB.x - seg2.pointA.x)*(seg1.pointB.y - seg1.pointA.y);\r\n\t\tif (Math.abs(t)>=0.00001) {//make sure lines arent parallel\r\n\t\t\tconst ua = ((seg2.pointB.x - seg2.pointA.x)*(seg1.pointA.y - seg2.pointA.y) - (seg2.pointB.y - seg2.pointA.y)*(seg1.pointA.x - seg2.pointA.x)) / t;\r\n\t\t\txy.x = seg1.pointA.x + ua * (seg1.pointB.x - seg1.pointA.x);\r\n\t\t\txy.y = seg1.pointA.y + ua * (seg1.pointB.y - seg1.pointA.y);\r\n\t\t\t\r\n\t\t\tif (needsToBeTouching) {\r\n\t\t\t\tconst rect1 = new Rect(seg1.pointA, seg1.pointB);\r\n\t\t\t\tconst rect2 = new Rect(seg2.pointA, seg2.pointB);\r\n\t\t\t\tif (!(rect1.isPointInside(xy) && rect2.isPointInside(xy))) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn xy;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\t//Returns null if unable to get an intersection, will return a Point if able.\r\n\tgetSegmentIntersection(otherSeg, needsToBeTouching){\r\n\t\treturn Segment.getSegmentIntersectionWith(this, otherSeg, needsToBeTouching);\r\n\t}\r\n\r\n\t//Returns null if unable to get an intersection, will return the y value of the intersion if able.\r\n\tstatic figureYCrossingWith(seg1, xAxis){\r\n\t\tconst seg2 = new Segment(new Point(xAxis, -100), new Point(xAxis, 100));\r\n\t\tconst intersection = Segment.getSegmentIntersectionWith(seg1, seg2, false);\r\n\t\tif (intersection != null) {\r\n\t\t\treturn intersection.y;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\t//Returns null if unable to get an intersection, will return the y value of the intersion if able.\r\n\tfigureYCrossing(xAxis){\r\n\t\treturn Segment.figureYCrossingWith(this, xAxis);\r\n\t}\r\n}\r\n\r\n\r\nclass ChartObject {\r\n\tconstructor(name=\"\", type=\"chartobject\", initialValue=null){\r\n\t\tthis.name=name;\r\n\t\tthis.type=type;\r\n\t\tthis.value=initialValue;\r\n\t}\r\n\r\n\tcalc(chartObjectArray, alertsArray, noticesArray){//Meant to be overridden at child class\r\n\t}\r\n}\r\n\r\nclass LinearChart extends ChartObject {\r\n\tconstructor(name=\"\", yIsInputAxis=false, xOrYRefObj=null, zRefObj=null, ...lines){\r\n\t\tsuper(name, \"linear\", null);\r\n\r\n\t\tthis.yIsInputAxis=yIsInputAxis;\r\n\r\n\t\tthis.xOrYRefObj=xOrYRefObj;\r\n\t\tthis.zRefObj=zRefObj;\r\n\r\n\t\tif (Array.isArray(lines)){\r\n\t\t\tthis.lines=lines.map( line => {return new Line(line);} );\r\n\t\t\tif (yIsInputAxis){\r\n\t\t\t\tthis.lines.forEach( line => {line.flipPoints();} )\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.lines=[];\r\n\t\t}\r\n\t}\r\n\r\n\tcalc(chartObjectArray, alertsArray, noticesArray){\r\n\t\tif (isAnyNil(this.xOrYRefObj, this.zRefObj)){\r\n\t\t\tthis.value=null;\r\n\t\t}else{\r\n\t\t\tthis.value = this.figureChart(this.xOrYRefObj.value, this.zRefObj.value);\r\n\t\t}\r\n\t}\r\n\r\n\tfigureChart(xOrYIn, zIn){\r\n\t\tif (isAnyNil(xOrYIn,zIn)) return null;\r\n\t\tlet belowLine=null;\r\n\t\tlet aboveLine=null;\r\n\t\tlet linesAreSame=false;\r\n\r\n\t\tfor (let currentLine of this.lines){\r\n\t\t\tif (isAboutEquals(currentLine.value, zIn)){\r\n\t\t\t\tbelowLine=currentLine;\r\n\t\t\t\taboveLine=currentLine;\r\n\t\t\t\tlinesAreSame=true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif (currentLine.value < zIn){\r\n\t\t\t\tif (belowLine){\r\n\t\t\t\t\tif (belowLine.value < currentLine.value) belowLine=currentLine;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbelowLine=currentLine;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (currentLine.value > zIn){\r\n\t\t\t\tif (aboveLine){\r\n\t\t\t\t\tif (aboveLine.value > currentLine.value) aboveLine=currentLine;\r\n\t\t\t\t}else{\r\n\t\t\t\t\taboveLine=currentLine;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (isAnyNil(aboveLine, belowLine)) return null;\r\n\r\n\t\tlet aboveCrossing=aboveLine.findSegment(xOrYIn)?.figureYCrossing(xOrYIn);\r\n\t\tif (linesAreSame) return aboveCrossing;\r\n\r\n\t\tlet belowCrossing=belowLine.findSegment(xOrYIn)?.figureYCrossing(xOrYIn);\r\n\r\n\t\tif (isAnyNil(aboveCrossing, belowCrossing)) return null;\r\n\r\n\t\treturn ((zIn - belowLine.value) / (aboveLine.value - belowLine.value))*(aboveCrossing - belowCrossing) + belowCrossing;\r\n\t}\r\n}\r\n\r\nclass ClampChart extends ChartObject {\r\n\r\n\tconstructor(name=\"\", yIsInputAxis=false, xOrYRefObj=null, valueToClampRefObj=null, minLine=null, maxLine=null){\r\n\tsuper(name, \"clamp\", null);\r\n\t\r\n\t\tthis.yIsInputAxis=yIsInputAxis;\r\n\r\n\t\tthis.xOrYRefObj=xOrYRefObj;\r\n\t\tthis.valueToClampRefObj=valueToClampRefObj;\r\n\r\n\t\tthis.minLine=isAnyNil(minLine) ? null : new Line(minLine);\r\n\t\tthis.maxLine=isAnyNil(maxLine) ? null : new Line(maxLine);\r\n\t\tif (yIsInputAxis){\r\n\t\t\tthis.minLine.flipPoints();\r\n\t\t\tthis.maxLine.flipPoints();    \r\n\t\t}\r\n\t}\r\n\r\n\tcalc(chartObjectArray, alertsArray, noticesArray){\r\n\t\tif (isAnyNil(this.xOrYRefObj, this.valueToClampRefObj)){\r\n\t\t\tthis.value=null;\r\n\t\t}else{\r\n\t\t\tthis.value=this.figureClamp(this.xOrYRefObj.value, this.valueToClampRefObj.value);\r\n\t\t}\r\n\t}\r\n\r\n\tfigureClamp(xOrYIn, valueToClamp){\r\n\t\tif (isAnyNil(xOrYIn, valueToClamp)) return null;\r\n\t\t\r\n\t\tif (this.minLine?.points.length>0) {\r\n\t\t\tconst minValue=this.minLine.findSegment(xOrYIn)?.figureYCrossing(xOrYIn);\r\n\t\t\tif (!minValue) return null;\r\n\t\r\n\t\t\tif (valueToClamp < minValue) valueToClamp = minValue;\r\n\t\t}\r\n\r\n\t\tif (this.maxLine?.points.length>0) {\r\n\t\t\tconst maxValue=this.maxLine.findSegment(xOrYIn)?.figureYCrossing(xOrYIn);\r\n\t\t\tif (!maxValue) return null;\r\n\t\r\n\t\t\tif (valueToClamp > maxValue) valueToClamp = maxValue;\r\n\t\t}\r\n\r\n\t\treturn valueToClamp;\r\n\t}\r\n}\r\n\r\nclass TrendChart extends ChartObject{\r\n\tconstructor(name=\"\", yIsInputAxis=false, xOrYRefObj=null, entryPointRefObj=null, exitPointRefObj=null, ...lines){\r\n\t\tsuper(name, \"trend\", null);\r\n\r\n\t\tthis.yIsInputAxis=yIsInputAxis;\r\n\r\n\t\tthis.xOrYRefObj=xOrYRefObj;\r\n\t\tthis.entryPointRefObj=entryPointRefObj;\r\n\t\tthis.exitPointRefObj=exitPointRefObj;\r\n\r\n\t\tif (Array.isArray(lines)){\r\n\t\t\tthis.lines=lines.map( line => {return new Line(line);} );\r\n\t\t\tif (!yIsInputAxis){\r\n\t\t\t\tthis.lines.forEach( line => {line.flipPoints();} )//we flip the points when yIsInputAxis==false for trendcharts\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.lines=[];\r\n\t\t}\r\n\t}\r\n\r\n\tcalc(chartObjectArray, alertsArray, noticesArray){\r\n\t\tif (isAnyNil(this.xOrYRefObj, this.entryPointRefObj, this.exitPointRefObj)){\r\n\t\t\tthis.value=null;\r\n\t\t}else{\r\n\t\t\tthis.value=this.figureTrend(this.xOrYRefObj.value, this.entryPointRefObj.value, this.exitPointRefObj.value);\r\n\t\t}\r\n\t}\r\n\r\n\tfigureTrend(xOrYIn, entryPoint, exitPoint){\r\n\t\tif (isAnyNil(xOrYIn, entryPoint, exitPoint)) return null;\r\n\r\n\t\tlet leftLineFind=null;\r\n\t\tlet rightLineFind=null;\r\n\t\tlet leftEntryCross=0;\r\n\t\tlet rightEntryCross=0;\r\n\t\t\r\n\t\tfor (let currentLine of this.lines){\r\n\t\t\tlet yCrossing = currentLine.findSegment(entryPoint)?.figureYCrossing(entryPoint);\r\n\t\t\tif (yCrossing){//should we hard fail here? It would highlight bad data. Maybe it should.\r\n\t\t\t\tif (yCrossing>=xOrYIn){\r\n\t\t\t\t\tif (rightLineFind){\r\n\t\t\t\t\t\tif (yCrossing<rightEntryCross){\r\n\t\t\t\t\t\t\trightLineFind=currentLine;\r\n\t\t\t\t\t\t\trightEntryCross=yCrossing\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\trightLineFind=currentLine;\r\n\t\t\t\t\t\trightEntryCross=yCrossing;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (yCrossing<=xOrYIn){\r\n\t\t\t\t\tif (leftLineFind){\r\n\t\t\t\t\t\tif (yCrossing>leftEntryCross){\r\n\t\t\t\t\t\t\tleftLineFind=currentLine;\r\n\t\t\t\t\t\t\tleftEntryCross=yCrossing\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tleftLineFind=currentLine;\r\n\t\t\t\t\t\tleftEntryCross=yCrossing;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (isAnyNil(leftLineFind, rightLineFind)) return null;\r\n\t\r\n\t\tconst leftEndCross = leftLineFind.findSegment(exitPoint)?.figureYCrossing(exitPoint);\r\n\t\tif (leftLineFind===rightLineFind || isAboutEquals(rightEntryCross, leftEntryCross)){\r\n\t\t\treturn leftEndCross;\r\n\t\t}\r\n\t\tconst rightEndCross = rightLineFind.findSegment(exitPoint)?.figureYCrossing(exitPoint);\r\n\r\n\t\tif (isAnyNil(leftEndCross, rightEndCross)) return null;\r\n\t\t\r\n\t\tlet entryRatio=(xOrYIn - leftEntryCross) / (rightEntryCross - leftEntryCross);\r\n\t\treturn (rightEndCross - leftEndCross) * entryRatio + leftEndCross;\r\n\t}\r\n}\r\n\r\nclass PolyChart extends ChartObject{\r\n\tconstructor(name=\"\", xInRefObj=null, yInRefObj=null, ...lines){\r\n\t\tsuper(name, \"poly\", null);\r\n\r\n\t\tthis.xInRefObj=xInRefObj;\r\n\t\tthis.yInRefObj=yInRefObj;\r\n\r\n\t\tif (Array.isArray(lines)){\r\n\t\t\tthis.lines=lines.map( line => {return new Line(line);} );\r\n\t\t}else{\r\n\t\t\tthis.lines=[];\r\n\t\t}\r\n\t}\r\n\r\n\tcalc(chartObjectArray, alertsArray, noticesArray){\r\n\t\tif (isAnyNil(this.xInRefObj, this.yInRefObj)){\r\n\t\t\tthis.value=null;\r\n\t\t}else{\r\n\t\t\tthis.value=this.figurePoly(this.xInRefObj.value, this.yInRefObj.value);\r\n\t\t}\r\n\t}\r\n\r\n\tfigurePoly(xIn, yIn){\r\n\t\tif (isAnyNil(xIn, yIn)) return null;\r\n\r\n\t\tlet minX=0;\r\n\t\tlet maxX=0;\r\n\t\tfor (let currentLine of this.lines){\r\n\t\t\tfor (let currentPoint of currentLine.points){\r\n\t\t\t\tif (currentPoint.x>maxX) maxX=currentPoint.x;\r\n\t\t\t\tif (currentPoint.x<minX) minX=currentPoint.x;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet horizSeg = new Segment(new Point(minX-1, yIn), new Point(maxX+1,yIn));\r\n\t\tlet curSeg = new Segment();\r\n\r\n\t\tfor (let currentLine of this.lines) {\r\n\t\t\tlet intersectsLeftOfX = 0;\r\n\r\n\t\t\tif (currentLine.points.length > 2) {\r\n\t\t\t\tfor (let i = 0; i < currentLine.points.length; i++) {\r\n\t\t\t\t\tcurSeg.setPointA(currentLine.points[i])\r\n\t\t\t\t\tif (i === currentLine.points.length - 1) {\r\n\t\t\t\t\t\tcurSeg.setPointB(currentLine.points[0]);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcurSeg.setPointB(currentLine.points[i+1]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (curSeg.getSegmentIntersection(horizSeg, true)?.x <= xIn){\r\n\t\t\t\t\t\tintersectsLeftOfX++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (intersectsLeftOfX > 0 && intersectsLeftOfX%2 > 0) {\r\n\t\t\t\t\treturn currentLine.value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nclass ChartTableEntry {\r\n\tconstructor(refObj, value){\r\n\t\tif (refObj instanceof ChartTableEntry){\r\n\t\t\tthis.refObj=refObj.refObj;\r\n\t\t\tthis.value=refObj.value;\r\n\t\t}else{\r\n\t\t\tthis.refObj=refObj;\r\n\t\t\tthis.value=value;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass ChartTable extends ChartObject {\r\n\tconstructor(name=\"\", inputRefObj=null, ...table){\r\n\t\tsuper(name, \"table\", null);\r\n\r\n\t\tthis.inputRefObj=inputRefObj;\r\n\r\n\t\tif (Array.isArray(table)){\r\n\t\t\tthis.table=table.map( entry => {return new ChartTableEntry(entry);} );\r\n\t\t}else{\r\n\t\t\tthis.table=[];\r\n\t\t}\r\n\t}\r\n\r\n\tfigureTable(inValue){\r\n\t\tif (isAnyNil(inValue)) return null;\r\n\t\tlet below=null;\r\n\t\tlet above=null;\r\n\r\n\t\tfor (let item of this.table) {\r\n\t\t\tif (isAboutEquals(item.value, inValue)) {\r\n\t\t\t\tbelow = item;\r\n\t\t\t\tabove = item;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif (item.value <= inValue) {\r\n\t\t\t\tif (below){\r\n\t\t\t\t\tif (item.value>below.value) below=item;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbelow=item;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (item.value >= inValue) {\r\n\t\t\t\tif (above){\r\n\t\t\t\t\tif (item.value<above.value) above=item;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tabove=item;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (isAnyNil(above?.refObj?.value, below?.refObj?.value)) return null;\r\n\r\n\t\tif (below===above || isAboutEquals(below.refObj.value, above.refObj.value)){\r\n\t\t\treturn above.refObj.value;\r\n\t\t}\r\n\r\n\t\tconst resultDiff = above.refObj.value - below.refObj.value;\r\n\t\tconst valDiff = above.value - below.value;\r\n\t\treturn ((inValue - below.value) / valDiff) * resultDiff + below.refObj.value;\r\n\t}\r\n\r\n\tcalc(chartObjectArray, alertsArray, noticesArray){\r\n\t\tif (isAnyNil(this.inputRefObj)){ \r\n\t\t\tthis.value=null;\r\n\t\t}else{\r\n\t\t\tthis.value=this.figureTable(this.inputRefObj.value)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass ChartConstant extends ChartObject {\r\n\tconstructor(name=\"\", value=0){\r\n\t\tsuper(name, \"constant\", value);\r\n\t}\r\n}\r\n\r\nclass ScriptRuntime {\r\n\tconstructor(chartObjectArray, alertsArray, noticesArray){\r\n\t\tthis.chartObjectArray=chartObjectArray;\r\n\t\tthis.alertsArray=alertsArray;\r\n\t\tthis.noticesArray=noticesArray;\r\n\t}\r\n\r\n\tfindChart = (name, type) => {\r\n\t\tif (name===null || type===null) return null;\r\n\t\tfor (const obj of this.chartObjectArray){\r\n\t\t\tif (obj.name===name && obj.type===type){\r\n\t\t\t\treturn obj;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tlinear = (popFn) => {\r\n\t\tconst z=popFn();\r\n\t\tconst x=popFn();\r\n\t\tconst chartName=popFn();\r\n\r\n\t\tconst chart=this.findChart(chartName.value, 'linear');\r\n\r\n\t\tif (z.value==null || x.value==null || chart==null) return new NumberObj(null, null, false);\r\n\r\n\t\treturn new NumberObj(null, chart.figureChart(x.value, z.value), false);\r\n\t}\r\n\tclamp = (popFn) => {\r\n\t\tconst value=popFn();\r\n\t\tconst x=popFn();\r\n\t\tconst chartName=popFn();\r\n\r\n\t\tconst chart=this.findChart(chartName.value, 'clamp');\r\n\r\n\t\tif (value.value==null || x.value==null || chart==null) return new NumberObj(null, null, false);\r\n\r\n\t\treturn new NumberObj(null, chart.figureClamp(x.value, value.value), false);\r\n\t}\r\n\tpoly = (popFn) => {\r\n\t\tconst y=popFn();\r\n\t\tconst x=popFn();\r\n\t\tconst chartName=popFn();\r\n\r\n\t\tconst chart=this.findChart(chartName.value, 'poly');\r\n\r\n\t\tif (y.value==null || x.value==null || chart==null) return new NumberObj(null, null, false);\r\n\r\n\t\treturn new NumberObj(null, chart.figurePoly(x.value, y.value), false);\r\n\t}\r\n\ttrend = (popFn) => {\r\n\t\tconst exit=popFn();\r\n\t\tconst entry=popFn();\r\n\t\tconst value=popFn();\r\n\t\tconst chartName=popFn();\r\n\r\n\t\tconst chart=this.findChart(chartName.value, 'trend');\r\n\r\n\t\tif (exit.value==null || entry.value==null || value.value==null || chart==null) return new NumberObj(null, null, false);\r\n\r\n\t\treturn new NumberObj(null, chart.figureTrend(value.value, entry.value, exit.value), false);\r\n\r\n\t}\r\n\talert = (popFn) => {\r\n\t\tthis.alertsArray.push(popFn().value);\r\n\t\treturn new BoolObj(null, null, false);\r\n\t}\r\n\r\n\tnotice = (popFn) => {\r\n\t\tthis.noticesArray.push(popFn().value);\r\n\t\treturn new BoolObj(null, null, false);\r\n\t}\r\n\r\n\tbuildExternList = (thisObj) => {\r\n\t\tconst externs=[\r\n\t\t\tInterpreter.funcDef(\"runLinear\", this.linear, \"double\", \"string\", \"double\", \"double\"),\r\n\t\t\tInterpreter.funcDef(\"runClamp\", this.clamp, \"double\", \"string\", \"double\", \"double\"),\r\n\t\t\tInterpreter.funcDef(\"runPoly\", this.poly, \"double\", \"string\", \"double\", \"double\"),\r\n\t\t\tInterpreter.funcDef(\"runTrend\", this.trend, \"double\", \"string\", \"double\", \"double\", \"double\"),\r\n\t\t\tInterpreter.funcDef(\"alert\", this.alert, \"bool\", \"string\"),\r\n\t\t\tInterpreter.funcDef(\"notice\", this.notice, \"bool\", \"string\")\r\n\t\t];\r\n\r\n\t\tif (this.chartObjectArray){\r\n\t\t\tfor (const obj of this.chartObjectArray){\r\n\t\t\t\tif (obj.type==='constant'){\r\n\t\t\t\t\texterns.push(new NumberObj(obj.name, obj.value, true));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (thisObj && thisObj.type!=='input'){\r\n\t\t\t\tfor (const obj of this.chartObjectArray){\r\n\t\t\t\t\tif (obj.type==='input'){\r\n\t\t\t\t\t\texterns.push(new NumberObj(obj.name, obj.value, true));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tfor (const obj of this.chartObjectArray){\r\n\t\t\t\t\tif (obj.name===thisObj.name) break;\r\n\t\t\t\t\tif (obj.type!=='input' && obj.type!=='constant'){\r\n\t\t\t\t\t\texterns.push(new NumberObj(obj.name, obj.value, true));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn externs;\r\n\t}\r\n}\r\n\r\nclass ChartInput extends ChartObject {\r\n\tconstructor(name=\"\", script=\"\", initialValue=null){\r\n\t\tsuper(name, \"input\", null);\r\n\t\tthis.script=script;\r\n\t\tthis.invalid=false;\r\n\t\tthis.input=initialValue;\r\n\t}\r\n\r\n\tcalc(chartObjectArray, alertsArray, noticesArray){\r\n\t\tconst interpreter = new Interpreter();\r\n\t\tconst scriptRuntime = new ScriptRuntime(chartObjectArray, alertsArray, noticesArray);\r\n\r\n\t\tconst externs=scriptRuntime.buildExternList(this);\r\n\t\tconst thisObj = new StringObj('input', this.input, true);\r\n\t\texterns.push(thisObj);\r\n\t\tconst invalidObj = new BoolObj('invalid', false, false);\r\n\t\texterns.push(invalidObj);\r\n\r\n\t\tconst result=interpreter.runCode(this.script, \"double\", true, false, externs);\r\n\t\tif (result.error){\r\n\t\t\tconsole.log(this.name, \" error -> \",result.error.message);\r\n\t\t\talertsArray.push(\"Error running \"+this.name+\" input script -> \"+result.error);\r\n\t\t\tthis.invalid=true;\r\n\t\t\tthis.value=null;\r\n\t\t}else{\r\n\t\t\tthis.invalid=Boolean(invalidObj.value);\r\n\t\t\tthis.value=result.exitObject.value;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass ChartScript extends ChartObject {\r\n\tconstructor(name=\"\", script=\"\"){\r\n\t\tsuper(name, \"script\", null);\r\n\t\tthis.script=script;\r\n\t}\r\n\r\n\tcalc(chartObjectArray, alertsArray, noticesArray){\r\n\t\tconst interpreter = new Interpreter();\r\n\t\tconst scriptRuntime = new ScriptRuntime(chartObjectArray, alertsArray, noticesArray);\r\n\t\tconst result=interpreter.runCode(this.script, \"double\", true, false, scriptRuntime.buildExternList(this));\r\n\t\tif (result.error){\r\n\t\t\tconsole.log(this.name, \" error -> \",result.error.message);\r\n\t\t\talertsArray.push(\"Error executing \"+this.name+\" script -> \"+result.error);\r\n\t\t\tthis.value=null;\r\n\t\t}else{\r\n\t\t\tthis.value=result.exitObject.value;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport {Point, Line, ChartObject, LinearChart, ClampChart, TrendChart, PolyChart, ChartTableEntry, ChartTable, ChartInput, ChartScript, ChartConstant};\r\n","import { Table, Input, Button, Header } from 'semantic-ui-react';\r\n\r\nimport useAircraftReducer from '../reducers/aircraftReducer';\r\nimport useCargoReducer from '../reducers/cargoReducer';\r\nimport useFuelReducer from \"../reducers/fuelReducer\";\r\n\r\nimport ChartProject from '../charts';\r\n\r\nimport { toMAC, calcArm, displayVal } from '../common';\r\n\r\nconst charts = new ChartProject();\r\n\r\nfunction displayOpArea(val){\r\n    if (val===0) return 'A';\r\n    if (val===1) return 'B';\r\n    if (val===2) return 'C';\r\n    if (val===3) return 'D';\r\n    return 'E';\r\n}\r\n\r\nexport default function Calced(){\r\n    const [aircraft, aircraftDispatch] = useAircraftReducer(1000);\r\n    const [fuel, fuelDispatch] = useFuelReducer(1000);\r\n    const [cargo, cargoDispatch] = useCargoReducer(1000);\r\n\r\n    let cargoWeight=0;\r\n    let cargoMoment=0;\r\n    for (const item of cargo){\r\n        cargoWeight+=item.weight;\r\n        cargoMoment+=item.moment;\r\n    }\r\n\r\n    charts.$operatingWeight.input=aircraft.readOnly.operatingWeight;\r\n    charts.$fuelWeight.input=fuel.takeoff.readOnly.totalFuel;\r\n    charts.$cargoWeight.input=cargoWeight;\r\n    charts.calc();\r\n\r\n    const takeoffMAC = toMAC(calcArm(aircraft.readOnly.operatingWeight+cargoWeight+fuel.takeoff.readOnly.totalFuel, aircraft.readOnly.operatingMoment+cargoMoment+fuel.takeoff.readOnly.totalMoment));\r\n    const takeoffForwardCG = charts.$externalFuelforwardCG.value;\r\n    const takeoffAftCG = charts.$externalFuelAftCG.value;\r\n    const takeoffOpArea = displayOpArea(charts.$operatingAreaFoamExtAR.value);\r\n    console.log(charts.$operatingAreaFoamExtAR);\r\n\r\n    charts.$fuelWeight.input=fuel.landing.readOnly.totalFuel;\r\n    charts.calc();\r\n\r\n    const landingMAC = toMAC(calcArm(aircraft.readOnly.operatingWeight+cargoWeight+fuel.landing.readOnly.totalFuel, aircraft.readOnly.operatingMoment+cargoMoment+fuel.landing.readOnly.totalMoment));\r\n    const landingForwardCG = charts.$externalFuelforwardCG.value;\r\n    const landingAftCG = charts.$externalFuelAftCG.value;\r\n    const landingOpArea = displayOpArea(charts.$operatingAreaFoamExtAR.value);\r\n    return (\r\n        <>\r\n            <Header textAlign='center'>\r\n                Calced\r\n            </Header>\r\n            <Table unstackable style={{maxWidth: '650px'}}>\r\n                <Table.Header>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell textAlign='center'>Op Weight</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Moment</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>%MAC</Table.HeaderCell>\r\n                    </Table.Row>\r\n                </Table.Header>\r\n                <Table.Body>\r\n                    <Table.Row>\r\n                        <Table.Cell textAlign='center'>{aircraft.readOnly.operatingWeight}</Table.Cell>\r\n                        <Table.Cell textAlign='center'>{aircraft.readOnly.operatingMoment}</Table.Cell>\r\n                        <Table.Cell textAlign='center'>{toMAC(calcArm(aircraft.readOnly.operatingWeight, aircraft.readOnly.operatingMoment))}%</Table.Cell>\r\n                    </Table.Row>\r\n                </Table.Body>\r\n                <Table.Header>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell textAlign='center'>Zero Fuel Weight</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Moment</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>%MAC</Table.HeaderCell>\r\n                    </Table.Row>\r\n                </Table.Header>\r\n                <Table.Body>\r\n                    <Table.Row>\r\n                        <Table.Cell textAlign='center'>{aircraft.readOnly.operatingWeight+cargoWeight}</Table.Cell>\r\n                        <Table.Cell textAlign='center'>{aircraft.readOnly.operatingMoment+cargoMoment}</Table.Cell>\r\n                        <Table.Cell textAlign='center'>{toMAC(calcArm(aircraft.readOnly.operatingWeight+cargoWeight, aircraft.readOnly.operatingMoment+cargoMoment))}%</Table.Cell>\r\n                    </Table.Row>\r\n                </Table.Body>\r\n            </Table>\r\n            <Table unstackable style={{maxWidth: '650px'}}>\r\n                <Table.Header>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell textAlign='center'>Takeoff Weight</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Moment</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>%MAC</Table.HeaderCell>\r\n                    </Table.Row>\r\n                </Table.Header>\r\n                <Table.Body>\r\n                    <Table.Row>\r\n                        <Table.Cell textAlign='center'>{aircraft.readOnly.operatingWeight+cargoWeight+fuel.takeoff.readOnly.totalFuel}</Table.Cell>\r\n                        <Table.Cell textAlign='center'>{aircraft.readOnly.operatingMoment+cargoMoment+fuel.takeoff.readOnly.totalMoment}</Table.Cell>\r\n                        <Table.Cell textAlign='center'>\r\n                            {takeoffMAC}%\r\n                        </Table.Cell>\r\n                    </Table.Row>\r\n                </Table.Body>\r\n                <Table.Header>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell textAlign='center'>Op Area</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>For CG Limit</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Aft CG Limit</Table.HeaderCell>\r\n                    </Table.Row>\r\n                </Table.Header>\r\n                <Table.Body>\r\n                    <Table.Row>\r\n                        <Table.Cell textAlign='center'>{takeoffOpArea}</Table.Cell>\r\n                        <Table.Cell textAlign='center'>{displayVal(takeoffForwardCG,1)}%</Table.Cell>\r\n                        <Table.Cell textAlign='center'>{displayVal(takeoffAftCG,1)}%</Table.Cell>\r\n                    </Table.Row>\r\n                </Table.Body>\r\n            </Table>\r\n            <Table unstackable style={{maxWidth: '650px'}}>\r\n                <Table.Header>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell textAlign='center'>Landing Weight</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Moment</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>%MAC</Table.HeaderCell>\r\n                    </Table.Row>\r\n                </Table.Header>\r\n                <Table.Body>\r\n                    <Table.Row>\r\n                        <Table.Cell textAlign='center'>{aircraft.readOnly.operatingWeight+cargoWeight+fuel.landing.readOnly.totalFuel}</Table.Cell>\r\n                        <Table.Cell textAlign='center'>{aircraft.readOnly.operatingMoment+cargoMoment+fuel.landing.readOnly.totalMoment}</Table.Cell>\r\n                        <Table.Cell textAlign='center'>\r\n                            {landingMAC}%\r\n                        </Table.Cell>\r\n                    </Table.Row>\r\n                </Table.Body>\r\n                <Table.Header>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell textAlign='center'>Op Area</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>For CG Limit</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Aft CG Limit</Table.HeaderCell>\r\n                    </Table.Row>\r\n                </Table.Header>\r\n                <Table.Body>\r\n                    <Table.Row>\r\n                        <Table.Cell textAlign='center'>{landingOpArea}</Table.Cell>\r\n                        <Table.Cell textAlign='center'>{displayVal(landingForwardCG,1)}%</Table.Cell>\r\n                        <Table.Cell textAlign='center'>{displayVal(landingAftCG,1)}%</Table.Cell>\r\n                    </Table.Row>\r\n                </Table.Body>\r\n            </Table>\r\n        </>\r\n    );\r\n}","import {Point,Line,LinearChart,ClampChart,TrendChart,PolyChart,ChartTableEntry,ChartTable,ChartInput,ChartScript,ChartConstant} from './ChartObjects';\n\nexport default class ChartProject{\n\tconstructor(){\n\t\tconst O=true;\n\t\tconst F=false;\n\t\tconst T=this;\n\t\tconst P=(x,y)=>{return new Point(x,y);};\n\t\tconst L=(val,...points)=>{return new Line(points,val);};\n\t\tT._$1=new ChartConstant('zero',0);\n\t\tT.$operatingWeight=new ChartInput('operatingWeight','exit double(input);','80000');\n\t\tT.$fuelWeight=new ChartInput('fuelWeight','exit double(input);','60590');\n\t\tT.$cargoWeight=new ChartInput('cargoWeight','exit double(input);','0');\n\t\tT._$5=new ChartScript('grossWeight','exit operatingWeight+fuelWeight+cargoWeight;');\n\t\tT._$6=new ChartScript('zeroFuelWeight','exit operatingWeight+cargoWeight;');\n\t\tT.$externalFuelforwardCG=new LinearChart('externalFuelforwardCG',O,T._$5,T._$1,L(0,P(26.813,174990.853),P(24.815,158087.342),P(23.023,143364.138),P(21.926,134688.733),P(20.884,127810.283),P(19.995,123129.834),P(19.032,118682.115),P(18.089,115501.478),P(17.818,114458.825),P(16.771,108852.63),P(15.531,103039.564),P(15.06,100970.858),P(15.047,69501.234)));\n\t\tT.$externalFuelAftCG=new LinearChart('externalFuelAftCG',O,T._$5,T._$1,L(0,P(29.104,175001.479),P(29.092,150482.045),P(29.122,131863.684),P(29.978,127698.22),P(29.984,114949.377),P(29.11,105356.187),P(28.375,97814.174),P(27.513,89861.924),P(26.989,85444.008),P(26.061,78533.125),P(25.331,73957.427),P(24.699,69918.189)));\n\t\tT.$noExternalFuelForwardCG=new LinearChart('noExternalFuelForwardCG',O,T._$5,T._$1,L(0,P(15.047,69501.234),P(15.06,100970.858),P(15.531,103039.564),P(16.771,108852.63),P(18.394,117932.14),P(19.932,127760.903),P(21.189,137156.68),P(22.496,148241.099),P(23.67,159282.22),P(24.629,168894.49),P(25.225,175086.178)));\n\t\tT.$noExternalFuelAftCG=new LinearChart('noExternalFuelAftCG',O,T._$5,T._$1,L(0,P(24.699,69918.189),P(25.331,73957.427),P(26.061,78533.125),P(26.989,85444.008),P(27.513,89861.924),P(28.375,97814.174),P(29.11,105356.187),P(29.984,114949.377),P(29.978,127698.22),P(29.995,175012.734)));\n\t\tT.$operatingAreaFoamExtAR=new PolyChart('operatingAreaFoamExtAR',T.$fuelWeight,T._$6,L(0,P(-121.984,102094.804),P(2228.694,102119.533),P(13784.132,113370.955),P(31352.356,120171.265),P(42957.281,108548.917),P(53949.933,101106.062),P(60551.976,94434.865),P(60537.305,79670.259),P(-98.537,79660.76)),L(1,P(-121.984,102094.804),P(2228.694,102119.533),P(13784.132,113370.955),P(31352.356,120171.265),P(42957.281,108548.917),P(53949.933,101106.062),P(28015.745,126965.57),P(24972.236,130007.164),P(21433.847,130031.892),P(14307.581,123478.866),P(4632.686,114255.173),P(2356.24,112153.259),P(-68.669,112153.259)),L(2,P(-68.669,112153.259),P(2356.24,112153.259),P(4632.686,114255.173),P(14307.581,123478.866),P(21433.847,130031.892),P(24972.236,130007.164),P(28015.745,126965.57),P(53949.933,101106.062),P(60525.811,94428.358),P(60567.247,103371.041),P(51392.316,112585.588),P(42308.225,121573.176),P(32610.959,131377.817),P(29136.294,134850.294),P(21051.454,134872.99),P(12164.698,132937.567),P(2306.751,128376.906),P(-135.453,128376.906)),L(3,P(40013.038,134889.69),P(60589.078,114232.036),P(60567.247,103371.041),P(51392.316,112585.588),P(42308.225,121573.176),P(32610.959,131377.817),P(29136.294,134850.294)));\n\n\t\tT.calcArray=[T._$1,T.$operatingWeight,T.$fuelWeight,T.$cargoWeight,T._$5,T._$6,T.$externalFuelforwardCG,T.$externalFuelAftCG,T.$noExternalFuelForwardCG,T.$noExternalFuelAftCG,T.$operatingAreaFoamExtAR,];\n\t}\n\n\tcalcInputs=()=>{\n\t\tconst alerts=[];\n\t\tconst notices=[];\n\t\tfor (let obj of this.calcArray){\n\t\t\tif (obj.type==='input') obj.calc(this.calcArray, alerts, notices);\n\t\t}\n\t\treturn [alerts, notices];\n\t};\n\n\tcalc=()=>{\n\t\tconst alerts=[];\n\t\tconst notices=[];\n\t\tfor (let obj of this.calcArray){\n\t\t\tobj.calc(this.calcArray, alerts, notices);\n\t\t}\n\t\treturn [alerts, notices];\n\t};\n}","import React from 'react';\r\nimport { Container, Header, Segment } from 'semantic-ui-react';\r\nimport WABMenu from './components/WABMenu';\r\nimport Aircraft from './components/Aircraft';\r\nimport Cargo from './components/Cargo';\r\nimport Options from './components/Options';\r\nimport Fuel from './components/Fuel';\r\n\r\nimport useAircraftReducer from './reducers/aircraftReducer';\r\nimport useSelectedMenuReducer from './reducers/selectedMenuReducer';\r\nimport useCargoReducer from './reducers/cargoReducer';\r\nimport useFuelReducer from './reducers/fuelReducer';\r\nimport Calced from './components/Calced';\r\n\r\nconst menuItems=[\r\n    {page: 'aircraft', title: 'Aircraft'},\r\n    {page: 'fuel', title: 'Fuel'},\r\n    {page: 'cargo', title: 'Cargo'},\r\n    {page: 'calced',title: 'Calced'},\r\n    {page: 'options', title: 'Options'},\r\n]\r\n\r\n\r\n\r\n\r\nfunction App() {\r\n    const [selectedMenu, selectedMenuDispatch] = useSelectedMenuReducer(1000);\r\n    const [aircraft, aircraftDispatch] = useAircraftReducer(1000);\r\n    const [fuel, fuelDispatch] = useFuelReducer(1000);\r\n    const [cargo, cargoDispatch] = useCargoReducer(1000);\r\n\r\n    let pageToShow=null;\r\n\r\n    if (selectedMenu?.page==='aircraft'){\r\n        pageToShow=<Aircraft aircraft={aircraft} aircraftDispatch={aircraftDispatch}/>\r\n    }else if (selectedMenu?.page==='fuel'){\r\n        pageToShow=<Fuel fuel={fuel} fuelDispatch={fuelDispatch}/>\r\n    }else if (selectedMenu?.page==='cargo'){\r\n        pageToShow=<Cargo cargo={cargo} cargoDispatch={cargoDispatch}/>\r\n    }else if (selectedMenu?.page==='calced'){\r\n        pageToShow=<Calced/>\r\n    }else if (selectedMenu?.page==='options'){\r\n        pageToShow=<Options/>\r\n    }else{\r\n        selectedMenuDispatch('aircraft');\r\n    }\r\n\r\n    return ( \r\n        <Container style={{flexGrow:1, margin:0}}>\r\n            <Segment inverted attached=\"top\">\r\n                <Header as='h1' textAlign=\"center\">CWAB</Header>\r\n                <Header as='h6' textAlign='center' style={{color:'#FFFFFF33'}}>Reference Use Only</Header>\r\n            </Segment>\r\n            <WABMenu menuItems={menuItems} selectedMenu={selectedMenu} selectedMenuDispatch={selectedMenuDispatch}/>\r\n            <Segment attached=\"bottom\" secondary style={{alignItems:'center', display:'flex', flexDirection:'column'}}>\r\n                {pageToShow}\r\n            </Segment>\r\n        </Container>\r\n    );\r\n}\r\n\r\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './assets/fomantic/semantic.min.css';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <div className='background'>\n      <App/>\n    </div>\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}