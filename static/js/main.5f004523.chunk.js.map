{"version":3,"sources":["components/WABMenu.js","common.js","components/CrewCalcModal.js","components/Aircraft.js","useSorted.js","components/ConfirmationModal.js","components/Cargo.js","reducers/aircraftReducer.js","reducers/cargoReducer.js","reducers/fuelReducer.js","getLocalStorageSize.js","components/Options.js","components/IndividualFuel.js","components/Fuel.js","reducers/selectedMenuReducer.js","components/RawRows.js","components/RawOutput.js","components/CPRaw.js","ChartObjects.js","reducers/outputReducer.js","components/Output.js","App.js","charts.js","index.js"],"names":["WABMenu","_ref","menuItems","selectedMenu","selectedMenuDispatch","page","_jsx","Menu","attached","style","overflowX","overflowY","touchAction","children","map","item","Item","name","title","active","onClick","realNumber","string","real","Number","isFinite","toMAC","arm","Math","round","calcArm","weight","moment","divider","arguments","length","undefined","formatArm","formatMoment","formatWeight","calcMoment","isAboutEquals","a","b","smallestDiff","abs","displayVal","number","formatted","decimal","toFixed","i","isGoodObject","obj","Array","isArray","markUpScriptCache","markUpSpanKeyIndex","markUpScript","chartObj","code","script","space","output","indentLevel","tokenList","Tokenizer","tokenize","newLine","push","outputTextWithColor","text","color","outputText","outputOp","pop","outputElse","popTo","trim","token","type","TokenType","LineDelim","NewLine","Double","String","Bool","DoubleLiteral","value","StringLiteral","includes","Ident","True","False","Null","LeftParen","RightParen","LeftSqaure","RightSqaure","Comma","Dot","Not","And","Or","Plus","Minus","Divide","Multiply","Mod","Exponent","Question","Colon","Assignment","Equals","NotEquals","Lesser","Greater","LesserEquals","GreaterEquals","Min","Max","Abs","Clamp","Floor","Ceil","LCase","UCase","Trim","Len","SubStr","While","For","Loop","If","Else","Break","LeftCurly","RightCurly","Return","Exit","simplified","accum","val","defaultCrew","checked","CrewCalcModal","setCrewData","open","setOpen","useState","crew","setCrew","_Fragment","_jsxs","Modal","onClose","onOpen","trigger","Button","icon","Icon","ModalHeader","ModalContent","List","size","member","ListItem","padding","Checkbox","onChange","e","data","newCrew","label","ModalActions","inputStyle","paddingLeft","paddingRight","Aircraft","aircraft","aircraftDispatch","Header","textAlign","Table","unstackable","maxWidth","Row","HeaderCell","Body","Cell","TouchInput","as","Input","basicWeight","v","fluid","input","basicMoment","columns","crewWeight","crewMoment","_ref2","baggageWeight","baggageMoment","stewardsWeight","stewardsMoment","emergencyWeight","emergencyMoment","extraWeight","extraMoment","readOnly","operatingWeight","operatingMoment","sortReducer","state","key","dir","matchSort","sortObj","getSortedList","sorted","sortDetails","list","sortGetterArgs","listCopy","sortDetail","find","details","sort","aVal","bVal","getter","localeCompare","Date","console","warn","ConfirmationModal","onYes","onNo","isOpen","content","Content","Description","Actions","positive","noPadCell","border","deleteCell","Cargo","cargo","cargoDispatch","deleteItemId","_setDeleteItemId","itemList","sortBy","items","sortedDispatch","useReducer","_len","_key","bind","useSorted","armTotal","weightTotal","momentTotal","forEach","setDeleteItemId","id","sortable","className","colSpan","display","alignItems","Group","vertical","labelPosition","flexGrow","fontSize","width","collapsing","disabled","fitted","expended","floated","negative","Footer","emptyAircraft","aircraftReducer","action","payload","s","fields","field","sanitizeAircraft","error","useAircraftReducer","hysterisis","current","useStoredReducer","localStorage","sanitizeCargo","Boolean","cargoReducer","callback","expectedArm","index","element","entries","filter","newItem","arrayOfObjs","property","newKey","currentKey","getUniqueId","useCargoReducer","itemGroup","itemGroupDispatch","maxAux","maxExt","maxIB","maxOB","momentSimplifier","blankSingleFuel","lext","main1","main2","laux","raux","main3","main4","rext","totalFuel","totalMoment","obs","ibs","auxs","exts","blankFuel","takeoff","landing","interpolateTable","valueIn","table","below","above","in","out","resultDiff","valDiff","getSingleAuxMoment","auxFuel","getSingleExtMoment","extFuel","getSingleIBMoment","ibFuel","getSingleOBMoment","obFuel","sanitizeFuelState","addReadOnly","fuelReducer","useFuelReducer","fuel","fuelDispatch","getUsedSpace","storageUsed","getItem","getSpaceUsedByWAB","spaceUsedByWAB","toLowerCase","startsWith","Options","setSpaceUsedByWAB","spaceUsed","setSpaceUsed","deleteLocalModal","setDeleteLocalModal","useEffect","flushSaveToStorage","storageChanged","window","addEventListener","removeEventListener","Segment","secondary","Progress","total","progress","precision","ceil","IndividualFuel","setFuel","compact","desiredTotalFuel","mains","max","min","outboards","inboards","marginBottom","Fuel","newFuel","selectedMenuReducer","objectTypeMap","linear","clamp","trend","poly","constant","RawRows","chartProject","detailed","rows","Object","calcArray","Message","margin","xOrYRefObj","zRefObj","valueToClampRefObj","basic","marginLeft","marginRight","yIsInputAxis","entryPointRefObj","exitPointRefObj","xInRefObj","yInRefObj","inputRefObj","refObj","React","Fragment","fontWeight","RawOutput","props","CPRaw","cargoWeightTakeoff","cargoWeightLanding","charts","$operatingWeight","$fuelWeightTakeoff","$fuelWeightLanding","$cargoWeightTakeoff","$cargoWeightLanding","calc","isAnyNil","vals","allowableDelta","Point","constructor","x","y","this","flip","tempX","distance","otherPoint","xDiff","yDiff","sqrt","Line","pointsArray","points","point","flipPoints","isLinear","lastX","goingUp","findSegment","leftX","rightX","Rect","pointA","pointB","isPointInside","px","py","setPointA","toPoint","setPointB","getSegmentIntersectionWith","seg1","seg2","needsToBeTouching","xy","t","ua","rect1","rect2","getSegmentIntersection","otherSeg","figureYCrossingWith","xAxis","intersection","figureYCrossing","ChartObject","initialValue","chartObjectArray","alertsArray","noticesArray","LinearChart","super","_len2","lines","_key2","line","figureChart","xOrYIn","zIn","_aboveLine$findSegmen","_belowLine$findSegmen","belowLine","aboveLine","linesAreSame","currentLine","aboveCrossing","belowCrossing","PolyChart","_len4","_key4","figurePoly","xIn","yIn","minX","maxX","currentPoint","horizSeg","curSeg","intersectsLeftOfX","_curSeg$getSegmentInt","ChartConstant","ScriptRuntime","findChart","popFn","z","chartName","chart","NumberObj","figureClamp","exit","entry","figureTrend","alert","BoolObj","notice","buildExternList","thisObj","externs","Interpreter","funcDef","ChartInput","invalid","interpreter","StringObj","invalidObj","result","runCode","log","message","exitObject","ChartScript","scriptRuntime","blankOutputSettings","allowableLandingWeight","allowableTakeoffWeight","whichOpArea","outputSettingsReducer","displayOpArea","limitingFuelOptions","TableCellFormatted","decimalPlaces","pre","post","rest","TableCell","Output","outputSettings","outputSettingsDispatch","useOutputReducer","cargoMomentTakeoff","cargoMomentLanding","totalAicraftWeight","totalAircraftMoment","takeoffZeroFuelWeight","takeoffZeroFuelMoment","landingZeroFuelWeight","landingZeroFuelMoment","takeoffWeight","takeoffMoment","takeoffMAC","takeoffHasFuelInExternals","takeoffForwardCG","$extForwardCGTakeoff","$noExtForwardCGTakeoff","takeoffAftCG","$extAftCGTakeoff","$noExtAftCGTakeoff","takeoffOpArea","$operatingAreaTakeoff","landingWeight","landingMoment","landingMAC","landingHasFuelInExternals","landingForwardCG","$extForwardCGLanding","$noExtForwardCGLanding","landingAftCG","$extAftCGLanding","$noExtAftCGLanding","landingOpArea","$operatingAreaLanding","limitingFuelMaxZFW","A","$areaAMaxZFWOverall","B","$areaBMaxZFWOverall","C","$areaCMaxZFWOverall","D","$areaDMaxZFWOverall","celled","TableHeader","TableRow","TableHeaderCell","TableBody","Dropdown","options","calcInputs","alerts","notices","O","F","T","P","L","_$1","$takeoffGrossWeight","$landingGrossWeight","$takeoffZeroFuelWeight","$landingZeroFuelWeight","_$21","_$23","_$25","_$27","App","sessionStorage","useSelectedMenuReducer","pageToShow","Container","inverted","flexDirection","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5f004523.chunk.js","sourcesContent":["import { Menu } from \"semantic-ui-react\";\r\nexport default function WABMenu({menuItems, selectedMenu, selectedMenuDispatch}){\r\n    if (!selectedMenu || !selectedMenu.page) selectedMenuDispatch(menuItems[0].page);\r\n\r\n    return (\r\n            <Menu attached style={{overflowX: 'auto', overflowY:'clip', touchAction:'pan-x pan-y'}}>\r\n                {\r\n                    menuItems.map( item => <Menu.Item\r\n                        style={{touchAction:'pan-x pan-y'}}\r\n                        key={\"menu\"+item.page}\r\n                        name={item.title}\r\n                        active={selectedMenu?.page === item.page}\r\n                        onClick={()=>selectedMenuDispatch(item.page)}\r\n                    />)\r\n                }\r\n            </Menu>\r\n    );\r\n}","import {Tokenizer, TokenType} from '@dteel/gpdsl';\r\n\r\nconst momentSimplifier=1000;\r\n\r\nfunction realNumber(string){\r\n    let real = Number(string);\r\n    if (!isFinite(real)) real=0;\r\n    return real;\r\n}\r\n\r\nfunction toMAC(arm){\r\n    return Math.round((100*(Number(arm)-487.4))/164.5*10)/10;\r\n}\r\n\r\nfunction calcArm(weight, moment, divider=100){\r\n    return formatArm((formatMoment(moment)*momentSimplifier)/formatWeight(weight), divider);\r\n}\r\n\r\nfunction calcMoment(weight, arm){\r\n    return formatMoment((Number(weight)*Number(arm))/momentSimplifier);\r\n}\r\n\r\nfunction formatArm(arm, divider=100){\r\n    arm=realNumber(arm);\r\n    return Math.round(arm*divider)/divider;\r\n}\r\n\r\nfunction formatWeight(weight){\r\n    weight=realNumber(weight);\r\n    return Math.round(weight*100)/100;\r\n}\r\n\r\nfunction formatMoment(moment){\r\n    return Math.round(realNumber(moment)*10000)/10000;\r\n}\r\n\r\nfunction isAboutEquals(a,b, smallestDiff=0.0000001){\r\n    a=realNumber(a);\r\n    b=realNumber(b);\r\n    if (Math.abs(a-b)<smallestDiff){\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nfunction displayVal(number, decimal=0){\r\n    number=Number(number);\r\n    if (!isFinite(number)) number=0;\r\n\r\n    let formatted;\r\n    if (decimal>=0){\r\n        formatted=number.toFixed(decimal);\r\n    }else{\r\n        formatted=number;\r\n        for (let i=0;i>decimal;i--){\r\n            formatted/=10;\r\n        }\r\n        formatted=Math.round(formatted);\r\n        for (let i=0;i>decimal;i--){\r\n            formatted*=10;\r\n        }\r\n    }\r\n    return formatted;\r\n}\r\n\r\nfunction getUniqueId(arrayOfObjs, property){\r\n    let newKey = 0;\r\n    try {\r\n        for (const item of arrayOfObjs){\r\n            let currentKey = Number(item[property]);\r\n            if (!isFinite(currentKey)) currentKey = 0;\r\n            if (newKey<=currentKey) newKey = currentKey+1;\r\n        }\r\n    } catch {\r\n    }\r\n    return newKey;\r\n}\r\n\r\nfunction isGoodObject(obj){\r\n    return !(typeof obj!=='object' || Array.isArray(obj) || obj===null);\r\n}\r\n\r\n\r\nconst markUpScriptCache=[];\r\nlet markUpSpanKeyIndex=0;\r\nfunction markUpScript(chartObj){\r\n    if (markUpScriptCache[chartObj.name]){\r\n        return markUpScriptCache[chartObj.name];\r\n    }\r\n    const code=chartObj.script;\r\n    const tab='   ';\r\n    const space=' ';\r\n    const output=[];\r\n    let indentLevel=0;\r\n    const tokenizer=new Tokenizer();\r\n    const tokenList=tokenizer.tokenize(code);\r\n    const newLine = () => {\r\n        output.push('\\n');\r\n        for (let i=0;i<indentLevel;i++){\r\n            output.push(tab);\r\n        }\r\n    }\r\n    const outputTextWithColor = (text, color) => {\r\n        output.push(<span key={\"colorSpan\"+markUpSpanKeyIndex++} style={{color: color}}>{text}</span>);\r\n    }\r\n    const outputText = (text) => {\r\n        output.push(text);\r\n    }\r\n    const outputOp = (text)=>{\r\n        if (output.length-1 >= 0){\r\n            if (output[output.length-1]===space){\r\n                output.pop();\r\n            }\r\n        }\r\n        outputText(text);\r\n    }\r\n    const outputElse = () => {\r\n        let popTo=null;\r\n        for (let i=output.length-1; i>=0 ; i--){\r\n            if (typeof output[i]!==\"string\" || (output[i].trim()!==\"\" && output[i]!=='}')){\r\n                outputTextWithColor('else', '#90090');\r\n                outputText(space);\r\n                return;\r\n            }\r\n            if (output[i]==='}') break;\r\n            popTo=i;\r\n        }\r\n        for (;output.length>popTo; output.pop());\r\n        outputTextWithColor('else', '#900090');\r\n        outputText(space);\r\n    }\r\n    for (const token of tokenList){\r\n        switch (token.type){\r\n            case TokenType.LineDelim:\r\n                outputOp(';');\r\n                newLine();\r\n                break;\r\n            case TokenType.NewLine:\r\n                break;\r\n            case TokenType.Double:\r\n                outputTextWithColor('double', '#0000FF');\r\n                outputText(space);\r\n                break;\r\n            case TokenType.String:\r\n                outputTextWithColor('string', '#0000FF');\r\n                outputText(space);\r\n                break;\r\n            case TokenType.Bool:\r\n                outputTextWithColor('bool', '#0000FF');\r\n                outputText(space);\r\n                break;\r\n         \r\n            case TokenType.DoubleLiteral:\r\n                outputTextWithColor(String(token.value), '#995050');\r\n                break;\r\n\r\n            case TokenType.StringLiteral:\r\n                if (token.value.includes('\"')){\r\n                    outputTextWithColor(\"'\"+token.value+\"'\", '#009900');\r\n                }else{\r\n                    outputTextWithColor('\"'+token.value+'\"', '#009900');\r\n                }\r\n                break;\r\n            case TokenType.Ident:\r\n                outputTextWithColor(token.value, '#4090D0');\r\n                outputText(space);\r\n                break;\r\n         \r\n            case TokenType.True:\r\n                outputTextWithColor('true', '#995050');\r\n                break;\r\n            case TokenType.False:\r\n                outputTextWithColor('false', '#995050');\r\n                break;\r\n            case TokenType.Null:\r\n                outputTextWithColor('null', '#995050');\r\n                break;\r\n         \r\n            case TokenType.LeftParen:\r\n                outputOp('(');\r\n                break;\r\n            case TokenType.RightParen:\r\n                outputOp(')');\r\n                outputText(space);\r\n                break;\r\n            case TokenType.LeftSqaure:\r\n                outputOp('[');\r\n                break;\r\n            case TokenType.RightSqaure:\r\n                outputOp(']');\r\n                break;\r\n         \r\n            case TokenType.Comma:\r\n                outputOp(', ');\r\n                break;\r\n            case TokenType.Dot:\r\n                outputOp('.');\r\n                break;\r\n         \r\n            case TokenType.Not:\r\n                outputOp('!');\r\n                break;\r\n            case TokenType.And:\r\n                outputOp(' && ');\r\n                break;\r\n            case TokenType.Or:\r\n                outputOp(' || ');\r\n                break;\r\n            case TokenType.Plus:\r\n                outputOp('+');\r\n                break;\r\n            case TokenType.Minus:\r\n                outputOp('-');\r\n                break;\r\n            case TokenType.Divide:\r\n                outputOp('/');\r\n                break;\r\n            case TokenType.Multiply:\r\n                outputOp('*');\r\n                break;\r\n            case TokenType.Mod:\r\n                outputOp('%');\r\n                break;\r\n            case TokenType.Exponent:\r\n                outputOp('^');\r\n                break;\r\n         \r\n            case TokenType.Question:\r\n                outputOp('?');\r\n                break;\r\n            case TokenType.Colon:\r\n                outputOp(':');\r\n                break;\r\n         \r\n            case TokenType.Assignment:\r\n                outputOp('=');\r\n                break;\r\n            case TokenType.Equals:\r\n                outputOp('==');\r\n                break;\r\n            case TokenType.NotEquals:\r\n                outputOp('!=');\r\n                break;\r\n            case TokenType.Lesser:\r\n                outputOp('<');\r\n                break;\r\n            case TokenType.Greater:\r\n                outputOp('>');\r\n                break;\r\n            case TokenType.LesserEquals:\r\n                outputOp('<=');\r\n                break;\r\n            case TokenType.GreaterEquals:\r\n                outputOp('>=');\r\n                break;\r\n         \r\n            case TokenType.Min:\r\n                outputTextWithColor('min', '#C05050');\r\n                break;\r\n            case TokenType.Max:\r\n                outputTextWithColor('max', '#C05050');\r\n                break;\r\n            case TokenType.Abs:\r\n                outputTextWithColor('abs', '#C05050');\r\n                break;\r\n            case TokenType.Clamp:\r\n                outputTextWithColor('clamp', '#C05050');\r\n                break;\r\n            case TokenType.Floor:\r\n                outputTextWithColor('floor', '#C05050');\r\n                break;\r\n            case TokenType.Ceil:\r\n                outputTextWithColor('ceil', '#C05050');\r\n                break;\r\n         \r\n            case TokenType.LCase:\r\n                outputTextWithColor('lcase', '#C05050');\r\n                break;\r\n            case TokenType.UCase:\r\n                outputTextWithColor('ucase', '#C05050');\r\n                break;\r\n            case TokenType.Trim:\r\n                outputTextWithColor('trim', '#C05050');\r\n                break;\r\n            case TokenType.Len:\r\n                outputTextWithColor('len', '#C05050');\r\n                break;\r\n            case TokenType.SubStr:\r\n                outputTextWithColor('substr', '#C05050');\r\n                break;\r\n         \r\n            case TokenType.While:\r\n                outputTextWithColor('while ', '#900090');\r\n                break;\r\n            case TokenType.For:\r\n                outputTextWithColor('for ', '#900090');\r\n                break;\r\n            case TokenType.Loop:\r\n                outputTextWithColor('loop ', '#900090');\r\n                break;\r\n            case TokenType.If:\r\n                outputTextWithColor('if ', '#900090');\r\n                break;\r\n            case TokenType.Else:\r\n                outputElse();\r\n                break;\r\n            case TokenType.Break:\r\n                outputTextWithColor('break', '#900090');\r\n                break;\r\n            case TokenType.LeftCurly:\r\n                outputText('{');\r\n                indentLevel++;\r\n                newLine();\r\n                break;\r\n            case TokenType.RightCurly:\r\n                if (output[output.length-1]===tab) output.pop();\r\n                outputText('}');\r\n                indentLevel--;\r\n                newLine();\r\n                break;\r\n         \r\n            case TokenType.Return:\r\n                outputTextWithColor('return', '#D08070');\r\n                outputText(space);\r\n                break;\r\n            case TokenType.Exit:\r\n                outputTextWithColor('exit', '#D08070');\r\n                outputText(space);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    \r\n    let simplified=[];\r\n    let accum=\"\";\r\n    for (let val of output){\r\n        if (typeof val===\"string\"){\r\n            accum+=val;\r\n        }else{\r\n            simplified.push(accum);\r\n            accum=\"\";\r\n            simplified.push(val);\r\n        }\r\n    }\r\n    if (accum.trim().length) simplified.push(accum);\r\n\r\n    markUpScriptCache[chartObj.name]=<pre>{simplified}</pre>;\r\n    return markUpScriptCache[chartObj.name];\r\n}\r\n\r\nexport {toMAC, calcArm, calcMoment, realNumber, formatArm, formatWeight, formatMoment, isAboutEquals, displayVal, getUniqueId, isGoodObject, momentSimplifier, markUpScript};","import {useState} from 'react';\r\nimport { Table, Input, Button, Header, Icon, Modal, ModalHeader, ModalDescription, ModalContent, ModalActions, Checkbox, List, ListItem } from 'semantic-ui-react';\r\nimport { calcArm, calcMoment } from '../common';\r\n\r\n\r\nconst defaultCrew=[\r\n    {name: 'Pilot',         weight: 200, arm: 140, checked: true},\r\n    {name: 'Copilot',       weight: 200, arm: 140, checked: true},\r\n    {name: 'CSO',           weight: 200, arm: 194, checked: false},\r\n    {name: 'AFDS',          weight: 200, arm: 227, checked: false},\r\n    {name: 'Extra Cockpit', weight: 200, arm: 227, checked: false},\r\n    \r\n    {name: 'Fwd Left LM',   weight: 200, arm: 281, checked: false},\r\n    {name: 'Fwd Right LM',  weight: 200, arm: 281, checked: false},\r\n    {name: 'Aft Left LM',   weight: 200, arm: 710, checked: true},\r\n    {name: 'Aft Right LM',  weight: 200, arm: 710, checked: false},\r\n];\r\n\r\nexport default function CrewCalcModal({setCrewData}){\r\n    const [open, setOpen] = useState(false);\r\n    const [crew, setCrew]=useState(defaultCrew);\r\n\r\n    return <>\r\n        <Modal \r\n            onClose={()=>{}}\r\n            onOpen={()=>{setOpen(true)}}\r\n            open={open}\r\n            trigger={<Button icon><Icon name='calculator'/></Button>}\r\n        >\r\n            <ModalHeader>\r\n                Crew Calc\r\n            </ModalHeader>\r\n            <ModalContent>\r\n                <List size='huge'>\r\n                {\r\n                    crew.map(member=>(\r\n                        <ListItem style={{padding:'5px'}}>\r\n                        <Checkbox\r\n                            onChange={(e, data)=>{\r\n                                const newCrew=[...crew];\r\n                                for (const a of newCrew){\r\n                                    if (a.name===member.name){\r\n                                        a.checked=data.checked;\r\n                                    }\r\n                                }\r\n                                setCrew(newCrew);\r\n                            }}\r\n                            checked={member.checked}\r\n                            label={member.name+' '+member.weight+'lbs at FS '+member.arm}\r\n                        />\r\n                        </ListItem>\r\n                    ))\r\n                }\r\n                </List>\r\n            </ModalContent>\r\n            <ModalActions>\r\n                <Button\r\n                    color='green' \r\n                    onClick={()=>{\r\n                        let weight=0;\r\n                        let moment=0;\r\n                        for (const member of crew){\r\n                            if (member.checked){\r\n                                weight+=member.weight;\r\n                                moment+=calcMoment(member.weight, member.arm);\r\n                            }\r\n                        }\r\n                        setCrewData({weight, moment});\r\n                        setOpen(false);\r\n                    }}\r\n                >\r\n                    Save\r\n                </Button>\r\n                <Button color='red' onClick={()=>{\r\n                    setOpen(false);\r\n                }}>Cancel</Button>\r\n            </ModalActions>\r\n        </Modal>\r\n    </>\r\n\r\n}","import TouchInput from '@dteel/touch-input'\r\nimport { Table, Input, Button, Header, Icon, ModalHeader, ModalDescription, ModalContent, ModalActions } from 'semantic-ui-react';\r\n\r\nimport {useState} from 'react';\r\n\r\nimport { calcArm, calcMoment, toMAC } from '../common';\r\nimport CrewCalcModal from './CrewCalcModal';\r\n\r\nconst noPadCell={padding:'1px', border:'none'};\r\nconst deleteCell={padding:'0px 4px 0px 0px', border:'none'};\r\nconst inputStyle={style:{paddingLeft:'5px', paddingRight:'5px'}};\r\n\r\n\r\n\r\nexport default function Aircraft({aircraft, aircraftDispatch}){\r\n\r\n    return (\r\n        <>\r\n            <Header textAlign='center'>\r\n                Aircraft\r\n            </Header>\r\n            <Table unstackable style={{maxWidth: '650px'}}>\r\n                <Table.Header>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell textAlign='center'>Basic Weight</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Moment</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Arm</Table.HeaderCell>\r\n                    </Table.Row>\r\n                </Table.Header>\r\n                <Table.Body>\r\n                    <Table.Row>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={aircraft.basicWeight} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, basicWeight: v})\r\n                            }} fluid type='number' title='Basic Weight' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={aircraft.basicMoment} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, basicMoment: v})\r\n                            }} fluid type='number' title='Basic Moment' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={calcArm(aircraft.basicWeight, aircraft.basicMoment)} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, basicMoment: calcMoment(aircraft.basicWeight, v)})\r\n                            }} fluid type='number' title='Basic Arm' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                    </Table.Row>\r\n                </Table.Body>\r\n            </Table>\r\n            <Table unstackable style={{maxWidth: '650px'}} columns={3}>\r\n                <Table.Header>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell textAlign='center'>Crew Weight</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Moment</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Arm</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'></Table.HeaderCell>\r\n                    </Table.Row>\r\n                </Table.Header>\r\n                <Table.Body>\r\n                    <Table.Row>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={aircraft.crewWeight} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, crewWeight: v})\r\n                            }} fluid type='number' title='Crew Weight' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={aircraft.crewMoment} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, crewMoment: v})\r\n                            }} fluid type='number' title='Crew Moment' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={calcArm(aircraft.crewWeight, aircraft.crewMoment)} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, crewMoment: calcMoment(aircraft.crewWeight, v)})\r\n                            }} fluid type='number' title='Crew Arm' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                        <Table.Cell>\r\n                            <CrewCalcModal setCrewData={({weight, moment})=>{\r\n                                aircraftDispatch('set', {...aircraft, crewWeight: weight, crewMoment: moment})\r\n                            }}/>\r\n                        </Table.Cell>\r\n                    </Table.Row>\r\n                </Table.Body>\r\n                <Table.Header>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell textAlign='center'>Crew Bag Weight</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Moment</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Arm</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'></Table.HeaderCell>\r\n                    </Table.Row>\r\n                </Table.Header>\r\n                <Table.Body>\r\n                    <Table.Row>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={aircraft.baggageWeight} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, baggageWeight: v})\r\n                            }} fluid type='number' title='Crew Bags Weight' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={aircraft.baggageMoment} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, baggageMoment: v})\r\n                            }} fluid type='number' title='Crew Bags Moment' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={calcArm(aircraft.baggageWeight, aircraft.baggageMoment)} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, baggageMoment: calcMoment(aircraft.baggageWeight, v)})\r\n                            }} fluid type='number' title='Crew Bags Arm' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                    </Table.Row>\r\n                </Table.Body>\r\n                <Table.Header>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell textAlign='center'>Stewards Weight</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Moment</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Arm</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'></Table.HeaderCell>\r\n                    </Table.Row>\r\n                </Table.Header>\r\n                <Table.Body>\r\n                    <Table.Row>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={aircraft.stewardsWeight} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, stewardsWeight: v})\r\n                            }} fluid type='number' title='Stewards Weight' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={aircraft.stewardsMoment} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, stewardsMoment: v})\r\n                            }} fluid type='number' title='Stewards Moment' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={calcArm(aircraft.stewardsWeight, aircraft.stewardsMoment)} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, stewardsMoment: calcMoment(aircraft.stewardsWeight, v)})\r\n                            }} fluid type='number' title='Stewards Arm' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                    </Table.Row>\r\n                </Table.Body>\r\n                <Table.Header>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell textAlign='center'>Emerg Weight</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Moment</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Arm</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'></Table.HeaderCell>\r\n                    </Table.Row>\r\n                </Table.Header>\r\n                <Table.Body>\r\n                    <Table.Row>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={aircraft.emergencyWeight} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, emergencyWeight: v})\r\n                            }} fluid type='number' title='Emerg Weight' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={aircraft.emergencyMoment} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, emergencyMoment: v})\r\n                            }} fluid type='number' title='Emerg Moment' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={calcArm(aircraft.emergencyWeight, aircraft.emergencyMoment)} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, emergencyMoment: calcMoment(aircraft.emergencyWeight, v)})\r\n                            }} fluid type='number' title='Emerg Arm' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                    </Table.Row>\r\n                </Table.Body>\r\n                <Table.Header>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell textAlign='center'>Extra Weight</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Moment</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Arm</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'></Table.HeaderCell>\r\n                    </Table.Row>\r\n                </Table.Header>\r\n                <Table.Body>\r\n                    <Table.Row>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={aircraft.extraWeight} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, extraWeight: v})\r\n                            }} fluid type='number' title='Extra Weight' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={aircraft.extraMoment} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, extraMoment: v})\r\n                            }} fluid type='number' title='Extra Moment' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={calcArm(aircraft.extraWeight, aircraft.extraMoment)} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, extraMoment: calcMoment(aircraft.extraWeight, v)})\r\n                            }} fluid type='number' title='Extra Arm' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                    </Table.Row>\r\n                </Table.Body>\r\n            </Table>\r\n            \r\n            <Table unstackable style={{maxWidth: '650px'}}>\r\n                <Table.Header>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell textAlign='center'>Op Weight</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Moment</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Arm</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>%MAC</Table.HeaderCell>\r\n                    </Table.Row>\r\n                </Table.Header>\r\n                <Table.Body>\r\n                    <Table.Row>\r\n                        <Table.Cell textAlign='center'>\r\n                            {aircraft.readOnly.operatingWeight}\r\n                        </Table.Cell>\r\n                        <Table.Cell textAlign='center'>\r\n                            {aircraft.readOnly.operatingMoment}\r\n                        </Table.Cell>\r\n                        <Table.Cell textAlign='center'>\r\n                            {calcArm(aircraft.readOnly.operatingWeight, aircraft.readOnly.operatingMoment)}\r\n                        </Table.Cell>\r\n                        <Table.Cell textAlign='center'>\r\n                            {toMAC(calcArm(aircraft.readOnly.operatingWeight, aircraft.readOnly.operatingMoment))}%\r\n                        </Table.Cell>\r\n                    </Table.Row>\r\n                </Table.Body>\r\n            </Table>\r\n        </>\r\n    );\r\n}","import { useReducer } from \"react\";\r\n\r\nfunction sortReducer(state, key){\r\n    if (key===state.key){\r\n        if (state.dir===1){\r\n            return {key, dir: -1};\r\n        }\r\n        return {key: null, dir: 0};\r\n    }\r\n    return {key, dir: 1};\r\n}\r\n\r\nfunction matchSort(sortObj, key){\r\n    if (sortObj && sortObj.key===key){\r\n        return sortObj.dir>0?'ascending':'descending';\r\n    }\r\n    return null;\r\n}\r\n\r\nfunction getSortedList(sorted, sortDetails, list, sortGetterArgs){\r\n    if (!Array.isArray(list)) return list;\r\n    const listCopy=[...list];\r\n    if (sorted.key!==null){\r\n        const sortDetail=sortDetails.find( details => details.key===sorted.key);\r\n        if (sortDetail){\r\n            listCopy.sort( (a, b) => {\r\n                let aVal, bVal;\r\n                if (typeof sortDetail.getter==='function'){\r\n                    aVal=sortDetail.getter(a, ...sortGetterArgs);\r\n                    bVal=sortDetail.getter(b, ...sortGetterArgs);\r\n                }else{\r\n                    aVal=a[sorted.key];\r\n                    bVal=b[sorted.key];\r\n                }\r\n                if (sortDetail.type==='number'){\r\n                    return sorted.dir * (Number(aVal) - Number(bVal));\r\n                }else if (sortDetail.type==='string'){\r\n                    return sorted.dir * String(aVal).localeCompare(String(bVal));\r\n                }else if (sortDetail.type==='date'){\r\n                    return sorted.dir * (new Date(aVal) - new Date(bVal));\r\n                }else if (sortDetail.type==='bool'){\r\n                    return sorted.dir * ((aVal?1:0)-(bVal?1:0));\r\n                }\r\n                console.warn(\"useSorted: attempting to sort with unknown sort type '\"+sortDetail.type+\"'\");\r\n                return 0;\r\n            });\r\n        }\r\n    }\r\n    return listCopy;\r\n}\r\n\r\nfunction useSorted(sortDetails, items, ...sortGetterArgs){\r\n    const [sorted, sortedDispatch] = useReducer(sortReducer, {key: null, dir: 0});\r\n\r\n    return [getSortedList(sorted, sortDetails, items, sortGetterArgs), sortedDispatch, matchSort.bind(null, sorted)]\r\n}\r\n\r\nexport {useSorted};","import {Modal, Header, Button} from 'semantic-ui-react';\r\n\r\nexport default function ConfirmationModal({onYes, onNo, isOpen, title, content}){\r\n    return (\r\n        <Modal open={isOpen} size=\"tiny\">\r\n        {\r\n            content\r\n            ?\r\n                <Modal.Header>{title}</Modal.Header>\r\n            :\r\n                null\r\n        }\r\n        <Modal.Content>\r\n          <Modal.Description>\r\n              {content?content:<Header>{title}</Header>}\r\n          </Modal.Description>\r\n        </Modal.Content>\r\n        <Modal.Actions>\r\n          <Button positive content={\"Yes\"} onClick={onYes}/>\r\n          <Button color='black' content={\"No\"} onClick={onNo}/>\r\n        </Modal.Actions>\r\n      </Modal>\r\n    )\r\n}","\r\nimport TouchInput from '@dteel/touch-input'\r\nimport { Table, Input, Button, Checkbox } from 'semantic-ui-react';\r\nimport {useState} from 'react';\r\n\r\nimport {useSorted} from '../useSorted';\r\n\r\nimport ConfirmationModal from './ConfirmationModal';\r\n\r\nimport { calcArm, calcMoment, formatWeight, formatMoment, isAboutEquals } from '../common';\r\n\r\n\r\nconst noPadCell={padding:'1px', border:'none'};\r\nconst deleteCell={padding:'0px 4px 0px 0px', border:'none'};\r\nconst inputStyle={style:{paddingLeft:'5px', paddingRight:'5px'}};\r\n\r\n\r\n\r\nconst sortDetails=[\r\n    {key: 'name', type: 'string'},\r\n    {key: 'weight', type: 'number'},\r\n    {key: 'moment', type: 'number'},\r\n    {key: 'arm', type: 'number'},\r\n    {key: 'expended', type: 'bool'}\r\n];\r\n\r\nexport default function Cargo({cargo, cargoDispatch}){\r\n    const [deleteItemId, _setDeleteItemId] = useState(null);\r\n    const [itemList, sortBy, matchSort] = useSorted(sortDetails, cargo);\r\n\r\n\r\n    let weightTotal=0, momentTotal=0, armTotal;\r\n\r\n    itemList?.forEach( item => {\r\n        weightTotal+=Number(item.weight);\r\n        momentTotal+=Number(item.moment);\r\n    })\r\n    weightTotal=formatWeight(weightTotal);\r\n    momentTotal=formatMoment(momentTotal);\r\n    armTotal=calcArm(weightTotal, momentTotal);\r\n\r\n    const setDeleteItemId = (id) => {\r\n        for (const item of itemList){\r\n            if (item.id === id){\r\n                if (item.name.trim()===\"\" && isAboutEquals(item.weight, 0) && isAboutEquals(item.moment, 0)){\r\n                    cargoDispatch('delete', id);\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n        _setDeleteItemId(id);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <ConfirmationModal title={\"Are you sure you want to delete this?\"}\r\n                        isOpen={deleteItemId!==null}\r\n                        onYes={()=>{\r\n                            cargoDispatch('delete', deleteItemId);\r\n                            setDeleteItemId(null);\r\n                        }}\r\n                        onNo={()=>{\r\n                            setDeleteItemId(null);\r\n                        }}\r\n            />\r\n            <Table unstackable style={{maxWidth: '768px'}} sortable>\r\n                <Table.Header className='stickyheader'>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell colSpan='6'>\r\n                            <div style={{display:'flex', alignItems:'center'}}>\r\n                                <Button.Group vertical>\r\n                                    <Button icon='add' labelPosition='left' positive size='small' content='New'  onClick={()=>cargoDispatch('create', null)}/>\r\n\r\n                                </Button.Group>\r\n                                <div style={{flexGrow:'1', textAlign:'center', fontSize:'1.3em'}}>Cargo</div>\r\n                            </div>\r\n                        </Table.HeaderCell>\r\n                    </Table.Row>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell width={6} sorted={matchSort('name')}     onClick={()=>sortBy('name')}>Name  </Table.HeaderCell>\r\n                        <Table.HeaderCell width={3} sorted={matchSort('weight')}   onClick={()=>sortBy('weight')}>Weight</Table.HeaderCell>\r\n                        <Table.HeaderCell width={3} sorted={matchSort('moment')}   onClick={()=>sortBy('moment')}>Moment</Table.HeaderCell>\r\n                        <Table.HeaderCell width={2} sorted={matchSort('arm')}      onClick={()=>sortBy('arm')}>Arm   </Table.HeaderCell>\r\n                        <Table.HeaderCell width={1} sorted={matchSort('expended')} onClick={()=>sortBy('expended')}>Exp   </Table.HeaderCell>\r\n                        <Table.HeaderCell collapsing width={1} onClick={()=>sortBy(null)}></Table.HeaderCell>\r\n                    </Table.Row>\r\n                </Table.Header>\r\n                <Table.Body>\r\n                    {\r\n                        itemList?.length ?\r\n                        itemList.map( item => (\r\n                                <Table.Row key={item.id}>\r\n                                    <Table.Cell style={noPadCell}>\r\n                                        <TouchInput as={Input} value={item.name} onChange={(v)=>cargoDispatch('update', {...item, name: v})} fluid input={inputStyle}/>\r\n                                    </Table.Cell>\r\n                                    <Table.Cell style={noPadCell}>\r\n                                        <TouchInput as={Input} value={item.weight} onChange={(v)=>{\r\n                                                cargoDispatch('update', {...item, weight: v, moment: calcMoment(v, item.arm), arm: item.arm})\r\n                                        }} fluid  type='number' title='Weight' input={inputStyle}/>\r\n                                    </Table.Cell>\r\n                                    <Table.Cell style={noPadCell}>\r\n                                        <TouchInput as={Input} value={item.moment} onChange={(v)=>cargoDispatch('update', {...item, moment: v, arm: calcArm(item.weight, v)})} fluid type='number' title='Moment' input={inputStyle}/>\r\n                                    </Table.Cell>\r\n                                    <Table.Cell style={{...noPadCell, textAlign:'center'}}>\r\n                                        <TouchInput as={Input} value={item.arm} onChange={(v)=>cargoDispatch('update', {...item, arm: v, moment: calcMoment(item.weight, v)})} fluid disabled={isAboutEquals(item.weight,0)} type={isAboutEquals(item.weight,0)?null:'number'} title='Arm' input={inputStyle}/>\r\n                                    </Table.Cell>\r\n                                    <Table.Cell>\r\n                                        <Checkbox fitted checked={item.expended} onChange={(e, data)=>cargoDispatch('update', {...item, expended: data.checked})}/>\r\n                                    </Table.Cell>\r\n                                    <Table.Cell style={deleteCell}>\r\n                                        <Button floated='right' icon='minus' negative size='mini' onClick={(e)=>{\r\n                                            setDeleteItemId(item.id);\r\n                                        }}/>\r\n                                    </Table.Cell>\r\n                                </Table.Row>\r\n                            ))\r\n                        :\r\n                            <Table.Row style={{textAlign:'center'}}>\r\n                                <Table.Cell colSpan='6'>\r\n                                    no items\r\n                                </Table.Cell>\r\n                            </Table.Row>\r\n                    }\r\n                </Table.Body>\r\n                {\r\n                    itemList?.length?\r\n                        <Table.Footer>\r\n                            <Table.Row>\r\n                                <Table.Cell>Total</Table.Cell>\r\n                                <Table.Cell>{weightTotal}</Table.Cell>\r\n                                <Table.Cell>{momentTotal}</Table.Cell>\r\n                                <Table.Cell>{armTotal}</Table.Cell>\r\n                                <Table.Cell></Table.Cell>\r\n                                <Table.Cell></Table.Cell>\r\n                            </Table.Row>\r\n                        </Table.Footer>\r\n                    :\r\n                        null\r\n                }\r\n            </Table>\r\n        </>\r\n    );\r\n}","import { useStoredReducer } from \"@dteel/use-stored-reducer\";\r\nimport { isGoodObject } from \"../common\";\r\n\r\nconst emptyAircraft = {\r\n    basicWeight: 0,\r\n    basicMoment: 0,\r\n\r\n    crewWeight: 0,\r\n    crewMoment: 0,\r\n\r\n    baggageWeight: 0,\r\n    baggageMoment: 0,\r\n\r\n    stewardsWeight: 0,\r\n    stewardsMoment: 0,\r\n\r\n    emergencyWeight: 0,\r\n    emergencyMoment: 0,\r\n\r\n    extraWeight: 0,\r\n    extraMoment: 0,\r\n\r\n    readOnly:{\r\n        operatingWeight: 0,\r\n        operatingMoment: 0,\r\n    }\r\n}\r\n\r\nfunction sanitizeAircraft(s){\r\n    const fields=[\r\n        'basicWeight', 'basicMoment',\r\n        'crewWeight', 'crewMoment',\r\n        'baggageWeight', 'baggageMoment',\r\n        'stewardsWeight', 'stewardsMoment',\r\n        'emergencyWeight', 'emergencyMoment',\r\n        'extraWeight', 'extraMoment',\r\n    ];\r\n    for (const field of fields){\r\n        s[field]=Number(s[field]);\r\n        if (!isFinite(s[field])) s[field]=0;\r\n    }\r\n    return s;\r\n}\r\n\r\nfunction addReadOnly(s){\r\n    s.readOnly={\r\n        operatingWeight: s.basicWeight+s.crewWeight+s.baggageWeight+s.stewardsWeight+s.emergencyWeight+s.extraWeight,\r\n        operatingMoment: s.basicMoment+s.crewMoment+s.baggageMoment+s.stewardsMoment+s.emergencyMoment+s.extraMoment\r\n    };\r\n    return s;\r\n}\r\n\r\nfunction aircraftReducer(state, action, payload){\r\n\r\n    if (!isGoodObject(state)){\r\n        state=emptyAircraft;\r\n    }\r\n\r\n    switch (action){\r\n        case 'reset':{\r\n            return emptyAircraft;\r\n        }\r\n        case 'set':{\r\n            return addReadOnly(sanitizeAircraft(payload));\r\n        }\r\n        default:\r\n            console.error('unknown aircraftReducer action: ', action);\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction useAircraftReducer(hysterisis=1000){\r\n    const [aircraft, {current: aircraftDispatch}] = useStoredReducer('cwab-aircraft', aircraftReducer, emptyAircraft, localStorage, hysterisis);\r\n\r\n    return [aircraft, aircraftDispatch];\r\n}\r\n\r\nexport {useAircraftReducer as default, aircraftReducer};","import { useStoredReducer } from \"@dteel/use-stored-reducer\";\r\n\r\nimport { calcArm, getUniqueId, isAboutEquals, isGoodObject } from \"../common\";\r\n\r\nfunction blankItem(){\r\n    return {name:'', weight: 0, moment: 0, arm: 0, expended: false};\r\n}\r\n\r\nfunction sanitizeCargo(cargo){\r\n    for (const item of cargo){\r\n        item.weight=Number(item.weight);\r\n        item.moment=Number(item.moment);\r\n        item.arm=Number(item.arm);\r\n        item.expended=Boolean(item.expended);\r\n    }\r\n    return cargo;\r\n}\r\n\r\nfunction cargoReducer(state, action, payload, callback){\r\n\r\n    if (!Array.isArray(state)) state=[];\r\n\r\n    switch (action){\r\n        case 'reset':{\r\n            return [];\r\n        }\r\n        case 'update':{\r\n            const items=state;\r\n            \r\n            payload.weight=Number(payload.weight);\r\n            payload.moment=Number(payload.moment);\r\n            payload.arm=Number(payload.arm);\r\n            payload.expended=Boolean(payload.expended);\r\n\r\n            const expectedArm = calcArm(payload.weight, payload.moment);\r\n            if (!isAboutEquals(expectedArm, payload.arm, 0.1)){\r\n                payload.arm=expectedArm;\r\n            }\r\n\r\n            for (const [index, element] of items.entries()){\r\n                if (element.id===payload.id){\r\n                    items[index]=payload;\r\n                    break;\r\n                }\r\n            }\r\n            \r\n            return sanitizeCargo(items);\r\n        }\r\n        case 'delete':{\r\n            const items=state;\r\n            const id=typeof payload==='object' ? payload.id : payload;\r\n            return items.filter( item => !(item.id === id) );\r\n        }\r\n        case 'create':{\r\n            let newItem = payload;\r\n            if (!isGoodObject(newItem)) newItem=blankItem();\r\n\r\n            newItem.id=getUniqueId(state, 'id');\r\n            if (callback) callback(newItem.id);\r\n\r\n            return sanitizeCargo([...state, newItem]);\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction useCargoReducer(hysterisis=1000){\r\n    const [itemGroup, {current: itemGroupDispatch}] = useStoredReducer('cwab-cargo', cargoReducer, [], localStorage, hysterisis);\r\n\r\n    return [itemGroup, itemGroupDispatch];\r\n}\r\n\r\nexport {useCargoReducer as default, cargoReducer};","import { useStoredReducer } from \"@dteel/use-stored-reducer\";\r\nimport { isGoodObject, isAboutEquals } from \"../common\";\r\n\r\nconst maxAux = 5810;\r\nconst maxExt = 8900;    \r\nconst maxIB = 7660;\r\nconst maxOB = 8310;\r\nconst momentSimplifier=1000;\r\n\r\nconst blankSingleFuel={\r\n    lext: 0,\r\n    main1: 0,\r\n    main2: 0,\r\n    laux: 0,\r\n    raux: 0,\r\n    main3: 0,\r\n    main4: 0,\r\n    rext: 0,\r\n\r\n    readOnly:{\r\n        totalFuel: 0,\r\n        totalMoment: 0,\r\n        obs: 0,\r\n        ibs: 0,\r\n        auxs: 0,\r\n        exts: 0\r\n    }\r\n};\r\n\r\nconst blankFuel = {\r\n    takeoff: blankSingleFuel,\r\n    landing: blankSingleFuel\r\n}\r\n\r\n\r\nfunction interpolateTable(valueIn, table){\r\n    let below=null;\r\n    let above=null;\r\n    for (const item of table){\r\n        if (isAboutEquals(valueIn, item.in)){\r\n            above=item;\r\n            below=item;\r\n            break;\r\n        }\r\n        if (valueIn>=item.in){\r\n            if (below!==null){\r\n                if (item.in>below.in){\r\n                    below=item;\r\n                }\r\n            }else{\r\n                below=item;\r\n            }\r\n        }\r\n        if (valueIn<=item.in){\r\n            if (above!==null){\r\n                if (item.in<above.in){\r\n                    above=item;\r\n                }\r\n            }else{\r\n                above=item;\r\n            }\r\n        }\r\n    }\r\n\r\n    if (above==null || below==null){\r\n        return null;\r\n    }\r\n    \r\n    if (below===above || isAboutEquals(below.in, above.in)){\r\n        return above.out;\r\n    }\r\n\r\n    const resultDiff = above.out - below.out;\r\n    const valDiff = above.in - below.in;\r\n    return ((valueIn - below.in) / valDiff) * resultDiff + below.out;\r\n}\r\n\r\nfunction getSingleAuxMoment(auxFuel){\r\n    const table = [\r\n        {in: 0,           out: 560.5},\r\n        {in: maxAux*0.25, out: 559.0},\r\n        {in: maxAux*0.50, out: 557.5},\r\n        {in: maxAux*0.75, out: 556.9},\r\n        {in: maxAux     , out: 556.7},\r\n    ];\r\n\r\n    return interpolateTable(auxFuel, table)*auxFuel/momentSimplifier;\r\n}\r\n\r\nfunction getSingleExtMoment(extFuel){\r\n    const table = [\r\n        {in: 0,           out: 552.7},\r\n        {in: maxExt*0.25, out: 552.0},\r\n        {in: maxExt*0.50, out: 551.3},\r\n        {in: maxExt*0.75, out: 551.0},\r\n        {in: maxExt     , out: 551.2},\r\n    ];\r\n\r\n    return interpolateTable(extFuel, table)*extFuel/momentSimplifier;\r\n}\r\n\r\nfunction getSingleIBMoment(ibFuel){\r\n    const table = [\r\n        {in: 0,          out: 558.1},\r\n        {in: maxIB*0.25, out: 556.8},\r\n        {in: maxIB*0.50, out: 555.5},\r\n        {in: maxIB*0.75, out: 555.2},\r\n        {in: maxIB     , out: 555.0},\r\n    ];\r\n\r\n    return interpolateTable(ibFuel, table)*ibFuel/momentSimplifier;\r\n}\r\n\r\nfunction getSingleOBMoment(obFuel){\r\n    const table = [\r\n        {in: 0,          out: 549.0},\r\n        {in: maxOB*0.25, out: 547.7},\r\n        {in: maxOB*0.50, out: 546.4},\r\n        {in: maxOB*0.75, out: 545.7},\r\n        {in: maxOB     , out: 545.2},\r\n    ];\r\n\r\n    return interpolateTable(obFuel, table)*obFuel/momentSimplifier;\r\n}\r\n\r\nfunction getFuelMoment(lext, main1, main2, laux, raux, main3, main4, rext){\r\n    return Math.round(getSingleExtMoment(lext)+getSingleExtMoment(rext)+\r\n        getSingleAuxMoment(laux)+getSingleAuxMoment(raux)+\r\n        getSingleIBMoment(main2)+getSingleIBMoment(main3)+\r\n        getSingleOBMoment(main1)+getSingleOBMoment(main4));\r\n}\r\n\r\nfunction sanitizeFuelState(s){\r\n    const fields=['main1', 'main2', 'main3', 'main4', 'laux', 'raux', 'lext', 'rext'];\r\n    for (const field of fields){\r\n        s[field]=Number(s[field]);\r\n        if (!isFinite(s[field])) s[field]=0;\r\n        if (s[field]<0) s[field]=0;\r\n    }\r\n\r\n    if (s.lext>maxExt) s.lext=maxExt;\r\n    if (s.rext>maxExt) s.rext=maxExt;\r\n    if (s.laux>maxAux) s.laux=maxAux;\r\n    if (s.raux>maxAux) s.raux=maxAux;\r\n    if (s.main1>maxOB) s.main1=maxOB;\r\n    if (s.main4>maxOB) s.main4=maxOB;\r\n    if (s.main2>maxIB) s.main2=maxIB;\r\n    if (s.main3>maxIB) s.main3=maxIB;\r\n\r\n    return s;\r\n}\r\n\r\nfunction addReadOnly(s){\r\n    s.readOnly={\r\n        totalFuel: s.lext+s.rext+s.laux+s.raux+s.main1+s.main2+s.main3+s.main4,\r\n        totalMoment: getFuelMoment(s.lext, s.main1, s.main2, s.laux, s.raux, s.main3, s.main4, s.rext),\r\n        obs: s.main1+s.main4,\r\n        ibs: s.main2+s.main3,\r\n        auxs: s.laux+s.raux,\r\n        exts: s.lext+s.rext\r\n    };\r\n    return s;\r\n}\r\n\r\nfunction fuelReducer(state, action, payload){\r\n\r\n    if (!isGoodObject(state)){\r\n        state=blankFuel;\r\n    }\r\n\r\n    switch (action){\r\n        case 'reset':\r\n            return blankFuel;\r\n\r\n        case 'set-takeoff':\r\n            payload=addReadOnly(sanitizeFuelState(payload));\r\n            return {...state, takeoff: payload};\r\n\r\n        case 'set-landing':\r\n            payload=addReadOnly(sanitizeFuelState(payload));\r\n            return {...state, landing: payload};\r\n\r\n        case 'set':\r\n            payload.takeoff=addReadOnly(sanitizeFuelState(payload.takeoff));\r\n            payload.landing=addReadOnly(sanitizeFuelState(payload.landing));\r\n            return payload;\r\n\r\n        default:\r\n            console.error('unknown fuelReducer action: ', action);\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction useFuelReducer(hysterisis=1000){\r\n    const [fuel, {current: fuelDispatch}] = useStoredReducer('cwab-fuel', fuelReducer, blankFuel, localStorage, hysterisis);\r\n\r\n    return [fuel, fuelDispatch];\r\n}\r\n\r\nexport {useFuelReducer as default, fuelReducer};","\r\n// let localStorageSize=null;\r\n\r\n// function getLocalStorageSize(){\r\n//     if (localStorageSize!==null) return localStorageSize;\r\n\r\n//     localStorageSize=0;\r\n\r\n//     let dataChunk=\"0\".repeat(10223);\r\n//     let keys=[];\r\n//     let count=0;\r\n//     try {\r\n//         while (count<1000){\r\n//                 const key='wab-calcsize'+String(count++).padStart(5,'0');\r\n//                 localStorage.setItem(key, dataChunk);\r\n//                 keys.push(key);\r\n//         }\r\n//     } catch (e) {\r\n//     }\r\n\r\n//     keys.forEach( key => {\r\n//         localStorageSize+=10000+key.length;\r\n//         localStorage.removeItem(key);\r\n//     });\r\n\r\n//     for (let i=0;i<localStorage.length;i++){\r\n//         const key = localStorage.key(i);\r\n//         localStorageSize+=key.length+localStorage.getItem(key).length;\r\n//     }\r\n    \r\n//     return localStorageSize;\r\n// }\r\n\r\nfunction getUsedSpace(){\r\n    let storageUsed=0;\r\n    try {\r\n        for (let i=0;i<localStorage.length;i++){\r\n            const key = localStorage.key(i);\r\n            storageUsed+=key.length+localStorage.getItem(key).length;\r\n        }\r\n    } catch (e) {\r\n    }\r\n    return storageUsed;\r\n}\r\n\r\nexport {getUsedSpace};\r\n","import { useEffect, useState } from \"react\";\r\nimport { Header, Segment, Progress, Button } from \"semantic-ui-react\";\r\n\r\nimport {flushSaveToStorage} from '@dteel/use-stored-reducer/src/saveToStorage';\r\n\r\nimport useAircraftReducer from '../reducers/aircraftReducer';\r\nimport useCargoReducer from '../reducers/cargoReducer';\r\nimport useFuelReducer from \"../reducers/fuelReducer\";\r\n\r\nimport { getUsedSpace } from '../getLocalStorageSize'\r\nimport ConfirmationModal from './ConfirmationModal';\r\n\r\n\r\nfunction getSpaceUsedByWAB(){\r\n    let spaceUsedByWAB = 0;\r\n    try {\r\n        for (let i = 0; i < localStorage.length; i++){\r\n            const key=localStorage.key(i);\r\n            if (key.trim().toLowerCase().startsWith(\"cwab-\")){\r\n                const size=localStorage.getItem(key).length+key.length;\r\n                spaceUsedByWAB+=size;\r\n            }   \r\n        }\r\n    } catch (e) {\r\n    }\r\n    return spaceUsedByWAB;\r\n}\r\n\r\nexport default function Options(){\r\n\r\n    const [aircraft, aircraftDispatch] = useAircraftReducer(0);\r\n    const [cargo, cargoDispatch] = useCargoReducer(0);\r\n    const [fuel, fuelDispatch] = useFuelReducer(0);\r\n\r\n    const [spaceUsedByWAB, setSpaceUsedByWAB] = useState(0);\r\n    const [spaceUsed, setSpaceUsed] = useState(0);\r\n    const [deleteLocalModal, setDeleteLocalModal] = useState(false);\r\n\r\n    useEffect( ()=>{\r\n        flushSaveToStorage();\r\n        setSpaceUsedByWAB(getSpaceUsedByWAB());\r\n        setSpaceUsed(getUsedSpace());\r\n\r\n        const storageChanged = () => {\r\n            setSpaceUsedByWAB(getSpaceUsedByWAB());\r\n            setSpaceUsed(getUsedSpace());\r\n        };\r\n\r\n        window.addEventListener('storage', storageChanged);\r\n        return ()=>window.removeEventListener('storage', storageChanged);\r\n    }, [cargo, aircraft, fuel]);\r\n\r\n    return (\r\n        <>\r\n                <Segment secondary>\r\n                    <Header as='h4' textAlign=\"center\">Local Storage</Header>\r\n\r\n                    <Progress\r\n                        value={spaceUsedByWAB}\r\n                        total={spaceUsed}\r\n                        progress='percent'\r\n                        precision={1}\r\n                        label={'WABs Useage: '+Math.ceil(spaceUsedByWAB/1024)+' Kb / '+Math.ceil(spaceUsed/1024)+' Kb'}\r\n                    />\r\n                    <ConfirmationModal \r\n                        title=\"Are you sure?\"\r\n                        content=\"This will erase everything WAB related on your device, are you sure?\"\r\n                        onNo={()=>setDeleteLocalModal(false)} \r\n                        onYes={()=>{\r\n                            fuelDispatch('reset');\r\n                            cargoDispatch('reset');\r\n                            aircraftDispatch('reset');\r\n                            setDeleteLocalModal(false);\r\n                        }}\r\n                        isOpen={deleteLocalModal}\r\n                    />\r\n                    <Button negative onClick={()=>setDeleteLocalModal(true)}>Clear WAB LocalStorage</Button>\r\n                </Segment>\r\n        </>\r\n    );\r\n}","import TouchInput from '@dteel/touch-input'\r\nimport { Table, Input } from 'semantic-ui-react';\r\n\r\nconst inputStyle={style:{paddingLeft:'5px', paddingRight:'5px'}};\r\n\r\nexport default function IndividualFuel({fuel, setFuel}){\r\n    return <>\r\n        <Table compact size=\"small\" unstackable style={{maxWidth:'650px'}}>\r\n            <Table.Header>\r\n                <Table.Row>\r\n                    <Table.HeaderCell>Total Fuel</Table.HeaderCell>\r\n                    <Table.HeaderCell>Moment</Table.HeaderCell>\r\n                </Table.Row>\r\n            </Table.Header>\r\n            <Table.Body>\r\n                <Table.Row>\r\n                    <Table.Cell>\r\n                        <TouchInput as={Input} \r\n                        value={fuel.readOnly.totalFuel}\r\n                        onChange={(v)=>{\r\n                            const desiredTotalFuel=v;\r\n                            v=Number(v);\r\n                            const mains = Math.max(0, Math.min(31940, v));\r\n                            v=v-31940;//subtract max main fuel tanks\r\n                            const auxs = Math.max(0, Math.min(11620, v));\r\n                            v=v-11620;//subtract max aux tanks\r\n                            const exts= Math.max(0, Math.min(17800, v));\r\n\r\n                            let outboards=Math.max(0, mains/2+650);\r\n                            let inboards=Math.max(0, mains/2-650);\r\n                            if (desiredTotalFuel<6000){\r\n                                outboards=mains/2;\r\n                                inboards=mains/2;\r\n                            }\r\n                            setFuel({\r\n                                main1: outboards/2,\r\n                                main2: inboards/2,\r\n                                main3: inboards/2,\r\n                                main4: outboards/2,\r\n                                laux: auxs/2,\r\n                                raux: auxs/2,\r\n                                lext: exts/2,\r\n                                rext: exts/2\r\n                            });\r\n                        }} fluid  type='number' title='Total Fuel' input={inputStyle}/>\r\n                    </Table.Cell>\r\n                    <Table.Cell>{fuel.readOnly.totalMoment}</Table.Cell>\r\n                </Table.Row>\r\n            </Table.Body>\r\n        </Table>\r\n        <Table compact size=\"small\" unstackable style={{maxWidth: '650px'}}>\r\n            <Table.Header>\r\n                <Table.Row>\r\n                    <Table.HeaderCell textAlign='center'>OBs</Table.HeaderCell>\r\n                    <Table.HeaderCell textAlign='center'>IBs</Table.HeaderCell>\r\n                    <Table.HeaderCell textAlign='center'>AUXs</Table.HeaderCell>\r\n                    <Table.HeaderCell textAlign='center'>EXTs</Table.HeaderCell>\r\n                </Table.Row>\r\n            </Table.Header>\r\n            <Table.Body style={{marginBottom: 0}}>\r\n                <Table.Row>\r\n                    <Table.Cell>\r\n                        <TouchInput as={Input} value={fuel.main1+fuel.main4} onChange={(v)=>{\r\n                            v=Number(v);\r\n                            setFuel({...fuel, main1: v/2, main4: v/2});\r\n                        }} fluid  type='number' title='Outboards' input={inputStyle}/>\r\n                    </Table.Cell>\r\n                    <Table.Cell>\r\n                        <TouchInput as={Input} value={fuel.main2+fuel.main3} onChange={(v)=>{\r\n                            v=Number(v);\r\n                            setFuel({...fuel, main2: v/2, main3: v/2});\r\n                        }} fluid  type='number' title='Inboards' input={inputStyle}/>\r\n                    </Table.Cell>\r\n                    <Table.Cell>\r\n                        <TouchInput as={Input} value={fuel.laux+fuel.raux} onChange={(v)=>{\r\n                            v=Number(v);\r\n                            setFuel({...fuel, laux: v/2, raux: v/2});\r\n                        }} fluid  type='number' title='Auxiliarys' input={inputStyle}/>\r\n                    </Table.Cell>\r\n                    <Table.Cell>\r\n                        <TouchInput as={Input} value={fuel.lext+fuel.rext} onChange={(v)=>{\r\n                            v=Number(v);\r\n                            setFuel({...fuel, lext: v/2, rext: v/2});\r\n                        }} fluid  type='number' title='Externals' input={inputStyle}/>\r\n                    </Table.Cell>\r\n                </Table.Row>\r\n            </Table.Body>\r\n        </Table>\r\n        <Table compact  size=\"small\"  unstackable style={{maxWidth: '650px'}}>\r\n            <Table.Header>\r\n                <Table.Row>\r\n                    <Table.HeaderCell textAlign='center'>L Ext</Table.HeaderCell>\r\n                    <Table.HeaderCell textAlign='center'>Main 1</Table.HeaderCell>\r\n                    <Table.HeaderCell textAlign='center'>Main 2</Table.HeaderCell>\r\n                    <Table.HeaderCell textAlign='center'>L Aux</Table.HeaderCell>\r\n                </Table.Row>\r\n            </Table.Header>\r\n            <Table.Body>\r\n                <Table.Row>\r\n                    <Table.Cell>\r\n                        <TouchInput as={Input} value={fuel.lext} onChange={(v)=>{\r\n                            setFuel({...fuel, lext: v});\r\n                        }} fluid  type='number' title='L Ext' input={inputStyle}/>\r\n                    </Table.Cell>\r\n                    <Table.Cell>\r\n                        <TouchInput as={Input} value={fuel.main1} onChange={(v)=>{\r\n                            setFuel({...fuel, main1: v});\r\n                        }} fluid  type='number' title='Main 1' input={inputStyle}/>\r\n                    </Table.Cell>\r\n                    <Table.Cell>\r\n                        <TouchInput as={Input} value={fuel.main2} onChange={(v)=>{\r\n                            setFuel({...fuel, main2: v});\r\n                        }} fluid  type='number' title='Main 2' input={inputStyle}/>\r\n                    </Table.Cell>\r\n                    <Table.Cell>\r\n                        <TouchInput as={Input} value={fuel.laux} onChange={(v)=>{\r\n                            setFuel({...fuel, laux: v});\r\n                        }} fluid  type='number' title='L Aux' input={inputStyle}/>\r\n                    </Table.Cell>\r\n                </Table.Row>\r\n            </Table.Body>\r\n            <Table.Header>\r\n                <Table.Row>\r\n                    <Table.HeaderCell textAlign='center'>R Aux</Table.HeaderCell>\r\n                    <Table.HeaderCell textAlign='center'>Main 3</Table.HeaderCell>\r\n                    <Table.HeaderCell textAlign='center'>Main 4</Table.HeaderCell>\r\n                    <Table.HeaderCell textAlign='center'>R Ext</Table.HeaderCell>\r\n                </Table.Row>\r\n            </Table.Header>\r\n            <Table.Body>\r\n                <Table.Row>\r\n                    <Table.Cell>\r\n                        <TouchInput as={Input} value={fuel.raux} onChange={(v)=>{\r\n                            setFuel({...fuel, raux: v});\r\n                        }} fluid  type='number' title='R Aux' input={inputStyle}/>\r\n                    </Table.Cell>\r\n                    <Table.Cell>\r\n                        <TouchInput as={Input} value={fuel.main3} onChange={(v)=>{\r\n                            setFuel({...fuel, main3: v});\r\n                        }} fluid  type='number' title='Main 3' input={inputStyle}/>\r\n                    </Table.Cell>\r\n                    <Table.Cell>\r\n                        <TouchInput as={Input} value={fuel.main4} onChange={(v)=>{\r\n                            setFuel({...fuel, main4: v});\r\n                        }} fluid  type='number' title='Main 4' input={inputStyle}/>\r\n                    </Table.Cell>\r\n                    <Table.Cell>\r\n                        <TouchInput as={Input} value={fuel.rext} onChange={(v)=>{\r\n                            setFuel({...fuel, rext: v});\r\n                        }} fluid  type='number' title='R Ext' input={inputStyle}/>\r\n                    </Table.Cell>\r\n                </Table.Row>\r\n            </Table.Body>\r\n        </Table>\r\n    </>\r\n}\r\n","import { Header } from 'semantic-ui-react';\r\n\r\n\r\nimport IndividualFuel from './IndividualFuel';\r\n\r\n\r\nexport default function Fuel({fuel, fuelDispatch}){\r\n    return (\r\n        <>\r\n            <Header textAlign='center'>\r\n                Takeoff Fuel\r\n            </Header>\r\n            <IndividualFuel fuel={fuel.takeoff} setFuel={(newFuel)=>{\r\n                fuelDispatch('set-takeoff', newFuel);\r\n            }}/>\r\n\r\n            <Header textAlign='center'>\r\n                Landing Fuel\r\n            </Header>\r\n            <IndividualFuel fuel={fuel.landing} setFuel={(newFuel)=>{\r\n                fuelDispatch('set-landing', newFuel);\r\n            }}/>\r\n        </>\r\n    );\r\n}","import {useStoredReducer} from '@dteel/use-stored-reducer';\r\n\r\nfunction selectedMenuReducer(state, action, payload) {\r\n    return {page: action, ...payload};\r\n}\r\n\r\nfunction useSelectedMenuReducer(hysterisis=1000){\r\n    const [selectedMenu, {current: selectedMenuDispatch}] = useStoredReducer('cwab-menu', selectedMenuReducer, {page: 'aircraft'}, sessionStorage, hysterisis);\r\n\r\n    return [selectedMenu, selectedMenuDispatch];\r\n}\r\n\r\n\r\nexport {useSelectedMenuReducer as default, selectedMenuReducer};","import React from 'react';\r\n\r\nimport { Table, Message } from 'semantic-ui-react'\r\n\r\nimport {displayVal, markUpScript} from '../common';\r\n\r\nconst objectTypeMap =   {\r\n    linear:     \"chart line\",\r\n    clamp:      \"arrows alternate vertical\",\r\n    trend:      \"random\",\r\n    poly:       \"clone\",\r\n    table:      \"table\",\r\n    input:      \"edit\",\r\n    script:     \"code\",\r\n    constant:   \"caret right\"\r\n};\r\n\r\n\r\nexport default function RawRows({chartProject, detailed}){\r\n    let rows=[];\r\n    for (const [ , obj] of Object.entries(chartProject.calcArray)) {\r\n\r\n        let details;\r\n        \r\n        if (detailed){\r\n            switch (obj.type){\r\n                case 'script':\r\n                    details=(\r\n                        <Message size=\"mini\" style={{margin: \"15px\"}}>{markUpScript(obj)}</Message>\r\n                    );\r\n                    break;\r\n                case 'input':\r\n                    details=(<div style={{width:\"100%\"}}>\r\n                                <pre style={{textAlign:\"center\"}}>{obj.name} input of '{obj.input}' = {displayVal(obj.value,5)}</pre>\r\n                                <Message size=\"mini\" style={{margin: \"15px\"}}>{markUpScript(obj)}</Message>\r\n                            </div>)\r\n                    break;\r\n                case 'linear':\r\n                    details=(<div style={{width:\"100%\"}}>\r\n                                <pre style={{textAlign:\"center\"}}>{obj.xOrYRefObj.name} of {displayVal(obj.xOrYRefObj.value,1)} -&gt; {obj.zRefObj.name} of {displayVal(obj.zRefObj.value,1)} = {displayVal(obj.value,1)}</pre>\r\n                            </div>)\r\n                    break;\r\n                case 'clamp':\r\n                    details=(<div style={{width:\"100%\"}}>\r\n                                <pre style={{textAlign:\"center\"}}>{obj.valueToClampRefObj.name} of {displayVal(obj.valueToClampRefObj.value,1)} @ {obj.xOrYRefObj.name} of {displayVal(obj.xOrYRefObj.value,1)} = {displayVal(obj.value,1)}</pre>\r\n                            </div>)\r\n                    break;\r\n                case 'trend':\r\n                    details=(<Table basic=\"very\" compact=\"very\" collapsing unstackable size=\"small\" style={{marginLeft:\"auto\", marginRight:\"auto\"}}>\r\n                                <Table.Body>\r\n                                    <Table.Row>\r\n                                        <Table.Cell>\r\n                                            {obj.yIsInputAxis?\"Y\":\"X\"} in\r\n                                        </Table.Cell>\r\n                                        <Table.Cell>\r\n                                            {obj.xOrYRefObj.name}\r\n                                        </Table.Cell>\r\n                                        <Table.Cell>\r\n                                            {displayVal(obj.xOrYRefObj.value,1)}\r\n                                        </Table.Cell>\r\n                                    </Table.Row>\r\n                                    <Table.Row>\r\n                                        <Table.Cell>\r\n                                            Entry\r\n                                        </Table.Cell>\r\n                                        <Table.Cell>\r\n                                            {obj.entryPointRefObj.name}\r\n                                        </Table.Cell>\r\n                                        <Table.Cell>\r\n                                            {displayVal(obj.entryPointRefObj.value,1)}\r\n                                        </Table.Cell>\r\n                                    </Table.Row>\r\n                                    <Table.Row>\r\n                                        <Table.Cell>\r\n                                            Exit\r\n                                        </Table.Cell>\r\n                                        <Table.Cell>\r\n                                            {obj.exitPointRefObj.name}\r\n                                        </Table.Cell>\r\n                                        <Table.Cell>\r\n                                            {displayVal(obj.exitPointRefObj.value,1)}\r\n                                        </Table.Cell>\r\n                                    </Table.Row>\r\n                                    <Table.Row>\r\n                                        <Table.Cell>\r\n                                            {obj.yIsInputAxis?\"Y\":\"X\"} out\r\n                                        </Table.Cell>\r\n                                        <Table.Cell>\r\n                                            \r\n                                        </Table.Cell>\r\n                                        <Table.Cell>\r\n                                            {displayVal(obj.value,1)}\r\n                                        </Table.Cell>\r\n                                    </Table.Row>\r\n                                </Table.Body>\r\n                            </Table>)\r\n                    break;\r\n                case 'poly':\r\n                    details=(<Table basic=\"very\" compact=\"very\" collapsing unstackable size=\"small\" style={{marginLeft:\"auto\", marginRight:\"auto\"}}>\r\n                                <Table.Body>\r\n                                    <Table.Row>\r\n                                        <Table.Cell>\r\n                                            X\r\n                                        </Table.Cell>\r\n                                        <Table.Cell>\r\n                                            {obj.xInRefObj.name}\r\n                                        </Table.Cell>\r\n                                        <Table.Cell>\r\n                                            {displayVal(obj.xInRefObj.value,1)}\r\n                                        </Table.Cell>\r\n                                    </Table.Row>\r\n                                    <Table.Row>\r\n                                        <Table.Cell>\r\n                                            Y\r\n                                        </Table.Cell>\r\n                                        <Table.Cell>\r\n                                            {obj.yInRefObj.name}\r\n                                        </Table.Cell>\r\n                                        <Table.Cell>\r\n                                            {displayVal(obj.yInRefObj.value,1)}\r\n                                        </Table.Cell>\r\n                                    </Table.Row>\r\n                                </Table.Body>\r\n                            </Table>)\r\n                    break;\r\n                case 'table':\r\n                    details=(<Table basic=\"very\" compact=\"very\" collapsing unstackable size=\"small\" style={{marginLeft:\"auto\", marginRight:\"auto\"}}>\r\n                                <Table.Body>\r\n                                    <Table.Row>\r\n                                        <Table.Cell>\r\n                                        {obj.inputRefObj.name}\r\n                                        </Table.Cell>\r\n                                        <Table.Cell>{displayVal(obj.inputRefObj.value,1)}\r\n                                        </Table.Cell>\r\n                                        <Table.Cell>\r\n                                        </Table.Cell>\r\n                                    </Table.Row>\r\n                                    {\r\n                                        obj.table.map( item =>    \r\n                                            <Table.Row key={obj.inputRefObj.name+\"table_row\"+item.refObj.name}>\r\n                                                <Table.Cell>\r\n                                                    {item.refObj.name}\r\n                                                </Table.Cell>\r\n                                                <Table.Cell>\r\n                                                    {displayVal(item.value,1)}\r\n                                                </Table.Cell>\r\n                                                <Table.Cell>\r\n                                                    {displayVal(item.refObj.value,1)}\r\n                                                </Table.Cell>\r\n                                            </Table.Row>\r\n                                        )\r\n                                    }\r\n                                </Table.Body>\r\n                            </Table>)\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n\r\n        rows.push(<React.Fragment key={obj.name+\"_normalRow\"}>\r\n            <Table.Row>\r\n                <Table.Cell icon={objectTypeMap[obj.type]}></Table.Cell>\r\n                <Table.Cell style={{fontWeight:\"bold\"}}>{obj.name}</Table.Cell>\r\n                <Table.Cell>{displayVal(obj.value,1)}</Table.Cell>\r\n            </Table.Row>\r\n            {\r\n                details\r\n                ?\r\n                    <Table.Row style={{padding:\"0px\"}}>\r\n                        <Table.Cell colSpan={3} style={{padding:\"0px\", paddingRight:\"5px\", border: \"0px\"}}>\r\n                            {details}\r\n                        </Table.Cell>\r\n                    </Table.Row>\r\n                :\r\n                    null\r\n            }\r\n        </React.Fragment>);\r\n    }\r\n    return rows;\r\n}","import React from 'react';\r\n\r\nimport { Table } from 'semantic-ui-react'\r\n\r\nimport RawRows from './RawRows';\r\n\r\nexport default function RawOutput({detailed, chartProject, ...props}){\r\n\r\n    return  (\r\n        <>\r\n        <Table compact=\"very\" collapsing unstackable>\r\n            <Table.Header>\r\n                <Table.Row>\r\n                    <Table.HeaderCell>Type</Table.HeaderCell>\r\n                    <Table.HeaderCell>Name</Table.HeaderCell>\r\n                    <Table.HeaderCell>Value</Table.HeaderCell>\r\n                </Table.Row>\r\n            </Table.Header>\r\n\r\n            <Table.Body>\r\n                <RawRows chartProject={chartProject} detailed={detailed}/>\r\n            </Table.Body>\r\n        </Table>\r\n        </>\r\n    );\r\n}","import { Header } from 'semantic-ui-react';\r\n\r\nimport useAircraftReducer from '../reducers/aircraftReducer';\r\nimport useCargoReducer from '../reducers/cargoReducer';\r\nimport useFuelReducer from \"../reducers/fuelReducer\";\r\n\r\nimport RawOutput from './RawOutput';\r\n\r\n\r\nexport default function CPRaw({chartProject}){\r\n    const [aircraft, ] = useAircraftReducer(1000);\r\n    const [fuel, ] = useFuelReducer(1000);\r\n    const [cargo, ] = useCargoReducer(1000);\r\n\r\n    let cargoWeightTakeoff=0;\r\n    let cargoWeightLanding=0;\r\n    for (const item of cargo){\r\n        cargoWeightTakeoff+=item.weight;\r\n        if (!item.expended){\r\n            cargoWeightLanding+=item.weight;\r\n        }\r\n    }\r\n\r\n    const charts=chartProject;\r\n    charts.$operatingWeight.input=aircraft.readOnly.operatingWeight;\r\n    charts.$fuelWeightTakeoff.input=fuel.takeoff.readOnly.totalFuel;\r\n    charts.$fuelWeightLanding.input=fuel.landing.readOnly.totalFuel;\r\n    charts.$cargoWeightTakeoff.input=cargoWeightTakeoff;\r\n    charts.$cargoWeightLanding.input=cargoWeightLanding;\r\n    charts.calc();\r\n\r\n    return (\r\n        <>\r\n            <Header textAlign='center'>\r\n                ChartProject Raw                \r\n            </Header>\r\n            <RawOutput chartProject={charts} detailed={true}/>\r\n        </>\r\n    );\r\n}","import {Interpreter, NumberObj, BoolObj, StringObj} from '@dteel/gpdsl';\r\n\r\n//returns true if any of the inputs are null or undefined\r\nfunction isAnyNil(...vals){\r\n\tfor (const a of vals){\r\n\t\tif (a===null || a===undefined) return true;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nfunction isAboutEquals(a, b, allowableDelta=0.00001){\r\n\tif (isAnyNil(a,b)) return false;\r\n\r\n\tif (Math.abs(a-b)<=allowableDelta){\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\n\r\n\r\n///classess\r\nclass Point {\r\n\tconstructor(x,y){\r\n\t\tif (x instanceof Point){//act as a copy constructor\r\n\t\t\tthis.x = x.x;\r\n\t\t\tthis.y = x.y;\r\n\t\t}else{\r\n\t\t\tthis.x = isAnyNil(x) ? 0 : x;\r\n\t\t\tthis.y = isAnyNil(y) ? 0 : y;\r\n\t\t}\r\n\t}\r\n\r\n\tflip(){\r\n\t\tconst tempX=this.x;\r\n\t\tthis.x=this.y;\r\n\t\tthis.y=tempX;\r\n\t}\r\n\r\n\tdistance(otherPoint){\r\n\t\tconst xDiff = Math.abs(otherPoint.x - this.x);\r\n\t\tconst yDiff = Math.abs(otherPoint.y - this.y);\r\n\t\treturn Math.sqrt(xDiff*xDiff + yDiff*yDiff);\r\n\t}\r\n}\r\n\r\nclass Line {\r\n\tconstructor(pointsArray, value=null){\r\n\t\tif (pointsArray instanceof Line){\r\n\t\t\tthis.points=pointsArray.points.map( point => {return new Point(point);} )\r\n\t\t\tthis.value=pointsArray.value;\r\n\t\t}else{\r\n\t\t\tthis.points=pointsArray.map( point => {return new Point(point);} );\r\n\t\t\tthis.value=value;\r\n\t\t}\r\n\t}\r\n\r\n\tflipPoints(){\r\n\t\tfor (const point of this.points){\r\n\t\t\tpoint.flip();\r\n\t\t}\r\n\t}\r\n\r\n\tisLinear(yIsInputAxis){\r\n\t\tif (this.points.length < 2) {\r\n\t\t\treturn false;//line doesnt have enough points to even have one segment\r\n\t\t}\r\n\t\t\r\n\t\tif (isAboutEquals((yIsInputAxis ? this.points[1].y : this.points[1].x), (yIsInputAxis ? this.points[0].y : this.points[0].x))) {\r\n\t\t\treturn false;//first and second point are on the same x/y location, wouldnt be able to determine direction\r\n\t\t}\r\n\t\t\r\n\t\tlet lastX = (yIsInputAxis ? this.points[0].y : this.points[0].x);\r\n\t\tlet goingUp = (yIsInputAxis ? this.points[1].y : this.points[1].x) > lastX;\r\n\t\t\r\n\t\tfor (let i = 1; i < this.points.length; i++) {\r\n\t\t\tif (goingUp) {\r\n\t\t\t\tif ((yIsInputAxis ? this.points[i].y : this.points[i].x) <= lastX){\r\n\t\t\t\t\treturn false;//line x was ascending, but now its going down\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif ((yIsInputAxis ? this.points[i].y : this.points[i].x) >= lastX) {\r\n\t\t\t\t\treturn false;//line x was descending, but now its going up\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlastX = (yIsInputAxis ? this.points[i].y : this.points[i].x);\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\t//Only finds segments in the x axis (flip the points if you want to find it in the y axis)\r\n\tfindSegment(x) {\r\n\t\tif (this.points.length < 2 || this.isLinear(false)===false) {\r\n\t\t\treturn null;//not enough points for even one segment\r\n\t\t}\r\n\t\t\r\n\t\tconst leftX = this.points[0].x;\r\n\t\tconst rightX = this.points[this.points.length-1].x;\r\n\t\t\r\n\t\t//not going to be able to find a segment within the line, so we have to extrapolate\r\n\t\tif ((leftX<rightX && x<leftX) || (rightX<leftX && x>leftX)) {\r\n\t\t\treturn new Segment(this.points[0], this.points[1]);\r\n\t\t} else if ((leftX<rightX && x>rightX) || (rightX<leftX && x<rightX))  {\r\n\t\t\treturn new Segment(this.points[this.points.length - 2],this.points[this.points.length - 1]);\r\n\t\t}\r\n\t\t\r\n\t\tfor (let i = 0; i < this.points.length-1; i++) {\r\n\t\t\tif ((x >= this.points[i].x  &&  x <= this.points[i + 1].x) || (x <= this.points[i].x  &&  x >= this.points[i + 1].x)) {\r\n\t\t\t\treturn new Segment(this.points[i], this.points[i + 1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn null;//should be impossible to get here unless the line is a mess\r\n\t}\r\n\r\n}\r\n\r\nclass Rect {\r\n\tconstructor(pointA, pointB){\r\n\t\tif (pointA instanceof Rect){\r\n\t\t\tthis.pointA=new Point(pointA.pointA);\r\n\t\t\tthis.pointB=new Point(pointA.pointB);\r\n\t\t}else{\r\n\t\t\tthis.pointA=new Point(pointA);\r\n\t\t\tthis.pointB=new Point(pointB);\r\n\t\t}\r\n\t}\r\n\r\n\tisPointInside({x:px, y: py}, padding=undefined){\r\n\t\tif (padding===undefined){\r\n\t\t\treturn ((px >= this.pointA.x && px <= this.pointB.x) || (px >= this.pointB.x && px <= this.pointA.x)) &&\r\n\t\t\t((py >= this.pointA.y && py <= this.pointB.y) || (py >= this.pointB.y && py <= this.pointA.y));\r\n\t\t}else{\r\n\t\t\tconst a=new Point(this.pointA);\r\n\t\t\tconst b=new Point(this.pointB);\r\n\r\n\t\t\tif (a.x<b.x){\r\n\t\t\t\ta.x-=padding; b.x+=padding;\r\n\t\t\t}else{\r\n\t\t\t\ta.x+=padding; b.x-=padding;\r\n\t\t\t}\r\n\t\t\tif (a.y<b.y){\r\n\t\t\t\ta.y-=padding; b.y+=padding;\r\n\t\t\t}else{\r\n\t\t\t\ta.y+=padding; b.y-=padding;\r\n\t\t\t}\r\n\r\n\t\t\tlet paddedRect=new Rect(a, b);\r\n\t\t\treturn paddedRect.isPointInside(new Point(px,py));\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nclass Segment {\r\n\tconstructor(pointA, pointB){\r\n\t\tif (pointA instanceof Segment){\r\n\t\t\tthis.pointA=new Point(pointA.pointA);\r\n\t\t\tthis.pointB=new Point(pointA.pointB);\r\n\t\t}else{\r\n\t\t\tthis.pointA=new Point(pointA);\r\n\t\t\tthis.pointB=new Point(pointB);\r\n\t\t}\r\n\t}\r\n\r\n\tsetPointA(toPoint){\r\n\t\tthis.pointA = new Point(toPoint);\r\n\t}\r\n\tsetPointB(toPoint){\r\n\t\tthis.pointB = new Point(toPoint);\r\n\t}\r\n\r\n\t//Returns null if unable to get an intersection, will return a Point if able.\r\n\t//This should be a static class method, but whatevs.\r\n\tstatic getSegmentIntersectionWith(seg1, seg2, needsToBeTouching){\r\n\t\tconst xy=new Point(0,0);\r\n\t\tconst t = (seg2.pointB.y - seg2.pointA.y)*(seg1.pointB.x - seg1.pointA.x) - (seg2.pointB.x - seg2.pointA.x)*(seg1.pointB.y - seg1.pointA.y);\r\n\t\tif (Math.abs(t)>=0.00001) {//make sure lines arent parallel\r\n\t\t\tconst ua = ((seg2.pointB.x - seg2.pointA.x)*(seg1.pointA.y - seg2.pointA.y) - (seg2.pointB.y - seg2.pointA.y)*(seg1.pointA.x - seg2.pointA.x)) / t;\r\n\t\t\txy.x = seg1.pointA.x + ua * (seg1.pointB.x - seg1.pointA.x);\r\n\t\t\txy.y = seg1.pointA.y + ua * (seg1.pointB.y - seg1.pointA.y);\r\n\t\t\t\r\n\t\t\tif (needsToBeTouching) {\r\n\t\t\t\tconst rect1 = new Rect(seg1.pointA, seg1.pointB);\r\n\t\t\t\tconst rect2 = new Rect(seg2.pointA, seg2.pointB);\r\n\t\t\t\tif (!(rect1.isPointInside(xy) && rect2.isPointInside(xy))) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn xy;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\t//Returns null if unable to get an intersection, will return a Point if able.\r\n\tgetSegmentIntersection(otherSeg, needsToBeTouching){\r\n\t\treturn Segment.getSegmentIntersectionWith(this, otherSeg, needsToBeTouching);\r\n\t}\r\n\r\n\t//Returns null if unable to get an intersection, will return the y value of the intersion if able.\r\n\tstatic figureYCrossingWith(seg1, xAxis){\r\n\t\tconst seg2 = new Segment(new Point(xAxis, -100), new Point(xAxis, 100));\r\n\t\tconst intersection = Segment.getSegmentIntersectionWith(seg1, seg2, false);\r\n\t\tif (intersection != null) {\r\n\t\t\treturn intersection.y;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\t//Returns null if unable to get an intersection, will return the y value of the intersion if able.\r\n\tfigureYCrossing(xAxis){\r\n\t\treturn Segment.figureYCrossingWith(this, xAxis);\r\n\t}\r\n}\r\n\r\n\r\nclass ChartObject {\r\n\tconstructor(name=\"\", type=\"chartobject\", initialValue=null){\r\n\t\tthis.name=name;\r\n\t\tthis.type=type;\r\n\t\tthis.value=initialValue;\r\n\t}\r\n\r\n\tcalc(chartObjectArray, alertsArray, noticesArray){//Meant to be overridden at child class\r\n\t}\r\n}\r\n\r\nclass LinearChart extends ChartObject {\r\n\tconstructor(name=\"\", yIsInputAxis=false, xOrYRefObj=null, zRefObj=null, ...lines){\r\n\t\tsuper(name, \"linear\", null);\r\n\r\n\t\tthis.yIsInputAxis=yIsInputAxis;\r\n\r\n\t\tthis.xOrYRefObj=xOrYRefObj;\r\n\t\tthis.zRefObj=zRefObj;\r\n\r\n\t\tif (Array.isArray(lines)){\r\n\t\t\tthis.lines=lines.map( line => {return new Line(line);} );\r\n\t\t\tif (yIsInputAxis){\r\n\t\t\t\tthis.lines.forEach( line => {line.flipPoints();} )\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.lines=[];\r\n\t\t}\r\n\t}\r\n\r\n\tcalc(chartObjectArray, alertsArray, noticesArray){\r\n\t\tif (isAnyNil(this.xOrYRefObj, this.zRefObj)){\r\n\t\t\tthis.value=null;\r\n\t\t}else{\r\n\t\t\tthis.value = this.figureChart(this.xOrYRefObj.value, this.zRefObj.value);\r\n\t\t}\r\n\t}\r\n\r\n\tfigureChart(xOrYIn, zIn){\r\n\t\tif (isAnyNil(xOrYIn,zIn)) return null;\r\n\t\tlet belowLine=null;\r\n\t\tlet aboveLine=null;\r\n\t\tlet linesAreSame=false;\r\n\r\n\t\tfor (let currentLine of this.lines){\r\n\t\t\tif (isAboutEquals(currentLine.value, zIn)){\r\n\t\t\t\tbelowLine=currentLine;\r\n\t\t\t\taboveLine=currentLine;\r\n\t\t\t\tlinesAreSame=true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif (currentLine.value < zIn){\r\n\t\t\t\tif (belowLine){\r\n\t\t\t\t\tif (belowLine.value < currentLine.value) belowLine=currentLine;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbelowLine=currentLine;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (currentLine.value > zIn){\r\n\t\t\t\tif (aboveLine){\r\n\t\t\t\t\tif (aboveLine.value > currentLine.value) aboveLine=currentLine;\r\n\t\t\t\t}else{\r\n\t\t\t\t\taboveLine=currentLine;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (isAnyNil(aboveLine, belowLine)) return null;\r\n\r\n\t\tlet aboveCrossing=aboveLine.findSegment(xOrYIn)?.figureYCrossing(xOrYIn);\r\n\t\tif (linesAreSame) return aboveCrossing;\r\n\r\n\t\tlet belowCrossing=belowLine.findSegment(xOrYIn)?.figureYCrossing(xOrYIn);\r\n\r\n\t\tif (isAnyNil(aboveCrossing, belowCrossing)) return null;\r\n\r\n\t\treturn ((zIn - belowLine.value) / (aboveLine.value - belowLine.value))*(aboveCrossing - belowCrossing) + belowCrossing;\r\n\t}\r\n}\r\n\r\nclass ClampChart extends ChartObject {\r\n\r\n\tconstructor(name=\"\", yIsInputAxis=false, xOrYRefObj=null, valueToClampRefObj=null, minLine=null, maxLine=null){\r\n\tsuper(name, \"clamp\", null);\r\n\t\r\n\t\tthis.yIsInputAxis=yIsInputAxis;\r\n\r\n\t\tthis.xOrYRefObj=xOrYRefObj;\r\n\t\tthis.valueToClampRefObj=valueToClampRefObj;\r\n\r\n\t\tthis.minLine=isAnyNil(minLine) ? null : new Line(minLine);\r\n\t\tthis.maxLine=isAnyNil(maxLine) ? null : new Line(maxLine);\r\n\t\tif (yIsInputAxis){\r\n\t\t\tthis.minLine.flipPoints();\r\n\t\t\tthis.maxLine.flipPoints();    \r\n\t\t}\r\n\t}\r\n\r\n\tcalc(chartObjectArray, alertsArray, noticesArray){\r\n\t\tif (isAnyNil(this.xOrYRefObj, this.valueToClampRefObj)){\r\n\t\t\tthis.value=null;\r\n\t\t}else{\r\n\t\t\tthis.value=this.figureClamp(this.xOrYRefObj.value, this.valueToClampRefObj.value);\r\n\t\t}\r\n\t}\r\n\r\n\tfigureClamp(xOrYIn, valueToClamp){\r\n\t\tif (isAnyNil(xOrYIn, valueToClamp)) return null;\r\n\t\t\r\n\t\tif (this.minLine?.points.length>0) {\r\n\t\t\tconst minValue=this.minLine.findSegment(xOrYIn)?.figureYCrossing(xOrYIn);\r\n\t\t\tif (!minValue) return null;\r\n\t\r\n\t\t\tif (valueToClamp < minValue) valueToClamp = minValue;\r\n\t\t}\r\n\r\n\t\tif (this.maxLine?.points.length>0) {\r\n\t\t\tconst maxValue=this.maxLine.findSegment(xOrYIn)?.figureYCrossing(xOrYIn);\r\n\t\t\tif (!maxValue) return null;\r\n\t\r\n\t\t\tif (valueToClamp > maxValue) valueToClamp = maxValue;\r\n\t\t}\r\n\r\n\t\treturn valueToClamp;\r\n\t}\r\n}\r\n\r\nclass TrendChart extends ChartObject{\r\n\tconstructor(name=\"\", yIsInputAxis=false, xOrYRefObj=null, entryPointRefObj=null, exitPointRefObj=null, ...lines){\r\n\t\tsuper(name, \"trend\", null);\r\n\r\n\t\tthis.yIsInputAxis=yIsInputAxis;\r\n\r\n\t\tthis.xOrYRefObj=xOrYRefObj;\r\n\t\tthis.entryPointRefObj=entryPointRefObj;\r\n\t\tthis.exitPointRefObj=exitPointRefObj;\r\n\r\n\t\tif (Array.isArray(lines)){\r\n\t\t\tthis.lines=lines.map( line => {return new Line(line);} );\r\n\t\t\tif (!yIsInputAxis){\r\n\t\t\t\tthis.lines.forEach( line => {line.flipPoints();} )//we flip the points when yIsInputAxis==false for trendcharts\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.lines=[];\r\n\t\t}\r\n\t}\r\n\r\n\tcalc(chartObjectArray, alertsArray, noticesArray){\r\n\t\tif (isAnyNil(this.xOrYRefObj, this.entryPointRefObj, this.exitPointRefObj)){\r\n\t\t\tthis.value=null;\r\n\t\t}else{\r\n\t\t\tthis.value=this.figureTrend(this.xOrYRefObj.value, this.entryPointRefObj.value, this.exitPointRefObj.value);\r\n\t\t}\r\n\t}\r\n\r\n\tfigureTrend(xOrYIn, entryPoint, exitPoint){\r\n\t\tif (isAnyNil(xOrYIn, entryPoint, exitPoint)) return null;\r\n\r\n\t\tlet leftLineFind=null;\r\n\t\tlet rightLineFind=null;\r\n\t\tlet leftEntryCross=0;\r\n\t\tlet rightEntryCross=0;\r\n\t\t\r\n\t\tfor (let currentLine of this.lines){\r\n\t\t\tlet yCrossing = currentLine.findSegment(entryPoint)?.figureYCrossing(entryPoint);\r\n\t\t\tif (yCrossing){//should we hard fail here? It would highlight bad data. Maybe it should.\r\n\t\t\t\tif (yCrossing>=xOrYIn){\r\n\t\t\t\t\tif (rightLineFind){\r\n\t\t\t\t\t\tif (yCrossing<rightEntryCross){\r\n\t\t\t\t\t\t\trightLineFind=currentLine;\r\n\t\t\t\t\t\t\trightEntryCross=yCrossing\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\trightLineFind=currentLine;\r\n\t\t\t\t\t\trightEntryCross=yCrossing;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (yCrossing<=xOrYIn){\r\n\t\t\t\t\tif (leftLineFind){\r\n\t\t\t\t\t\tif (yCrossing>leftEntryCross){\r\n\t\t\t\t\t\t\tleftLineFind=currentLine;\r\n\t\t\t\t\t\t\tleftEntryCross=yCrossing\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tleftLineFind=currentLine;\r\n\t\t\t\t\t\tleftEntryCross=yCrossing;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (isAnyNil(leftLineFind, rightLineFind)) return null;\r\n\t\r\n\t\tconst leftEndCross = leftLineFind.findSegment(exitPoint)?.figureYCrossing(exitPoint);\r\n\t\tif (leftLineFind===rightLineFind || isAboutEquals(rightEntryCross, leftEntryCross)){\r\n\t\t\treturn leftEndCross;\r\n\t\t}\r\n\t\tconst rightEndCross = rightLineFind.findSegment(exitPoint)?.figureYCrossing(exitPoint);\r\n\r\n\t\tif (isAnyNil(leftEndCross, rightEndCross)) return null;\r\n\t\t\r\n\t\tlet entryRatio=(xOrYIn - leftEntryCross) / (rightEntryCross - leftEntryCross);\r\n\t\treturn (rightEndCross - leftEndCross) * entryRatio + leftEndCross;\r\n\t}\r\n}\r\n\r\nclass PolyChart extends ChartObject{\r\n\tconstructor(name=\"\", xInRefObj=null, yInRefObj=null, ...lines){\r\n\t\tsuper(name, \"poly\", null);\r\n\r\n\t\tthis.xInRefObj=xInRefObj;\r\n\t\tthis.yInRefObj=yInRefObj;\r\n\r\n\t\tif (Array.isArray(lines)){\r\n\t\t\tthis.lines=lines.map( line => {return new Line(line);} );\r\n\t\t}else{\r\n\t\t\tthis.lines=[];\r\n\t\t}\r\n\t}\r\n\r\n\tcalc(chartObjectArray, alertsArray, noticesArray){\r\n\t\tif (isAnyNil(this.xInRefObj, this.yInRefObj)){\r\n\t\t\tthis.value=null;\r\n\t\t}else{\r\n\t\t\tthis.value=this.figurePoly(this.xInRefObj.value, this.yInRefObj.value);\r\n\t\t}\r\n\t}\r\n\r\n\tfigurePoly(xIn, yIn){\r\n\t\tif (isAnyNil(xIn, yIn)) return null;\r\n\r\n\t\tlet minX=0;\r\n\t\tlet maxX=0;\r\n\t\tfor (let currentLine of this.lines){\r\n\t\t\tfor (let currentPoint of currentLine.points){\r\n\t\t\t\tif (currentPoint.x>maxX) maxX=currentPoint.x;\r\n\t\t\t\tif (currentPoint.x<minX) minX=currentPoint.x;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet horizSeg = new Segment(new Point(minX-1, yIn), new Point(maxX+1,yIn));\r\n\t\tlet curSeg = new Segment();\r\n\r\n\t\tfor (let currentLine of this.lines) {\r\n\t\t\tlet intersectsLeftOfX = 0;\r\n\r\n\t\t\tif (currentLine.points.length > 2) {\r\n\t\t\t\tfor (let i = 0; i < currentLine.points.length; i++) {\r\n\t\t\t\t\tcurSeg.setPointA(currentLine.points[i])\r\n\t\t\t\t\tif (i === currentLine.points.length - 1) {\r\n\t\t\t\t\t\tcurSeg.setPointB(currentLine.points[0]);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcurSeg.setPointB(currentLine.points[i+1]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (curSeg.getSegmentIntersection(horizSeg, true)?.x <= xIn){\r\n\t\t\t\t\t\tintersectsLeftOfX++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (intersectsLeftOfX > 0 && intersectsLeftOfX%2 > 0) {\r\n\t\t\t\t\treturn currentLine.value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nclass ChartTableEntry {\r\n\tconstructor(refObj, value){\r\n\t\tif (refObj instanceof ChartTableEntry){\r\n\t\t\tthis.refObj=refObj.refObj;\r\n\t\t\tthis.value=refObj.value;\r\n\t\t}else{\r\n\t\t\tthis.refObj=refObj;\r\n\t\t\tthis.value=value;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass ChartTable extends ChartObject {\r\n\tconstructor(name=\"\", inputRefObj=null, ...table){\r\n\t\tsuper(name, \"table\", null);\r\n\r\n\t\tthis.inputRefObj=inputRefObj;\r\n\r\n\t\tif (Array.isArray(table)){\r\n\t\t\tthis.table=table.map( entry => {return new ChartTableEntry(entry);} );\r\n\t\t}else{\r\n\t\t\tthis.table=[];\r\n\t\t}\r\n\t}\r\n\r\n\tfigureTable(inValue){\r\n\t\tif (isAnyNil(inValue)) return null;\r\n\t\tlet below=null;\r\n\t\tlet above=null;\r\n\r\n\t\tfor (let item of this.table) {\r\n\t\t\tif (isAboutEquals(item.value, inValue)) {\r\n\t\t\t\tbelow = item;\r\n\t\t\t\tabove = item;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif (item.value <= inValue) {\r\n\t\t\t\tif (below){\r\n\t\t\t\t\tif (item.value>below.value) below=item;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbelow=item;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (item.value >= inValue) {\r\n\t\t\t\tif (above){\r\n\t\t\t\t\tif (item.value<above.value) above=item;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tabove=item;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (isAnyNil(above?.refObj?.value, below?.refObj?.value)) return null;\r\n\r\n\t\tif (below===above || isAboutEquals(below.refObj.value, above.refObj.value)){\r\n\t\t\treturn above.refObj.value;\r\n\t\t}\r\n\r\n\t\tconst resultDiff = above.refObj.value - below.refObj.value;\r\n\t\tconst valDiff = above.value - below.value;\r\n\t\treturn ((inValue - below.value) / valDiff) * resultDiff + below.refObj.value;\r\n\t}\r\n\r\n\tcalc(chartObjectArray, alertsArray, noticesArray){\r\n\t\tif (isAnyNil(this.inputRefObj)){ \r\n\t\t\tthis.value=null;\r\n\t\t}else{\r\n\t\t\tthis.value=this.figureTable(this.inputRefObj.value)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass ChartConstant extends ChartObject {\r\n\tconstructor(name=\"\", value=0){\r\n\t\tsuper(name, \"constant\", value);\r\n\t}\r\n}\r\n\r\nclass ScriptRuntime {\r\n\tconstructor(chartObjectArray, alertsArray, noticesArray){\r\n\t\tthis.chartObjectArray=chartObjectArray;\r\n\t\tthis.alertsArray=alertsArray;\r\n\t\tthis.noticesArray=noticesArray;\r\n\t}\r\n\r\n\tfindChart = (name, type) => {\r\n\t\tif (name===null || type===null) return null;\r\n\t\tfor (const obj of this.chartObjectArray){\r\n\t\t\tif (obj.name===name && obj.type===type){\r\n\t\t\t\treturn obj;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tlinear = (popFn) => {\r\n\t\tconst z=popFn();\r\n\t\tconst x=popFn();\r\n\t\tconst chartName=popFn();\r\n\r\n\t\tconst chart=this.findChart(chartName.value, 'linear');\r\n\r\n\t\tif (z.value==null || x.value==null || chart==null) return new NumberObj(null, null, false);\r\n\r\n\t\treturn new NumberObj(null, chart.figureChart(x.value, z.value), false);\r\n\t}\r\n\tclamp = (popFn) => {\r\n\t\tconst value=popFn();\r\n\t\tconst x=popFn();\r\n\t\tconst chartName=popFn();\r\n\r\n\t\tconst chart=this.findChart(chartName.value, 'clamp');\r\n\r\n\t\tif (value.value==null || x.value==null || chart==null) return new NumberObj(null, null, false);\r\n\r\n\t\treturn new NumberObj(null, chart.figureClamp(x.value, value.value), false);\r\n\t}\r\n\tpoly = (popFn) => {\r\n\t\tconst y=popFn();\r\n\t\tconst x=popFn();\r\n\t\tconst chartName=popFn();\r\n\r\n\t\tconst chart=this.findChart(chartName.value, 'poly');\r\n\r\n\t\tif (y.value==null || x.value==null || chart==null) return new NumberObj(null, null, false);\r\n\r\n\t\treturn new NumberObj(null, chart.figurePoly(x.value, y.value), false);\r\n\t}\r\n\ttrend = (popFn) => {\r\n\t\tconst exit=popFn();\r\n\t\tconst entry=popFn();\r\n\t\tconst value=popFn();\r\n\t\tconst chartName=popFn();\r\n\r\n\t\tconst chart=this.findChart(chartName.value, 'trend');\r\n\r\n\t\tif (exit.value==null || entry.value==null || value.value==null || chart==null) return new NumberObj(null, null, false);\r\n\r\n\t\treturn new NumberObj(null, chart.figureTrend(value.value, entry.value, exit.value), false);\r\n\r\n\t}\r\n\talert = (popFn) => {\r\n\t\tthis.alertsArray.push(popFn().value);\r\n\t\treturn new BoolObj(null, null, false);\r\n\t}\r\n\r\n\tnotice = (popFn) => {\r\n\t\tthis.noticesArray.push(popFn().value);\r\n\t\treturn new BoolObj(null, null, false);\r\n\t}\r\n\r\n\tbuildExternList = (thisObj) => {\r\n\t\tconst externs=[\r\n\t\t\tInterpreter.funcDef(\"runLinear\", this.linear, \"double\", \"string\", \"double\", \"double\"),\r\n\t\t\tInterpreter.funcDef(\"runClamp\", this.clamp, \"double\", \"string\", \"double\", \"double\"),\r\n\t\t\tInterpreter.funcDef(\"runPoly\", this.poly, \"double\", \"string\", \"double\", \"double\"),\r\n\t\t\tInterpreter.funcDef(\"runTrend\", this.trend, \"double\", \"string\", \"double\", \"double\", \"double\"),\r\n\t\t\tInterpreter.funcDef(\"alert\", this.alert, \"bool\", \"string\"),\r\n\t\t\tInterpreter.funcDef(\"notice\", this.notice, \"bool\", \"string\")\r\n\t\t];\r\n\r\n\t\tif (this.chartObjectArray){\r\n\t\t\tfor (const obj of this.chartObjectArray){\r\n\t\t\t\tif (obj.type==='constant'){\r\n\t\t\t\t\texterns.push(new NumberObj(obj.name, obj.value, true));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (thisObj && thisObj.type!=='input'){\r\n\t\t\t\tfor (const obj of this.chartObjectArray){\r\n\t\t\t\t\tif (obj.type==='input'){\r\n\t\t\t\t\t\texterns.push(new NumberObj(obj.name, obj.value, true));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tfor (const obj of this.chartObjectArray){\r\n\t\t\t\t\tif (obj.name===thisObj.name) break;\r\n\t\t\t\t\tif (obj.type!=='input' && obj.type!=='constant'){\r\n\t\t\t\t\t\texterns.push(new NumberObj(obj.name, obj.value, true));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn externs;\r\n\t}\r\n}\r\n\r\nclass ChartInput extends ChartObject {\r\n\tconstructor(name=\"\", script=\"\", initialValue=null){\r\n\t\tsuper(name, \"input\", null);\r\n\t\tthis.script=script;\r\n\t\tthis.invalid=false;\r\n\t\tthis.input=initialValue;\r\n\t}\r\n\r\n\tcalc(chartObjectArray, alertsArray, noticesArray){\r\n\t\tconst interpreter = new Interpreter();\r\n\t\tconst scriptRuntime = new ScriptRuntime(chartObjectArray, alertsArray, noticesArray);\r\n\r\n\t\tconst externs=scriptRuntime.buildExternList(this);\r\n\t\tconst thisObj = new StringObj('input', this.input, true);\r\n\t\texterns.push(thisObj);\r\n\t\tconst invalidObj = new BoolObj('invalid', false, false);\r\n\t\texterns.push(invalidObj);\r\n\r\n\t\tconst result=interpreter.runCode(this.script, \"double\", true, false, externs);\r\n\t\tif (result.error){\r\n\t\t\tconsole.log(this.name, \" error -> \",result.error.message);\r\n\t\t\talertsArray.push(\"Error running \"+this.name+\" input script -> \"+result.error);\r\n\t\t\tthis.invalid=true;\r\n\t\t\tthis.value=null;\r\n\t\t}else{\r\n\t\t\tthis.invalid=Boolean(invalidObj.value);\r\n\t\t\tthis.value=result.exitObject.value;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass ChartScript extends ChartObject {\r\n\tconstructor(name=\"\", script=\"\"){\r\n\t\tsuper(name, \"script\", null);\r\n\t\tthis.script=script;\r\n\t}\r\n\r\n\tcalc(chartObjectArray, alertsArray, noticesArray){\r\n\t\tconst interpreter = new Interpreter();\r\n\t\tconst scriptRuntime = new ScriptRuntime(chartObjectArray, alertsArray, noticesArray);\r\n\t\tconst result=interpreter.runCode(this.script, \"double\", true, false, scriptRuntime.buildExternList(this));\r\n\t\tif (result.error){\r\n\t\t\tconsole.log(this.name, \" error -> \",result.error.message);\r\n\t\t\talertsArray.push(\"Error executing \"+this.name+\" script -> \"+result.error);\r\n\t\t\tthis.value=null;\r\n\t\t}else{\r\n\t\t\tthis.value=result.exitObject.value;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport {Point, Line, ChartObject, LinearChart, ClampChart, TrendChart, PolyChart, ChartTableEntry, ChartTable, ChartInput, ChartScript, ChartConstant};\r\n","import {useStoredReducer} from '@dteel/use-stored-reducer';\r\nimport { isGoodObject } from \"../common\";\r\n\r\nconst blankOutputSettings={\r\n    allowableLandingWeight: 164000,\r\n    allowableTakeoffWeight: 164000,\r\n    whichOpArea: 'C'\r\n}\r\n\r\nfunction outputSettingsReducer(state, action, payload){\r\n\r\n    if (!isGoodObject(state)){\r\n        state=blankOutputSettings;\r\n    }\r\n\r\n    switch (action){\r\n        case 'set-allowable-landing':{\r\n            return {...state, allowableLandingWeight: payload};\r\n        }\r\n        case 'set-allowable-takeoff':{\r\n            return {...state, allowableTakeoffWeight: payload};\r\n        }\r\n        case 'set-op-area':{\r\n            if (payload!=='A' && payload!=='B' && payload!=='C' && payload!=='D'){\r\n                console.error('invalid op oparea in set-op-area in outputSettingsReducer', payload);\r\n                payload='A';\r\n            }\r\n            return {...state, whichOpArea: payload};\r\n        }\r\n        default:\r\n            console.error('unknown outputSettingsReducer action: ', action);\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction useOutputReducer(hysterisis=1000){\r\n    const [outputSettings, {current: outputSettingsDispatch}] = useStoredReducer('cwab-output', outputSettingsReducer, blankOutputSettings, localStorage, hysterisis);\r\n\r\n    return [outputSettings, outputSettingsDispatch];\r\n}\r\n\r\n\r\nexport {useOutputReducer as default, outputSettingsReducer};","import { Table, Input, Button, Header, List, ListItem, ListHeader, TableHeader, TableHeaderCell, TableCell, TableRow, TableBody, Dropdown } from 'semantic-ui-react';\r\n\r\nimport useAircraftReducer from '../reducers/aircraftReducer';\r\nimport useCargoReducer from '../reducers/cargoReducer';\r\nimport useFuelReducer from \"../reducers/fuelReducer\";\r\n\r\nimport ChartProject from '../charts';\r\n\r\nimport { toMAC, calcArm, displayVal } from '../common';\r\nimport { useState } from 'react';\r\n\r\nimport TouchInput from '@dteel/touch-input'\r\nimport useOutputReducer from '../reducers/outputReducer';\r\nconst inputStyle={style:{paddingLeft:'5px', paddingRight:'5px'}};\r\n\r\n\r\nfunction displayOpArea(val){\r\n    if (val===0) return 'A';\r\n    if (val===1) return 'B';\r\n    if (val===2) return 'C';\r\n    if (val===3) return 'D';\r\n    return 'E';\r\n}\r\n\r\nconst limitingFuelOptions = [\r\n    {key: 1, text: 'A', value: 'A'},\r\n    {key: 2, text: 'B', value: 'B'},\r\n    {key: 3, text: 'C', value: 'C'},\r\n    {key: 4, text: 'D', value: 'D'}\r\n]\r\n\r\nfunction TableCellFormatted({value, decimalPlaces, pre, post, ...rest}){\r\n    return <TableCell textAlign='right' {...rest}>{pre}{displayVal(value, decimalPlaces)}{post}</TableCell>\r\n}\r\n\r\nexport default function Output({chartProject}){\r\n    const [aircraft, aircraftDispatch] = useAircraftReducer(1000);\r\n    const [fuel, fuelDispatch] = useFuelReducer(1000);\r\n    const [cargo, cargoDispatch] = useCargoReducer(1000);\r\n\r\n    const [outputSettings, outputSettingsDispatch] = useOutputReducer(1000);\r\n\r\n    // const [whichOpArea, setWhichOpArea] = useState('A');\r\n    // const [allowableTakeoffWeight, setAllowableTakeoffWeight] = useState(164000);\r\n    // const [allowableLandingWeight, setAllowableLandingWeight] = useState(164000);\r\n\r\n    let cargoWeightTakeoff=0;\r\n    let cargoMomentTakeoff=0;\r\n    let cargoWeightLanding=0;\r\n    let cargoMomentLanding=0;\r\n    for (const item of cargo){\r\n        cargoWeightTakeoff+=item.weight;\r\n        cargoMomentTakeoff+=item.moment;\r\n        if (!item.expended){\r\n            cargoWeightLanding+=item.weight;\r\n            cargoMomentLanding+=item.moment;\r\n        }\r\n    }\r\n\r\n    const charts=chartProject;\r\n    charts.$operatingWeight.input=aircraft.readOnly.operatingWeight;\r\n    charts.$fuelWeightTakeoff.input=fuel.takeoff.readOnly.totalFuel;\r\n    charts.$fuelWeightLanding.input=fuel.landing.readOnly.totalFuel;\r\n    charts.$cargoWeightTakeoff.input=cargoWeightTakeoff;\r\n    charts.$cargoWeightLanding.input=cargoWeightLanding;\r\n    charts.calc();\r\n\r\n    const totalAicraftWeight = aircraft.readOnly.operatingWeight+fuel.takeoff.readOnly.totalFuel;\r\n    const totalAircraftMoment = aircraft.readOnly.operatingMoment+fuel.takeoff.readOnly.totalMoment;\r\n\r\n    const takeoffZeroFuelWeight = aircraft.readOnly.operatingWeight+cargoWeightTakeoff;\r\n    const takeoffZeroFuelMoment = aircraft.readOnly.operatingMoment+cargoMomentTakeoff;\r\n\r\n    const landingZeroFuelWeight = aircraft.readOnly.operatingWeight+cargoWeightLanding;\r\n    const landingZeroFuelMoment = aircraft.readOnly.operatingMoment+cargoMomentLanding;\r\n    \r\n    const takeoffWeight = aircraft.readOnly.operatingWeight+fuel.takeoff.readOnly.totalFuel+cargoWeightTakeoff;\r\n    const takeoffMoment = aircraft.readOnly.operatingMoment+fuel.takeoff.readOnly.totalMoment+cargoMomentTakeoff;\r\n    const takeoffMAC = toMAC(calcArm(takeoffWeight, takeoffMoment));\r\n    const takeoffHasFuelInExternals = fuel.takeoff.lext>0 || fuel.takeoff.rext>0;\r\n    const takeoffForwardCG = takeoffHasFuelInExternals ? charts.$extForwardCGTakeoff.value : charts.$noExtForwardCGTakeoff.value;\r\n    const takeoffAftCG = takeoffHasFuelInExternals ? charts.$extAftCGTakeoff.value : charts.$noExtAftCGTakeoff.value;\r\n    const takeoffOpArea = displayOpArea(charts.$operatingAreaTakeoff.value);\r\n\r\n    const landingWeight = aircraft.readOnly.operatingWeight+fuel.landing.readOnly.totalFuel+cargoWeightLanding;\r\n    const landingMoment = aircraft.readOnly.operatingMoment+fuel.landing.readOnly.totalMoment+cargoMomentLanding;\r\n    const landingMAC = toMAC(calcArm(landingWeight, landingMoment));\r\n    const landingHasFuelInExternals = fuel.landing.lext>0 || fuel.landing.rext>0;\r\n    const landingForwardCG = takeoffHasFuelInExternals ? charts.$extForwardCGLanding.value : charts.$noExtForwardCGLanding.value;\r\n    const landingAftCG = takeoffHasFuelInExternals ? charts.$extAftCGLanding.value : charts.$noExtAftCGLanding.value;\r\n    const landingOpArea = displayOpArea(charts.$operatingAreaLanding.value);\r\n\r\n    const limitingFuelMaxZFW = {\r\n        A: charts.$areaAMaxZFWOverall.value,\r\n        B: charts.$areaBMaxZFWOverall.value,\r\n        C: charts.$areaCMaxZFWOverall.value,\r\n        D: charts.$areaDMaxZFWOverall.value\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Header textAlign='center'>\r\n                Output\r\n            </Header>\r\n            <Table compact size=\"small\" unstackable celled columns='5' style={{maxWidth:'600px'}}>\r\n                <TableHeader>\r\n                    <TableRow>\r\n                        <TableHeaderCell colSpan=\"3\" textAlign='center'>ITEM</TableHeaderCell>\r\n                        <TableHeaderCell textAlign='center'>WEIGHT</TableHeaderCell>\r\n                        <TableHeaderCell textAlign='center'>MOMENT/1000</TableHeaderCell>\r\n                    </TableRow>\r\n                </TableHeader>\r\n                <TableBody>\r\n                    <TableRow>\r\n                        <TableCell colSpan=\"3\">BASIC AIRCRAFT</TableCell>\r\n                        <TableCellFormatted value={aircraft.basicWeight} decimalPlaces={0}/>\r\n                        <TableCellFormatted value={aircraft.basicMoment} decimalPlaces={0}/>\r\n                    </TableRow>\r\n                    <TableRow>\r\n                        <TableCell colSpan=\"3\">CREW</TableCell>\r\n                        <TableCellFormatted value={aircraft.crewWeight} decimalPlaces={0}/>\r\n                        <TableCellFormatted value={aircraft.crewMoment} decimalPlaces={0}/>\r\n                    </TableRow>\r\n                    <TableRow>\r\n                        <TableCell colSpan=\"3\">CREW'S BAGGAGE</TableCell>\r\n                        <TableCellFormatted value={aircraft.baggageWeight} decimalPlaces={0}/>\r\n                        <TableCellFormatted value={aircraft.baggageMoment} decimalPlaces={0}/>\r\n                    </TableRow>\r\n                    <TableRow>\r\n                        <TableCell colSpan=\"3\">STEWARD'S EQUIPMENT</TableCell>\r\n                        <TableCellFormatted value={aircraft.stewardsWeight} decimalPlaces={0}/>\r\n                        <TableCellFormatted value={aircraft.stewardsMoment} decimalPlaces={0}/>\r\n                    </TableRow>\r\n                    <TableRow>\r\n                        <TableCell colSpan=\"3\">EMERGENCY EQUIPMENT</TableCell>\r\n                        <TableCellFormatted value={aircraft.emergencyWeight} decimalPlaces={0}/>\r\n                        <TableCellFormatted value={aircraft.emergencyMoment} decimalPlaces={0}/>\r\n                    </TableRow>\r\n                    <TableRow>\r\n                        <TableCell colSpan=\"3\">EXTRA EQUIPMENT</TableCell>\r\n                        <TableCellFormatted value={aircraft.extraWeight} decimalPlaces={0}/>\r\n                        <TableCellFormatted value={aircraft.extraMoment} decimalPlaces={0}/>\r\n                    </TableRow>\r\n                    <TableRow>\r\n                        <TableCell colSpan=\"3\">OPERATING WEIGHT</TableCell>\r\n                        <TableCellFormatted value={aircraft.readOnly.operatingWeight} decimalPlaces={0}/>\r\n                        <TableCellFormatted value={aircraft.readOnly.operatingMoment} decimalPlaces={0}/>\r\n                    </TableRow>\r\n                    <TableRow>\r\n                        <TableCell colSpan=\"3\">TAKEOFF FUEL ({displayVal(fuel.takeoff.readOnly.totalFuel/6.7)} Gal) 6.7</TableCell>\r\n                        <TableCellFormatted value={fuel.takeoff.readOnly.totalFuel} decimalPlaces={0}/>\r\n                        <TableCellFormatted value={fuel.takeoff.readOnly.totalMoment} decimalPlaces={0}/>\r\n                    </TableRow>\r\n                    <TableRow>\r\n                        <TableCell colSpan=\"3\">TOTAL AIRCRAFT WEIGHT</TableCell>\r\n                        <TableCellFormatted value={totalAicraftWeight} decimalPlaces={0}/>\r\n                        <TableCellFormatted value={totalAircraftMoment} decimalPlaces={0}/>\r\n                    </TableRow>                \r\n                    <TableRow>\r\n                        <TableCell colSpan=\"3\">CARGO SUB TOTAL</TableCell>\r\n                        <TableCellFormatted value={cargoWeightTakeoff} decimalPlaces={0}/>\r\n                        <TableCellFormatted value={cargoMomentTakeoff} decimalPlaces={0}/>\r\n                    </TableRow>  \r\n                    <TableRow>\r\n                        <TableCell colSpan=\"3\">TAKEOFF CONDITION</TableCell>\r\n                        <TableCellFormatted value={takeoffWeight} decimalPlaces={0}/>\r\n                        <TableCellFormatted value={takeoffMoment} decimalPlaces={0}/>\r\n                    </TableRow>   \r\n                    <TableRow>\r\n                        <TableCell colSpan=\"3\">TAKEOFF CG % MAC</TableCell>\r\n                        <TableCellFormatted colSpan='2' value={takeoffMAC} post=\"%\" decimalPlaces={1}/>\r\n                    </TableRow> \r\n                    <TableRow>\r\n                        <TableCell colSpan=\"3\">ZERO FUEL WEIGHT</TableCell>\r\n                        <TableCellFormatted value={takeoffZeroFuelWeight} decimalPlaces={0}/>\r\n                        <TableCellFormatted value={takeoffZeroFuelMoment} decimalPlaces={0}/>\r\n                    </TableRow>  \r\n                    <TableRow>\r\n                        <TableCell colSpan=\"3\">LESS AIR DROP LOAD</TableCell>\r\n                        <TableCellFormatted value={cargoWeightTakeoff-cargoWeightLanding} decimalPlaces={0}/>\r\n                        <TableCellFormatted value={cargoMomentTakeoff-cargoMomentLanding} decimalPlaces={0}/>\r\n                    </TableRow>    \r\n                    <TableRow>\r\n                        <TableCell colSpan=\"3\">ADJ ZFW/M</TableCell>\r\n                        <TableCellFormatted value={landingZeroFuelWeight} decimalPlaces={0}/>\r\n                        <TableCellFormatted value={landingZeroFuelMoment} decimalPlaces={0}/>\r\n                    </TableRow>  \r\n                    <TableRow>\r\n                        <TableCell colSpan=\"3\">EST. LANDING FUEL</TableCell>\r\n                        <TableCellFormatted value={fuel.landing.readOnly.totalFuel} decimalPlaces={0}/>\r\n                        <TableCellFormatted value={fuel.landing.readOnly.totalMoment} decimalPlaces={0}/>\r\n                    </TableRow>  \r\n                    <TableRow>\r\n                        <TableCell colSpan=\"3\">EST. LANDING CONDITION</TableCell>\r\n                        <TableCellFormatted value={landingWeight} decimalPlaces={0}/>\r\n                        <TableCellFormatted value={landingMoment} decimalPlaces={0}/>\r\n                    </TableRow>     \r\n                    <TableRow>\r\n                        <TableCell colSpan=\"3\">EST. LANDING CG % MAC</TableCell>\r\n                        <TableCellFormatted colSpan='2' value={landingMAC} post=\"%\" decimalPlaces={1}/>\r\n                    </TableRow>  \r\n                </TableBody>\r\n            </Table>\r\n\r\n            <Table compact size=\"small\" unstackable celled columns='4' style={{maxWidth:'600px'}} attached=\"top\">\r\n                <TableHeader>\r\n                    <TableRow>\r\n                        <TableHeaderCell textAlign='center'>CARGO</TableHeaderCell>\r\n                        <TableHeaderCell textAlign='center'>ARM</TableHeaderCell>\r\n                        <TableHeaderCell textAlign='center'>WEIGHT</TableHeaderCell>\r\n                        <TableHeaderCell textAlign='center'>MOMENT/1000</TableHeaderCell>\r\n                    </TableRow>\r\n                </TableHeader>\r\n                <TableBody>\r\n                    {\r\n                        cargo.map( (item) => {\r\n                            return  <TableRow>\r\n                                        <TableCell>{item.expended?' ':null}{item.name}</TableCell>\r\n                                        <TableCellFormatted value={item.arm} decimalPlaces={0}/>\r\n                                        <TableCellFormatted value={item.weight} decimalPlaces={0}/>\r\n                                        <TableCellFormatted value={item.moment} decimalPlaces={0}/>\r\n                                    </TableRow>\r\n                        })\r\n                    }                   \r\n                    <TableRow>\r\n                        <TableCell colSpan=\"2\">CARGO SUB TOTAL</TableCell>\r\n                        <TableCellFormatted value={cargoWeightTakeoff} decimalPlaces={0}/>\r\n                        <TableCellFormatted value={cargoMomentTakeoff} decimalPlaces={0}/>\r\n                    </TableRow>  \r\n                </TableBody>\r\n            </Table>\r\n            \r\n            <Table compact size=\"small\" unstackable celled columns='4' style={{maxWidth:'600px'}} attached=\"top\">\r\n                <TableHeader>\r\n                    <TableRow>\r\n                        <TableHeaderCell textAlign='center'>CONDITION</TableHeaderCell>\r\n                        <TableHeaderCell textAlign='center'>TAKEOFF</TableHeaderCell>\r\n                        <TableHeaderCell textAlign='center'>LANDING</TableHeaderCell>\r\n                        <TableHeaderCell textAlign='center'>OP AREA <Dropdown onChange={(e, v)=>outputSettingsDispatch('set-op-area', v.value)} options={limitingFuelOptions} value={outputSettings.whichOpArea}/></TableHeaderCell>\r\n                    </TableRow>\r\n                </TableHeader>\r\n                <TableBody>\r\n                    <TableRow>\r\n                        <TableCell>ALLOWABLE GW</TableCell>\r\n                        <TableCell>\r\n                            <TouchInput as={Input} value={outputSettings.allowableTakeoffWeight} onChange={(v)=>{\r\n                                v=Number(v);\r\n                                outputSettingsDispatch('set-allowable-takeoff', v);\r\n                            }} fluid  type='number' title='Allowable Takeoff Weight' input={inputStyle}/>\r\n                        </TableCell>\r\n                        <TableCell>\r\n                            <TouchInput as={Input} value={outputSettings.allowableLandingWeight} onChange={(v)=>{\r\n                                v=Number(v);\r\n                                outputSettingsDispatch('set-allowable-landing', v);\r\n                            }} fluid  type='number' title='Allowable Landing Weight' input={inputStyle}/>\r\n                        </TableCell>\r\n                        <TableCellFormatted value={limitingFuelMaxZFW[outputSettings.whichOpArea]} decimalPlaces={0}/>\r\n                    </TableRow>\r\n                    <TableRow>\r\n                        <TableCell>TOTAL AIRCRAFT WT</TableCell>\r\n                        <TableCellFormatted value={totalAicraftWeight} decimalPlaces={0}/>\r\n                        <TableCell></TableCell>\r\n                        <TableCell></TableCell>\r\n                    </TableRow>\r\n                    <TableRow>\r\n                        <TableCell>OP WT+LNDG FUEL</TableCell>\r\n                        <TableCell></TableCell>\r\n                        <TableCellFormatted value={aircraft.readOnly.operatingWeight+fuel.landing.readOnly.totalFuel} decimalPlaces={0}/>\r\n                        <TableCell></TableCell>\r\n                    </TableRow>\r\n                    <TableRow>\r\n                        <TableCell>OP WT</TableCell>\r\n                        <TableCell></TableCell>\r\n                        <TableCell></TableCell>\r\n                        <TableCellFormatted value={aircraft.readOnly.operatingWeight} decimalPlaces={0}/>\r\n                    </TableRow>\r\n                    <TableRow>\r\n                        <TableCell>ALLOWABLE LOAD</TableCell>\r\n                        <TableCellFormatted value={outputSettings.allowableTakeoffWeight-totalAicraftWeight} decimalPlaces={0}/>\r\n                        <TableCellFormatted value={outputSettings.allowableLandingWeight-aircraft.readOnly.operatingWeight-fuel.landing.readOnly.totalFuel} decimalPlaces={0}/>\r\n                        <TableCellFormatted value={limitingFuelMaxZFW[outputSettings.whichOpArea]-aircraft.readOnly.operatingWeight} decimalPlaces={0}/>\r\n                    </TableRow>\r\n                </TableBody>\r\n            </Table>\r\n            \r\n            <Table compact size=\"small\" unstackable celled style={{maxWidth:'600px'}} attached=\"bottom\">\r\n                <TableBody>\r\n                    <TableRow>\r\n                        <TableHeaderCell>TAKEOFF CG LIMITS {takeoffHasFuelInExternals?'(ext has fuel)':'(no ext fuel)'}</TableHeaderCell>\r\n                        <TableCellFormatted value={takeoffForwardCG} pre={\"FORWARD \"} post=\"%\" decimalPlaces={1}/>\r\n                        <TableCellFormatted value={takeoffAftCG} pre={\"AFT \"} post=\"%\" decimalPlaces={1}/>\r\n                    </TableRow>\r\n                    <TableRow>\r\n                        <TableHeaderCell>LANDING CG LIMITS {landingHasFuelInExternals?'(ext has fuel)':'(no ext fuel)'}</TableHeaderCell>\r\n                        <TableCellFormatted value={landingForwardCG} pre={\"FORWARD \"} post=\"%\" decimalPlaces={1}/>\r\n                        <TableCellFormatted value={landingAftCG} pre={\"AFT \"} post=\"%\" decimalPlaces={1}/>\r\n                    </TableRow>\r\n                </TableBody>\r\n            </Table>\r\n            \r\n            <Table compact size=\"small\" unstackable celled style={{maxWidth:'300px'}} attached=\"bottom\">\r\n                <TableBody>\r\n                    <TableRow>\r\n                        <TableHeaderCell>Operating Area on Takeoff</TableHeaderCell>\r\n                        <TableCell>{takeoffOpArea}</TableCell>\r\n                    </TableRow>\r\n                    <TableRow>\r\n                        <TableHeaderCell>Operating Area on Landing</TableHeaderCell>\r\n                        <TableCell>{landingOpArea}</TableCell>\r\n                    </TableRow>\r\n                </TableBody>\r\n            </Table>\r\n        </>\r\n    );\r\n}","import React from 'react';\r\nimport { Container, Header, Segment } from 'semantic-ui-react';\r\nimport WABMenu from './components/WABMenu';\r\nimport Aircraft from './components/Aircraft';\r\nimport Cargo from './components/Cargo';\r\nimport Options from './components/Options';\r\nimport Fuel from './components/Fuel';\r\n\r\nimport useAircraftReducer from './reducers/aircraftReducer';\r\nimport useSelectedMenuReducer from './reducers/selectedMenuReducer';\r\nimport useCargoReducer from './reducers/cargoReducer';\r\nimport useFuelReducer from './reducers/fuelReducer';\r\nimport CPRaw from './components/CPRaw';\r\nimport Output from './components/Output';\r\n\r\nimport ChartProject from './charts';\r\n\r\nconst menuItems=[\r\n    {page: 'aircraft', title: 'Aircraft'},\r\n    {page: 'fuel', title: 'Fuel'},\r\n    {page: 'cargo', title: 'Cargo'},\r\n    {page: 'output', title: 'Output'},\r\n    {page: 'cpraw',title: 'CP Raw'},\r\n    {page: 'options', title: 'Options'},\r\n]\r\n\r\n\r\nconst chartProject = new ChartProject();\r\n\r\n\r\nfunction App() {\r\n    const [selectedMenu, selectedMenuDispatch] = useSelectedMenuReducer(1000);\r\n    const [aircraft, aircraftDispatch] = useAircraftReducer(1000);\r\n    const [fuel, fuelDispatch] = useFuelReducer(1000);\r\n    const [cargo, cargoDispatch] = useCargoReducer(1000);\r\n\r\n    let pageToShow=null;\r\n\r\n    if (selectedMenu?.page==='aircraft'){\r\n        pageToShow=<Aircraft aircraft={aircraft} aircraftDispatch={aircraftDispatch}/>\r\n    }else if (selectedMenu?.page==='fuel'){\r\n        pageToShow=<Fuel fuel={fuel} fuelDispatch={fuelDispatch}/>\r\n    }else if (selectedMenu?.page==='cargo'){\r\n        pageToShow=<Cargo cargo={cargo} cargoDispatch={cargoDispatch}/>\r\n    }else if (selectedMenu?.page==='cpraw'){\r\n        pageToShow=<CPRaw chartProject={chartProject}/>\r\n    }else if (selectedMenu?.page==='output'){\r\n        pageToShow=<Output chartProject={chartProject}/>\r\n    }else if (selectedMenu?.page==='options'){\r\n        pageToShow=<Options/>\r\n    }else{\r\n        selectedMenuDispatch('aircraft');\r\n    }\r\n\r\n    return ( \r\n        <Container style={{flexGrow:1, margin:0}}>\r\n            <Segment inverted attached=\"top\">\r\n                <Header as='h1' textAlign=\"center\">CWAB</Header>\r\n                <Header as='h6' textAlign='center' style={{color:'#FFFFFF33'}}>Reference Use Only</Header>\r\n            </Segment>\r\n            <WABMenu menuItems={menuItems} selectedMenu={selectedMenu} selectedMenuDispatch={selectedMenuDispatch}/>\r\n            <Segment attached=\"bottom\" secondary style={{alignItems:'center', display:'flex', flexDirection:'column'}}>\r\n                {pageToShow}\r\n            </Segment>\r\n        </Container>\r\n    );\r\n}\r\n\r\nexport default App;","import {Point,Line,LinearChart,ClampChart,TrendChart,PolyChart,ChartTableEntry,ChartTable,ChartInput,ChartScript,ChartConstant} from './ChartObjects';\n\nexport default class ChartProject{\n\tconstructor(){\n\t\tconst O=true;\n\t\tconst F=false;\n\t\tconst T=this;\n\t\tconst P=(x,y)=>{return new Point(x,y);};\n\t\tconst L=(val,...points)=>{return new Line(points,val);};\n\t\tT._$1=new ChartConstant('zero',0);\n\t\tT.$operatingWeight=new ChartInput('operatingWeight','exit double(input);','97000');\n\t\tT.$fuelWeightTakeoff=new ChartInput('fuelWeightTakeoff','exit double(input);','32000');\n\t\tT.$cargoWeightTakeoff=new ChartInput('cargoWeightTakeoff','exit double(input);','30000');\n\t\tT.$fuelWeightLanding=new ChartInput('fuelWeightLanding','exit double(input);','10000');\n\t\tT.$cargoWeightLanding=new ChartInput('cargoWeightLanding','exit double(input);','0');\n\t\t\n\t\tT.$takeoffGrossWeight=new ChartScript('takeoffGrossWeight','exit operatingWeight+fuelWeightTakeoff+cargoWeightTakeoff;');\n\t\tT.$landingGrossWeight=new ChartScript('landingGrossWeight','exit operatingWeight+fuelWeightLanding+cargoWeightLanding;');\n\t\tT.$takeoffZeroFuelWeight=new ChartScript('takeoffZeroFuelWeight','exit operatingWeight+cargoWeightTakeoff;');\n\t\tT.$landingZeroFuelWeight=new ChartScript('landingZeroFuelWeight','exit operatingWeight+cargoWeightLanding;');\n\t\tT.$extForwardCGTakeoff=new LinearChart('extForwardCGTakeoff',O,T.$takeoffGrossWeight,T._$1,L(0,P(26.813,174990.853),P(24.815,158087.342),P(23.023,143364.138),P(21.926,134688.733),P(20.884,127810.283),P(19.995,123129.834),P(19.032,118682.115),P(18.089,115501.478),P(17.818,114458.825),P(16.771,108852.63),P(15.531,103039.564),P(15.06,100970.858),P(15.047,69501.234)));\n\t\tT.$extAftCGTakeoff=new LinearChart('extAftCGTakeoff',O,T.$takeoffGrossWeight,T._$1,L(0,P(29.104,175001.479),P(29.092,150482.045),P(29.122,131863.684),P(29.978,127698.22),P(29.984,114949.377),P(29.11,105356.187),P(28.375,97814.174),P(27.513,89861.924),P(26.989,85444.008),P(26.061,78533.125),P(25.331,73957.427),P(24.699,69918.189)));\n\t\tT.$noExtForwardCGTakeoff=new LinearChart('noExtForwardCGTakeoff',O,T.$takeoffGrossWeight,T._$1,L(0,P(15.047,69501.234),P(15.06,100970.858),P(15.531,103039.564),P(16.771,108852.63),P(18.394,117932.14),P(19.932,127760.903),P(21.189,137156.68),P(22.496,148241.099),P(23.67,159282.22),P(24.629,168894.49),P(25.225,175086.178)));\n\t\tT.$noExtAftCGTakeoff=new LinearChart('noExtAftCGTakeoff',O,T.$takeoffGrossWeight,T._$1,L(0,P(24.699,69918.189),P(25.331,73957.427),P(26.061,78533.125),P(26.989,85444.008),P(27.513,89861.924),P(28.375,97814.174),P(29.11,105356.187),P(29.984,114949.377),P(29.978,127698.22),P(29.995,175012.734)));\n\t\tT.$extForwardCGLanding=new ChartScript('extForwardCGLanding','exit runLinear(\"extForwardCGTakeoff\", landingGrossWeight, zero);');\n\t\tT.$extAftCGLanding=new ChartScript('extAftCGLanding','exit runLinear(\"extAftCGTakeoff\", landingGrossWeight, zero);');\n\t\tT.$noExtForwardCGLanding=new ChartScript('noExtForwardCGLanding','exit runLinear(\"noExtForwardCGTakeoff\", landingGrossWeight, zero);');\n\t\tT.$noExtAftCGLanding=new ChartScript('noExtAftCGLanding','exit runLinear(\"noExtAftCGTakeoff\", landingGrossWeight, zero);');\n\t\tT.$operatingAreaTakeoff=new PolyChart('operatingAreaTakeoff',T.$fuelWeightTakeoff,T.$takeoffZeroFuelWeight,L(0,P(-121.984,102094.804),P(2228.694,102119.533),P(13784.132,113370.955),P(31352.356,120171.265),P(42957.281,108548.917),P(53949.933,101106.062),P(60551.976,94434.865),P(60537.305,79670.259),P(-98.537,79660.76)),L(1,P(-121.984,102094.804),P(2228.694,102119.533),P(13784.132,113370.955),P(31352.356,120171.265),P(42957.281,108548.917),P(53949.933,101106.062),P(43029.506,111996.042),P(28015.745,126965.57),P(24972.236,130007.164),P(21433.847,130031.892),P(14307.581,123478.866),P(4632.686,114255.173),P(2356.24,112153.259),P(-68.669,112153.259)),L(2,P(-68.669,112153.259),P(2356.24,112153.259),P(4632.686,114255.173),P(14307.581,123478.866),P(21433.847,130031.892),P(24972.236,130007.164),P(28015.745,126965.57),P(53949.933,101106.062),P(60525.811,94428.358),P(60567.247,103371.041),P(51392.316,112585.588),P(42308.225,121573.176),P(32610.959,131377.817),P(29136.294,134850.294),P(21051.454,134872.99),P(12164.698,132937.567),P(2306.751,128376.906),P(-135.453,128376.906)),L(3,P(40013.038,134889.69),P(60589.078,114232.036),P(60567.247,103371.041),P(51392.316,112585.588),P(42308.225,121573.176),P(32610.959,131377.817),P(29136.294,134850.294)));\n\t\tT.$operatingAreaLanding=new ChartScript('operatingAreaLanding','exit runPoly(\"operatingAreaTakeoff\", fuelWeightLanding, landingZeroFuelWeight);');\n\t\tT._$21=new LinearChart('areaAMaxZFWTakeoff',F,T.$fuelWeightTakeoff,T._$1,L(0,P(-121.984,102094.804),P(2228.694,102119.533),P(13784.132,113370.955),P(31352.356,120171.265),P(42957.281,108548.917),P(53949.933,101106.062),P(60551.976,94434.865)));\n\t\tT.$areaAMaxZFWOverall=new ChartScript('areaAMaxZFWOverall','exit min(areaAMaxZFWTakeoff, runLinear(\"areaAMaxZFWTakeoff\", fuelWeightLanding, zero));');\n\t\tT._$23=new LinearChart('areaBMaxZFWTakeoff',F,T.$fuelWeightTakeoff,T._$1,L(0,P(-68.669,112153.259),P(2356.24,112153.259),P(4632.686,114255.173),P(14307.581,123478.866),P(21433.847,130031.892),P(24972.236,130007.164),P(28015.745,126965.57),P(43029.506,111996.042),P(53949.933,101106.062),P(60607.369,94397.62)));\n\t\tT.$areaBMaxZFWOverall=new ChartScript('areaBMaxZFWOverall','exit min(areaBMaxZFWTakeoff, runLinear(\"areaBMaxZFWTakeoff\", fuelWeightLanding, zero));');\n\t\tT._$25=new LinearChart('areaCMaxZFWTakeoff',F,T.$fuelWeightTakeoff,T._$1,L(0,P(-135.453,128376.906),P(2306.751,128376.906),P(12164.698,132937.567),P(21051.454,134872.99),P(29136.294,134850.294),P(32610.959,131377.817),P(42308.225,121573.176),P(51392.316,112585.588),P(60567.247,103371.041)));\n\t\tT.$areaCMaxZFWOverall=new ChartScript('areaCMaxZFWOverall','exit min(areaCMaxZFWTakeoff, runLinear(\"areaCMaxZFWTakeoff\", fuelWeightLanding, zero));');\n\t\tT._$27=new LinearChart('areaDMaxZFWTakeoff',F,T.$fuelWeightTakeoff,T._$1,L(0,P(-165.173,128415.847),P(2335.646,128415.847),P(11917.437,132908.871),P(21021.543,134958.814),P(40013.038,134889.69),P(60589.078,114232.036),P(61006.064,113774.364)));\n\t\tT.$areaDMaxZFWOverall=new ChartScript('areaDMaxZFWOverall','exit min(areaDMaxZFWTakeoff, runLinear(\"areaDMaxZFWTakeoff\", fuelWeightLanding, zero));');\n\n\t\tT.calcArray=[T._$1,T.$operatingWeight,T.$fuelWeightTakeoff,T.$cargoWeightTakeoff,T.$fuelWeightLanding,T.$cargoWeightLanding,T.$takeoffGrossWeight,T.$landingGrossWeight,T.$takeoffZeroFuelWeight,T.$landingZeroFuelWeight,T.$extForwardCGTakeoff,T.$extAftCGTakeoff,T.$noExtForwardCGTakeoff,T.$noExtAftCGTakeoff,T.$extForwardCGLanding,T.$extAftCGLanding,T.$noExtForwardCGLanding,T.$noExtAftCGLanding,T.$operatingAreaTakeoff,T.$operatingAreaLanding,T._$21,T.$areaAMaxZFWOverall,T._$23,T.$areaBMaxZFWOverall,T._$25,T.$areaCMaxZFWOverall,T._$27,T.$areaDMaxZFWOverall,];\n\t}\n\n\tcalcInputs=()=>{\n\t\tconst alerts=[];\n\t\tconst notices=[];\n\t\tfor (let obj of this.calcArray){\n\t\t\tif (obj.type==='input') obj.calc(this.calcArray, alerts, notices);\n\t\t}\n\t\treturn [alerts, notices];\n\t};\n\n\tcalc=()=>{\n\t\tconst alerts=[];\n\t\tconst notices=[];\n\t\tfor (let obj of this.calcArray){\n\t\t\tobj.calc(this.calcArray, alerts, notices);\n\t\t}\n\t\treturn [alerts, notices];\n\t};\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './assets/fomantic/semantic.min.css';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <div className='background'>\n      <App/>\n    </div>\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}