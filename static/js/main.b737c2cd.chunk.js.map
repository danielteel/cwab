{"version":3,"sources":["components/WABMenu.js","common.js","components/CrewCalcModal.js","components/Aircraft.js","useSorted.js","components/ConfirmationModal.js","components/Cargo.js","reducers/aircraftReducer.js","reducers/cargoReducer.js","reducers/fuelReducer.js","getLocalStorageSize.js","components/Options.js","components/IndividualFuel.js","components/Fuel.js","reducers/selectedMenuReducer.js","ChartObjects.js","components/Calced.js","charts.js","App.js","index.js"],"names":["WABMenu","_ref","menuItems","selectedMenu","selectedMenuDispatch","page","_jsx","Menu","attached","style","overflowX","overflowY","touchAction","children","map","item","Item","name","title","active","onClick","realNumber","string","real","Number","isFinite","toMAC","arm","Math","round","calcArm","weight","moment","divider","arguments","length","undefined","formatArm","formatMoment","formatWeight","calcMoment","isAboutEquals","a","b","smallestDiff","abs","displayVal","number","formatted","decimal","toFixed","i","isGoodObject","obj","Array","isArray","defaultCrew","checked","CrewCalcModal","setCrewData","open","setOpen","useState","crew","setCrew","_Fragment","_jsxs","Modal","onClose","onOpen","trigger","Button","icon","Icon","ModalHeader","ModalContent","List","size","member","ListItem","padding","Checkbox","onChange","e","data","newCrew","label","ModalActions","color","inputStyle","paddingLeft","paddingRight","Aircraft","aircraft","aircraftDispatch","Header","textAlign","Table","unstackable","maxWidth","Row","HeaderCell","Body","Cell","TouchInput","as","Input","value","basicWeight","v","fluid","type","input","basicMoment","columns","crewWeight","crewMoment","_ref2","baggageWeight","baggageMoment","stewardsWeight","stewardsMoment","emergencyWeight","emergencyMoment","extraWeight","extraMoment","readOnly","operatingWeight","operatingMoment","sortReducer","state","key","dir","matchSort","sortObj","getSortedList","sorted","sortDetails","list","sortGetterArgs","listCopy","sortDetail","find","details","sort","aVal","bVal","getter","String","localeCompare","Date","console","warn","ConfirmationModal","onYes","onNo","isOpen","content","Content","Description","Actions","positive","noPadCell","border","deleteCell","Cargo","cargo","cargoDispatch","deleteItemId","_setDeleteItemId","itemList","sortBy","items","sortedDispatch","useReducer","_len","_key","bind","useSorted","armTotal","weightTotal","momentTotal","forEach","setDeleteItemId","id","trim","sortable","className","colSpan","display","alignItems","Group","vertical","labelPosition","flexGrow","fontSize","width","collapsing","disabled","fitted","expended","floated","negative","Footer","emptyAircraft","aircraftReducer","action","payload","s","fields","field","sanitizeAircraft","error","useAircraftReducer","hysterisis","current","useStoredReducer","localStorage","sanitizeCargo","Boolean","cargoReducer","callback","expectedArm","index","element","entries","filter","newItem","arrayOfObjs","property","newKey","currentKey","getUniqueId","useCargoReducer","itemGroup","itemGroupDispatch","maxAux","maxExt","maxIB","maxOB","momentSimplifier","blankSingleFuel","lext","main1","main2","laux","raux","main3","main4","rext","totalFuel","totalMoment","obs","ibs","auxs","exts","blankFuel","takeoff","landing","interpolateTable","valueIn","table","below","above","in","out","resultDiff","valDiff","getSingleAuxMoment","auxFuel","getSingleExtMoment","extFuel","getSingleIBMoment","ibFuel","getSingleOBMoment","obFuel","sanitizeFuelState","addReadOnly","fuelReducer","useFuelReducer","fuel","fuelDispatch","getUsedSpace","storageUsed","getItem","getSpaceUsedByWAB","spaceUsedByWAB","toLowerCase","startsWith","Options","setSpaceUsedByWAB","spaceUsed","setSpaceUsed","deleteLocalModal","setDeleteLocalModal","useEffect","flushSaveToStorage","storageChanged","window","addEventListener","removeEventListener","Segment","secondary","Progress","total","progress","precision","ceil","IndividualFuel","setFuel","compact","desiredTotalFuel","mains","max","min","outboards","inboards","marginBottom","Fuel","newFuel","selectedMenuReducer","isAnyNil","vals","allowableDelta","Point","constructor","x","y","this","flip","tempX","distance","otherPoint","xDiff","yDiff","sqrt","Line","pointsArray","points","point","flipPoints","isLinear","yIsInputAxis","lastX","goingUp","findSegment","leftX","rightX","Rect","pointA","pointB","isPointInside","px","py","setPointA","toPoint","setPointB","getSegmentIntersectionWith","seg1","seg2","needsToBeTouching","xy","t","ua","rect1","rect2","getSegmentIntersection","otherSeg","figureYCrossingWith","xAxis","intersection","figureYCrossing","ChartObject","initialValue","calc","chartObjectArray","alertsArray","noticesArray","LinearChart","xOrYRefObj","zRefObj","super","_len2","lines","_key2","line","figureChart","xOrYIn","zIn","_aboveLine$findSegmen","_belowLine$findSegmen","belowLine","aboveLine","linesAreSame","currentLine","aboveCrossing","belowCrossing","PolyChart","xInRefObj","yInRefObj","_len4","_key4","figurePoly","xIn","yIn","minX","maxX","currentPoint","horizSeg","curSeg","intersectsLeftOfX","_curSeg$getSegmentInt","ChartConstant","ScriptRuntime","findChart","linear","popFn","z","chartName","chart","NumberObj","clamp","figureClamp","poly","trend","exit","entry","figureTrend","alert","push","BoolObj","notice","buildExternList","thisObj","externs","Interpreter","funcDef","ChartInput","script","invalid","interpreter","StringObj","invalidObj","result","runCode","log","message","exitObject","ChartScript","scriptRuntime","charts","calcInputs","alerts","notices","calcArray","O","F","T","P","L","val","_$1","$operatingWeight","$fuelWeightTakeoff","$cargoWeightTakeoff","$fuelWeightLanding","$cargoWeightLanding","$takeoffGrossWeight","$landingGrossWeight","$takeoffZeroFuelWeight","$landingZeroFuelWeight","$extForwardCGTakeoff","$extAftCGTakeoff","$noExtForwardCGTakeoff","$noExtAftCGTakeoff","$extForwardCGLanding","$extAftCGLanding","$noExtForwardCGLanding","$noExtAftCGLanding","$operatingAreaTakeoff","$operatingAreaLanding","_$21","$areaAMaxZFWOverall","_$23","$areaBMaxZFWOverall","_$25","$areaCMaxZFWOverall","_$27","$areaDMaxZFWOverall","displayOpArea","Calced","whichOpArea","setWhichOpArea","cargoWeightTakeoff","cargoMomentTakeoff","cargoWeightLanding","cargoMomentLanding","takeoffMAC","takeoffHasFuelInExternals","takeoffForwardCG","takeoffAftCG","takeoffOpArea","landingMAC","landingHasFuelInExternals","landingForwardCG","landingAftCG","landingOpArea","limitingFuelMaxZFW","A","B","C","D","App","sessionStorage","useSelectedMenuReducer","pageToShow","Container","margin","inverted","flexDirection","ReactDOM","render","React","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b737c2cd.chunk.js","sourcesContent":["import { Menu } from \"semantic-ui-react\";\r\nexport default function WABMenu({menuItems, selectedMenu, selectedMenuDispatch}){\r\n    if (!selectedMenu || !selectedMenu.page) selectedMenuDispatch(menuItems[0].page);\r\n\r\n    return (\r\n            <Menu attached style={{overflowX: 'auto', overflowY:'clip', touchAction:'pan-x pan-y'}}>\r\n                {\r\n                    menuItems.map( item => <Menu.Item\r\n                        style={{touchAction:'pan-x pan-y'}}\r\n                        key={\"menu\"+item.page}\r\n                        name={item.title}\r\n                        active={selectedMenu?.page === item.page}\r\n                        onClick={()=>selectedMenuDispatch(item.page)}\r\n                    />)\r\n                }\r\n            </Menu>\r\n    );\r\n}","const momentSimplifier=1000;\r\n\r\nfunction realNumber(string){\r\n    let real = Number(string);\r\n    if (!isFinite(real)) real=0;\r\n    return real;\r\n}\r\n\r\nfunction toMAC(arm){\r\n    return Math.round((100*(Number(arm)-487.4))/164.5*10)/10;\r\n}\r\n\r\nfunction calcArm(weight, moment, divider=100){\r\n    return formatArm((formatMoment(moment)*momentSimplifier)/formatWeight(weight), divider);\r\n}\r\n\r\nfunction calcMoment(weight, arm){\r\n    return formatMoment((Number(weight)*Number(arm))/momentSimplifier);\r\n}\r\n\r\nfunction formatArm(arm, divider=100){\r\n    arm=realNumber(arm);\r\n    return Math.round(arm*divider)/divider;\r\n}\r\n\r\nfunction formatWeight(weight){\r\n    weight=realNumber(weight);\r\n    return Math.round(weight*100)/100;\r\n}\r\n\r\nfunction formatMoment(moment){\r\n    return Math.round(realNumber(moment)*10000)/10000;\r\n}\r\n\r\nfunction isAboutEquals(a,b, smallestDiff=0.0000001){\r\n    a=realNumber(a);\r\n    b=realNumber(b);\r\n    if (Math.abs(a-b)<smallestDiff){\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nfunction displayVal(number, decimal=0){\r\n    number=Number(number);\r\n    if (!isFinite(number)) number=0;\r\n\r\n    let formatted;\r\n    if (decimal>=0){\r\n        formatted=number.toFixed(decimal);\r\n    }else{\r\n        formatted=number;\r\n        for (let i=0;i>decimal;i--){\r\n            formatted/=10;\r\n        }\r\n        formatted=Math.round(formatted);\r\n        for (let i=0;i>decimal;i--){\r\n            formatted*=10;\r\n        }\r\n    }\r\n    return formatted;\r\n}\r\n\r\nfunction getUniqueId(arrayOfObjs, property){\r\n    let newKey = 0;\r\n    try {\r\n        for (const item of arrayOfObjs){\r\n            let currentKey = Number(item[property]);\r\n            if (!isFinite(currentKey)) currentKey = 0;\r\n            if (newKey<=currentKey) newKey = currentKey+1;\r\n        }\r\n    } catch {\r\n    }\r\n    return newKey;\r\n}\r\n\r\nfunction isGoodObject(obj){\r\n    return !(typeof obj!=='object' || Array.isArray(obj) || obj===null);\r\n}\r\n\r\n\r\n\r\nexport {toMAC, calcArm, calcMoment, realNumber, formatArm, formatWeight, formatMoment, isAboutEquals, displayVal, getUniqueId, isGoodObject, momentSimplifier};","import {useState} from 'react';\r\nimport { Table, Input, Button, Header, Icon, Modal, ModalHeader, ModalDescription, ModalContent, ModalActions, Checkbox, List, ListItem } from 'semantic-ui-react';\r\nimport { calcArm, calcMoment } from '../common';\r\n\r\n\r\nconst defaultCrew=[\r\n    {name: 'Pilot',         weight: 200, arm: 140, checked: true},\r\n    {name: 'Copilot',       weight: 200, arm: 140, checked: true},\r\n    {name: 'CSO',           weight: 200, arm: 194, checked: false},\r\n    {name: 'AFDS',          weight: 200, arm: 227, checked: false},\r\n    {name: 'Extra Cockpit', weight: 200, arm: 227, checked: false},\r\n    \r\n    {name: 'Fwd Left LM',   weight: 200, arm: 281, checked: false},\r\n    {name: 'Fwd Right LM',  weight: 200, arm: 281, checked: false},\r\n    {name: 'Aft Left LM',   weight: 200, arm: 710, checked: true},\r\n    {name: 'Aft Right LM',  weight: 200, arm: 710, checked: false},\r\n];\r\n\r\nexport default function CrewCalcModal({setCrewData}){\r\n    const [open, setOpen] = useState(false);\r\n    const [crew, setCrew]=useState(defaultCrew);\r\n\r\n    return <>\r\n        <Modal \r\n            onClose={()=>{}}\r\n            onOpen={()=>{setOpen(true)}}\r\n            open={open}\r\n            trigger={<Button icon><Icon name='calculator'/></Button>}\r\n        >\r\n            <ModalHeader>\r\n                Crew Calc\r\n            </ModalHeader>\r\n            <ModalContent>\r\n                <List size='huge'>\r\n                {\r\n                    crew.map(member=>(\r\n                        <ListItem style={{padding:'5px'}}>\r\n                        <Checkbox\r\n                            onChange={(e, data)=>{\r\n                                const newCrew=[...crew];\r\n                                for (const a of newCrew){\r\n                                    if (a.name===member.name){\r\n                                        a.checked=data.checked;\r\n                                    }\r\n                                }\r\n                                setCrew(newCrew);\r\n                            }}\r\n                            checked={member.checked}\r\n                            label={member.name+' '+member.weight+'lbs at FS '+member.arm}\r\n                        />\r\n                        </ListItem>\r\n                    ))\r\n                }\r\n                </List>\r\n            </ModalContent>\r\n            <ModalActions>\r\n                <Button\r\n                    color='green' \r\n                    onClick={()=>{\r\n                        let weight=0;\r\n                        let moment=0;\r\n                        for (const member of crew){\r\n                            if (member.checked){\r\n                                weight+=member.weight;\r\n                                moment+=calcMoment(member.weight, member.arm);\r\n                            }\r\n                        }\r\n                        setCrewData({weight, moment});\r\n                        setOpen(false);\r\n                    }}\r\n                >\r\n                    Save\r\n                </Button>\r\n                <Button color='red' onClick={()=>{\r\n                    setOpen(false);\r\n                }}>Cancel</Button>\r\n            </ModalActions>\r\n        </Modal>\r\n    </>\r\n\r\n}","import TouchInput from '@dteel/touch-input'\r\nimport { Table, Input, Button, Header, Icon, ModalHeader, ModalDescription, ModalContent, ModalActions } from 'semantic-ui-react';\r\n\r\nimport {useState} from 'react';\r\n\r\nimport { calcArm, calcMoment, toMAC } from '../common';\r\nimport CrewCalcModal from './CrewCalcModal';\r\n\r\nconst noPadCell={padding:'1px', border:'none'};\r\nconst deleteCell={padding:'0px 4px 0px 0px', border:'none'};\r\nconst inputStyle={style:{paddingLeft:'5px', paddingRight:'5px'}};\r\n\r\n\r\n\r\nexport default function Aircraft({aircraft, aircraftDispatch}){\r\n\r\n    return (\r\n        <>\r\n            <Header textAlign='center'>\r\n                Aircraft\r\n            </Header>\r\n            <Table unstackable style={{maxWidth: '650px'}}>\r\n                <Table.Header>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell textAlign='center'>Basic Weight</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Moment</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Arm</Table.HeaderCell>\r\n                    </Table.Row>\r\n                </Table.Header>\r\n                <Table.Body>\r\n                    <Table.Row>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={aircraft.basicWeight} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, basicWeight: v})\r\n                            }} fluid type='number' title='Basic Weight' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={aircraft.basicMoment} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, basicMoment: v})\r\n                            }} fluid type='number' title='Basic Moment' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={calcArm(aircraft.basicWeight, aircraft.basicMoment)} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, basicMoment: calcMoment(aircraft.basicWeight, v)})\r\n                            }} fluid type='number' title='Basic Arm' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                    </Table.Row>\r\n                </Table.Body>\r\n            </Table>\r\n            <Table unstackable style={{maxWidth: '650px'}} columns={3}>\r\n                <Table.Header>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell textAlign='center'>Crew Weight</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Moment</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Arm</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'></Table.HeaderCell>\r\n                    </Table.Row>\r\n                </Table.Header>\r\n                <Table.Body>\r\n                    <Table.Row>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={aircraft.crewWeight} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, crewWeight: v})\r\n                            }} fluid type='number' title='Crew Weight' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={aircraft.crewMoment} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, crewMoment: v})\r\n                            }} fluid type='number' title='Crew Moment' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={calcArm(aircraft.crewWeight, aircraft.crewMoment)} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, crewMoment: calcMoment(aircraft.crewWeight, v)})\r\n                            }} fluid type='number' title='Crew Arm' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                        <Table.Cell>\r\n                            <CrewCalcModal setCrewData={({weight, moment})=>{\r\n                                aircraftDispatch('set', {...aircraft, crewWeight: weight, crewMoment: moment})\r\n                            }}/>\r\n                        </Table.Cell>\r\n                    </Table.Row>\r\n                </Table.Body>\r\n                <Table.Header>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell textAlign='center'>Crew Bag Weight</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Moment</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Arm</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'></Table.HeaderCell>\r\n                    </Table.Row>\r\n                </Table.Header>\r\n                <Table.Body>\r\n                    <Table.Row>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={aircraft.baggageWeight} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, baggageWeight: v})\r\n                            }} fluid type='number' title='Crew Bags Weight' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={aircraft.baggageMoment} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, baggageMoment: v})\r\n                            }} fluid type='number' title='Crew Bags Moment' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={calcArm(aircraft.baggageWeight, aircraft.baggageMoment)} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, baggageMoment: calcMoment(aircraft.baggageWeight, v)})\r\n                            }} fluid type='number' title='Crew Bags Arm' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                    </Table.Row>\r\n                </Table.Body>\r\n                <Table.Header>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell textAlign='center'>Stewards Weight</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Moment</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Arm</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'></Table.HeaderCell>\r\n                    </Table.Row>\r\n                </Table.Header>\r\n                <Table.Body>\r\n                    <Table.Row>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={aircraft.stewardsWeight} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, stewardsWeight: v})\r\n                            }} fluid type='number' title='Stewards Weight' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={aircraft.stewardsMoment} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, stewardsMoment: v})\r\n                            }} fluid type='number' title='Stewards Moment' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={calcArm(aircraft.stewardsWeight, aircraft.stewardsMoment)} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, stewardsMoment: calcMoment(aircraft.stewardsWeight, v)})\r\n                            }} fluid type='number' title='Stewards Arm' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                    </Table.Row>\r\n                </Table.Body>\r\n                <Table.Header>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell textAlign='center'>Emerg Weight</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Moment</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Arm</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'></Table.HeaderCell>\r\n                    </Table.Row>\r\n                </Table.Header>\r\n                <Table.Body>\r\n                    <Table.Row>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={aircraft.emergencyWeight} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, emergencyWeight: v})\r\n                            }} fluid type='number' title='Emerg Weight' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={aircraft.emergencyMoment} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, emergencyMoment: v})\r\n                            }} fluid type='number' title='Emerg Moment' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={calcArm(aircraft.emergencyWeight, aircraft.emergencyMoment)} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, emergencyMoment: calcMoment(aircraft.emergencyWeight, v)})\r\n                            }} fluid type='number' title='Emerg Arm' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                    </Table.Row>\r\n                </Table.Body>\r\n                <Table.Header>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell textAlign='center'>Extra Weight</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Moment</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Arm</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'></Table.HeaderCell>\r\n                    </Table.Row>\r\n                </Table.Header>\r\n                <Table.Body>\r\n                    <Table.Row>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={aircraft.extraWeight} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, extraWeight: v})\r\n                            }} fluid type='number' title='Extra Weight' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={aircraft.extraMoment} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, extraMoment: v})\r\n                            }} fluid type='number' title='Extra Moment' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                        <Table.Cell>\r\n                            <TouchInput as={Input} value={calcArm(aircraft.extraWeight, aircraft.extraMoment)} onChange={(v)=>{\r\n                                aircraftDispatch('set', {...aircraft, extraMoment: calcMoment(aircraft.extraWeight, v)})\r\n                            }} fluid type='number' title='Extra Arm' input={inputStyle}/>\r\n                        </Table.Cell>\r\n                    </Table.Row>\r\n                </Table.Body>\r\n            </Table>\r\n            \r\n            <Table unstackable style={{maxWidth: '650px'}}>\r\n                <Table.Header>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell textAlign='center'>Op Weight</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Moment</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Arm</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>%MAC</Table.HeaderCell>\r\n                    </Table.Row>\r\n                </Table.Header>\r\n                <Table.Body>\r\n                    <Table.Row>\r\n                        <Table.Cell textAlign='center'>\r\n                            {aircraft.readOnly.operatingWeight}\r\n                        </Table.Cell>\r\n                        <Table.Cell textAlign='center'>\r\n                            {aircraft.readOnly.operatingMoment}\r\n                        </Table.Cell>\r\n                        <Table.Cell textAlign='center'>\r\n                            {calcArm(aircraft.readOnly.operatingWeight, aircraft.readOnly.operatingMoment)}\r\n                        </Table.Cell>\r\n                        <Table.Cell textAlign='center'>\r\n                            {toMAC(calcArm(aircraft.readOnly.operatingWeight, aircraft.readOnly.operatingMoment))}%\r\n                        </Table.Cell>\r\n                    </Table.Row>\r\n                </Table.Body>\r\n            </Table>\r\n        </>\r\n    );\r\n}","import { useReducer } from \"react\";\r\n\r\nfunction sortReducer(state, key){\r\n    if (key===state.key){\r\n        if (state.dir===1){\r\n            return {key, dir: -1};\r\n        }\r\n        return {key: null, dir: 0};\r\n    }\r\n    return {key, dir: 1};\r\n}\r\n\r\nfunction matchSort(sortObj, key){\r\n    if (sortObj && sortObj.key===key){\r\n        return sortObj.dir>0?'ascending':'descending';\r\n    }\r\n    return null;\r\n}\r\n\r\nfunction getSortedList(sorted, sortDetails, list, sortGetterArgs){\r\n    if (!Array.isArray(list)) return list;\r\n    const listCopy=[...list];\r\n    if (sorted.key!==null){\r\n        const sortDetail=sortDetails.find( details => details.key===sorted.key);\r\n        if (sortDetail){\r\n            listCopy.sort( (a, b) => {\r\n                let aVal, bVal;\r\n                if (typeof sortDetail.getter==='function'){\r\n                    aVal=sortDetail.getter(a, ...sortGetterArgs);\r\n                    bVal=sortDetail.getter(b, ...sortGetterArgs);\r\n                }else{\r\n                    aVal=a[sorted.key];\r\n                    bVal=b[sorted.key];\r\n                }\r\n                if (sortDetail.type==='number'){\r\n                    return sorted.dir * (Number(aVal) - Number(bVal));\r\n                }else if (sortDetail.type==='string'){\r\n                    return sorted.dir * String(aVal).localeCompare(String(bVal));\r\n                }else if (sortDetail.type==='date'){\r\n                    return sorted.dir * (new Date(aVal) - new Date(bVal));\r\n                }else if (sortDetail.type==='bool'){\r\n                    return sorted.dir * ((aVal?1:0)-(bVal?1:0));\r\n                }\r\n                console.warn(\"useSorted: attempting to sort with unknown sort type '\"+sortDetail.type+\"'\");\r\n                return 0;\r\n            });\r\n        }\r\n    }\r\n    return listCopy;\r\n}\r\n\r\nfunction useSorted(sortDetails, items, ...sortGetterArgs){\r\n    const [sorted, sortedDispatch] = useReducer(sortReducer, {key: null, dir: 0});\r\n\r\n    return [getSortedList(sorted, sortDetails, items, sortGetterArgs), sortedDispatch, matchSort.bind(null, sorted)]\r\n}\r\n\r\nexport {useSorted};","import {Modal, Header, Button} from 'semantic-ui-react';\r\n\r\nexport default function ConfirmationModal({onYes, onNo, isOpen, title, content}){\r\n    return (\r\n        <Modal open={isOpen} size=\"tiny\">\r\n        {\r\n            content\r\n            ?\r\n                <Modal.Header>{title}</Modal.Header>\r\n            :\r\n                null\r\n        }\r\n        <Modal.Content>\r\n          <Modal.Description>\r\n              {content?content:<Header>{title}</Header>}\r\n          </Modal.Description>\r\n        </Modal.Content>\r\n        <Modal.Actions>\r\n          <Button positive content={\"Yes\"} onClick={onYes}/>\r\n          <Button color='black' content={\"No\"} onClick={onNo}/>\r\n        </Modal.Actions>\r\n      </Modal>\r\n    )\r\n}","\r\nimport TouchInput from '@dteel/touch-input'\r\nimport { Table, Input, Button, Checkbox } from 'semantic-ui-react';\r\nimport {useState} from 'react';\r\n\r\nimport {useSorted} from '../useSorted';\r\n\r\nimport ConfirmationModal from './ConfirmationModal';\r\n\r\nimport { calcArm, calcMoment, formatWeight, formatMoment, isAboutEquals } from '../common';\r\n\r\n\r\nconst noPadCell={padding:'1px', border:'none'};\r\nconst deleteCell={padding:'0px 4px 0px 0px', border:'none'};\r\nconst inputStyle={style:{paddingLeft:'5px', paddingRight:'5px'}};\r\n\r\n\r\n\r\nconst sortDetails=[\r\n    {key: 'name', type: 'string'},\r\n    {key: 'weight', type: 'number'},\r\n    {key: 'moment', type: 'number'},\r\n    {key: 'arm', type: 'number'},\r\n    {key: 'expended', type: 'bool'}\r\n];\r\n\r\nexport default function Cargo({cargo, cargoDispatch}){\r\n    const [deleteItemId, _setDeleteItemId] = useState(null);\r\n    const [itemList, sortBy, matchSort] = useSorted(sortDetails, cargo);\r\n\r\n\r\n    let weightTotal=0, momentTotal=0, armTotal;\r\n\r\n    itemList?.forEach( item => {\r\n        weightTotal+=Number(item.weight);\r\n        momentTotal+=Number(item.moment);\r\n    })\r\n    weightTotal=formatWeight(weightTotal);\r\n    momentTotal=formatMoment(momentTotal);\r\n    armTotal=calcArm(weightTotal, momentTotal);\r\n\r\n    const setDeleteItemId = (id) => {\r\n        for (const item of itemList){\r\n            if (item.id === id){\r\n                if (item.name.trim()===\"\" && isAboutEquals(item.weight, 0) && isAboutEquals(item.moment, 0)){\r\n                    cargoDispatch('delete', id);\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n        _setDeleteItemId(id);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <ConfirmationModal title={\"Are you sure you want to delete this?\"}\r\n                        isOpen={deleteItemId!==null}\r\n                        onYes={()=>{\r\n                            cargoDispatch('delete', deleteItemId);\r\n                            setDeleteItemId(null);\r\n                        }}\r\n                        onNo={()=>{\r\n                            setDeleteItemId(null);\r\n                        }}\r\n            />\r\n            <Table unstackable style={{maxWidth: '768px'}} sortable>\r\n                <Table.Header className='stickyheader'>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell colSpan='6'>\r\n                            <div style={{display:'flex', alignItems:'center'}}>\r\n                                <Button.Group vertical>\r\n                                    <Button icon='add' labelPosition='left' positive size='small' content='New'  onClick={()=>cargoDispatch('create', null)}/>\r\n\r\n                                </Button.Group>\r\n                                <div style={{flexGrow:'1', textAlign:'center', fontSize:'1.3em'}}>Cargo</div>\r\n                            </div>\r\n                        </Table.HeaderCell>\r\n                    </Table.Row>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell width={6} sorted={matchSort('name')}     onClick={()=>sortBy('name')}>Name  </Table.HeaderCell>\r\n                        <Table.HeaderCell width={3} sorted={matchSort('weight')}   onClick={()=>sortBy('weight')}>Weight</Table.HeaderCell>\r\n                        <Table.HeaderCell width={3} sorted={matchSort('moment')}   onClick={()=>sortBy('moment')}>Moment</Table.HeaderCell>\r\n                        <Table.HeaderCell width={2} sorted={matchSort('arm')}      onClick={()=>sortBy('arm')}>Arm   </Table.HeaderCell>\r\n                        <Table.HeaderCell width={1} sorted={matchSort('expended')} onClick={()=>sortBy('expended')}>Exp   </Table.HeaderCell>\r\n                        <Table.HeaderCell collapsing width={1} onClick={()=>sortBy(null)}></Table.HeaderCell>\r\n                    </Table.Row>\r\n                </Table.Header>\r\n                <Table.Body>\r\n                    {\r\n                        itemList?.length ?\r\n                        itemList.map( item => (\r\n                                <Table.Row key={item.id}>\r\n                                    <Table.Cell style={noPadCell}>\r\n                                        <TouchInput as={Input} value={item.name} onChange={(v)=>cargoDispatch('update', {...item, name: v})} fluid input={inputStyle}/>\r\n                                    </Table.Cell>\r\n                                    <Table.Cell style={noPadCell}>\r\n                                        <TouchInput as={Input} value={item.weight} onChange={(v)=>{\r\n                                                cargoDispatch('update', {...item, weight: v, moment: calcMoment(v, item.arm), arm: item.arm})\r\n                                        }} fluid  type='number' title='Weight' input={inputStyle}/>\r\n                                    </Table.Cell>\r\n                                    <Table.Cell style={noPadCell}>\r\n                                        <TouchInput as={Input} value={item.moment} onChange={(v)=>cargoDispatch('update', {...item, moment: v, arm: calcArm(item.weight, v)})} fluid type='number' title='Moment' input={inputStyle}/>\r\n                                    </Table.Cell>\r\n                                    <Table.Cell style={{...noPadCell, textAlign:'center'}}>\r\n                                        <TouchInput as={Input} value={item.arm} onChange={(v)=>cargoDispatch('update', {...item, arm: v, moment: calcMoment(item.weight, v)})} fluid disabled={isAboutEquals(item.weight,0)} type={isAboutEquals(item.weight,0)?null:'number'} title='Arm' input={inputStyle}/>\r\n                                    </Table.Cell>\r\n                                    <Table.Cell>\r\n                                        <Checkbox fitted checked={item.expended} onChange={(e, data)=>cargoDispatch('update', {...item, expended: data.checked})}/>\r\n                                    </Table.Cell>\r\n                                    <Table.Cell style={deleteCell}>\r\n                                        <Button floated='right' icon='minus' negative size='mini' onClick={(e)=>{\r\n                                            setDeleteItemId(item.id);\r\n                                        }}/>\r\n                                    </Table.Cell>\r\n                                </Table.Row>\r\n                            ))\r\n                        :\r\n                            <Table.Row style={{textAlign:'center'}}>\r\n                                <Table.Cell colSpan='6'>\r\n                                    no items\r\n                                </Table.Cell>\r\n                            </Table.Row>\r\n                    }\r\n                </Table.Body>\r\n                {\r\n                    itemList?.length?\r\n                        <Table.Footer>\r\n                            <Table.Row>\r\n                                <Table.Cell>Total</Table.Cell>\r\n                                <Table.Cell>{weightTotal}</Table.Cell>\r\n                                <Table.Cell>{momentTotal}</Table.Cell>\r\n                                <Table.Cell>{armTotal}</Table.Cell>\r\n                                <Table.Cell></Table.Cell>\r\n                                <Table.Cell></Table.Cell>\r\n                            </Table.Row>\r\n                        </Table.Footer>\r\n                    :\r\n                        null\r\n                }\r\n            </Table>\r\n        </>\r\n    );\r\n}","import { useStoredReducer } from \"@dteel/use-stored-reducer\";\r\nimport { isGoodObject } from \"../common\";\r\n\r\nconst emptyAircraft = {\r\n    basicWeight: 0,\r\n    basicMoment: 0,\r\n\r\n    crewWeight: 0,\r\n    crewMoment: 0,\r\n\r\n    baggageWeight: 0,\r\n    baggageMoment: 0,\r\n\r\n    stewardsWeight: 0,\r\n    stewardsMoment: 0,\r\n\r\n    emergencyWeight: 0,\r\n    emergencyMoment: 0,\r\n\r\n    extraWeight: 0,\r\n    extraMoment: 0,\r\n\r\n    readOnly:{\r\n        operatingWeight: 0,\r\n        operatingMoment: 0,\r\n    }\r\n}\r\n\r\nfunction sanitizeAircraft(s){\r\n    const fields=[\r\n        'basicWeight', 'basicMoment',\r\n        'crewWeight', 'crewMoment',\r\n        'baggageWeight', 'baggageMoment',\r\n        'stewardsWeight', 'stewardsMoment',\r\n        'emergencyWeight', 'emergencyMoment',\r\n        'extraWeight', 'extraMoment',\r\n    ];\r\n    for (const field of fields){\r\n        s[field]=Number(s[field]);\r\n        if (!isFinite(s[field])) s[field]=0;\r\n    }\r\n    return s;\r\n}\r\n\r\nfunction addReadOnly(s){\r\n    s.readOnly={\r\n        operatingWeight: s.basicWeight+s.crewWeight+s.baggageWeight+s.stewardsWeight+s.emergencyWeight+s.extraWeight,\r\n        operatingMoment: s.basicMoment+s.crewMoment+s.baggageMoment+s.stewardsMoment+s.emergencyMoment+s.extraMoment\r\n    };\r\n    return s;\r\n}\r\n\r\nfunction aircraftReducer(state, action, payload){\r\n\r\n    if (!isGoodObject(state)){\r\n        state=emptyAircraft;\r\n    }\r\n\r\n    switch (action){\r\n        case 'reset':{\r\n            return emptyAircraft;\r\n        }\r\n        case 'set':{\r\n            return addReadOnly(sanitizeAircraft(payload));\r\n        }\r\n        default:\r\n            console.error('unknown aircraftReducer action: ', action);\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction useAircraftReducer(hysterisis=1000){\r\n    const [aircraft, {current: aircraftDispatch}] = useStoredReducer('cwab-aircraft', aircraftReducer, emptyAircraft, localStorage, hysterisis);\r\n\r\n    return [aircraft, aircraftDispatch];\r\n}\r\n\r\nexport {useAircraftReducer as default, aircraftReducer};","import { useStoredReducer } from \"@dteel/use-stored-reducer\";\r\n\r\nimport { calcArm, getUniqueId, isAboutEquals, isGoodObject } from \"../common\";\r\n\r\nfunction blankItem(){\r\n    return {name:'', weight: 0, moment: 0, arm: 0, expended: false};\r\n}\r\n\r\nfunction sanitizeCargo(cargo){\r\n    for (const item of cargo){\r\n        item.weight=Number(item.weight);\r\n        item.moment=Number(item.moment);\r\n        item.arm=Number(item.arm);\r\n        item.expended=Boolean(item.expended);\r\n    }\r\n    return cargo;\r\n}\r\n\r\nfunction cargoReducer(state, action, payload, callback){\r\n\r\n    if (!Array.isArray(state)) state=[];\r\n\r\n    switch (action){\r\n        case 'reset':{\r\n            return [];\r\n        }\r\n        case 'update':{\r\n            const items=state;\r\n            \r\n            payload.weight=Number(payload.weight);\r\n            payload.moment=Number(payload.moment);\r\n            payload.arm=Number(payload.arm);\r\n            payload.expended=Boolean(payload.expended);\r\n\r\n            const expectedArm = calcArm(payload.weight, payload.moment);\r\n            if (!isAboutEquals(expectedArm, payload.arm, 0.1)){\r\n                payload.arm=expectedArm;\r\n            }\r\n\r\n            for (const [index, element] of items.entries()){\r\n                if (element.id===payload.id){\r\n                    items[index]=payload;\r\n                    break;\r\n                }\r\n            }\r\n            \r\n            return sanitizeCargo(items);\r\n        }\r\n        case 'delete':{\r\n            const items=state;\r\n            const id=typeof payload==='object' ? payload.id : payload;\r\n            return items.filter( item => !(item.id === id) );\r\n        }\r\n        case 'create':{\r\n            let newItem = payload;\r\n            if (!isGoodObject(newItem)) newItem=blankItem();\r\n\r\n            newItem.id=getUniqueId(state, 'id');\r\n            if (callback) callback(newItem.id);\r\n\r\n            return sanitizeCargo([...state, newItem]);\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction useCargoReducer(hysterisis=1000){\r\n    const [itemGroup, {current: itemGroupDispatch}] = useStoredReducer('cwab-cargo', cargoReducer, [], localStorage, hysterisis);\r\n\r\n    return [itemGroup, itemGroupDispatch];\r\n}\r\n\r\nexport {useCargoReducer as default, cargoReducer};","import { useStoredReducer } from \"@dteel/use-stored-reducer\";\r\nimport { isGoodObject, isAboutEquals } from \"../common\";\r\n\r\nconst maxAux = 5810;\r\nconst maxExt = 8900;    \r\nconst maxIB = 7660;\r\nconst maxOB = 8310;\r\nconst momentSimplifier=1000;\r\n\r\nconst blankSingleFuel={\r\n    lext: 0,\r\n    main1: 0,\r\n    main2: 0,\r\n    laux: 0,\r\n    raux: 0,\r\n    main3: 0,\r\n    main4: 0,\r\n    rext: 0,\r\n\r\n    readOnly:{\r\n        totalFuel: 0,\r\n        totalMoment: 0,\r\n        obs: 0,\r\n        ibs: 0,\r\n        auxs: 0,\r\n        exts: 0\r\n    }\r\n};\r\n\r\nconst blankFuel = {\r\n    takeoff: blankSingleFuel,\r\n    landing: blankSingleFuel\r\n}\r\n\r\n\r\nfunction interpolateTable(valueIn, table){\r\n    let below=null;\r\n    let above=null;\r\n    for (const item of table){\r\n        if (isAboutEquals(valueIn, item.in)){\r\n            above=item;\r\n            below=item;\r\n            break;\r\n        }\r\n        if (valueIn>=item.in){\r\n            if (below!==null){\r\n                if (item.in>below.in){\r\n                    below=item;\r\n                }\r\n            }else{\r\n                below=item;\r\n            }\r\n        }\r\n        if (valueIn<=item.in){\r\n            if (above!==null){\r\n                if (item.in<above.in){\r\n                    above=item;\r\n                }\r\n            }else{\r\n                above=item;\r\n            }\r\n        }\r\n    }\r\n\r\n    if (above==null || below==null){\r\n        return null;\r\n    }\r\n    \r\n    if (below===above || isAboutEquals(below.in, above.in)){\r\n        return above.out;\r\n    }\r\n\r\n    const resultDiff = above.out - below.out;\r\n    const valDiff = above.in - below.in;\r\n    return ((valueIn - below.in) / valDiff) * resultDiff + below.out;\r\n}\r\n\r\nfunction getSingleAuxMoment(auxFuel){\r\n    const table = [\r\n        {in: 0,           out: 560.5},\r\n        {in: maxAux*0.25, out: 559.0},\r\n        {in: maxAux*0.50, out: 557.5},\r\n        {in: maxAux*0.75, out: 556.9},\r\n        {in: maxAux     , out: 556.7},\r\n    ];\r\n\r\n    return interpolateTable(auxFuel, table)*auxFuel/momentSimplifier;\r\n}\r\n\r\nfunction getSingleExtMoment(extFuel){\r\n    const table = [\r\n        {in: 0,           out: 552.7},\r\n        {in: maxExt*0.25, out: 552.0},\r\n        {in: maxExt*0.50, out: 551.3},\r\n        {in: maxExt*0.75, out: 551.0},\r\n        {in: maxExt     , out: 551.2},\r\n    ];\r\n\r\n    return interpolateTable(extFuel, table)*extFuel/momentSimplifier;\r\n}\r\n\r\nfunction getSingleIBMoment(ibFuel){\r\n    const table = [\r\n        {in: 0,          out: 558.1},\r\n        {in: maxIB*0.25, out: 556.8},\r\n        {in: maxIB*0.50, out: 555.5},\r\n        {in: maxIB*0.75, out: 555.2},\r\n        {in: maxIB     , out: 555.0},\r\n    ];\r\n\r\n    return interpolateTable(ibFuel, table)*ibFuel/momentSimplifier;\r\n}\r\n\r\nfunction getSingleOBMoment(obFuel){\r\n    const table = [\r\n        {in: 0,          out: 549.0},\r\n        {in: maxOB*0.25, out: 547.7},\r\n        {in: maxOB*0.50, out: 546.4},\r\n        {in: maxOB*0.75, out: 545.7},\r\n        {in: maxOB     , out: 545.2},\r\n    ];\r\n\r\n    return interpolateTable(obFuel, table)*obFuel/momentSimplifier;\r\n}\r\n\r\nfunction getFuelMoment(lext, main1, main2, laux, raux, main3, main4, rext){\r\n    return Math.round(getSingleExtMoment(lext)+getSingleExtMoment(rext)+\r\n        getSingleAuxMoment(laux)+getSingleAuxMoment(raux)+\r\n        getSingleIBMoment(main2)+getSingleIBMoment(main3)+\r\n        getSingleOBMoment(main1)+getSingleOBMoment(main4));\r\n}\r\n\r\nfunction sanitizeFuelState(s){\r\n    const fields=['main1', 'main2', 'main3', 'main4', 'laux', 'raux', 'lext', 'rext'];\r\n    for (const field of fields){\r\n        s[field]=Number(s[field]);\r\n        if (!isFinite(s[field])) s[field]=0;\r\n        if (s[field]<0) s[field]=0;\r\n    }\r\n\r\n    if (s.lext>maxExt) s.lext=maxExt;\r\n    if (s.rext>maxExt) s.rext=maxExt;\r\n    if (s.laux>maxAux) s.laux=maxAux;\r\n    if (s.raux>maxAux) s.raux=maxAux;\r\n    if (s.main1>maxOB) s.main1=maxOB;\r\n    if (s.main4>maxOB) s.main4=maxOB;\r\n    if (s.main2>maxIB) s.main2=maxIB;\r\n    if (s.main3>maxIB) s.main3=maxIB;\r\n\r\n    return s;\r\n}\r\n\r\nfunction addReadOnly(s){\r\n    s.readOnly={\r\n        totalFuel: s.lext+s.rext+s.laux+s.raux+s.main1+s.main2+s.main3+s.main4,\r\n        totalMoment: getFuelMoment(s.lext, s.main1, s.main2, s.laux, s.raux, s.main3, s.main4, s.rext),\r\n        obs: s.main1+s.main4,\r\n        ibs: s.main2+s.main3,\r\n        auxs: s.laux+s.raux,\r\n        exts: s.lext+s.rext\r\n    };\r\n    return s;\r\n}\r\n\r\nfunction fuelReducer(state, action, payload){\r\n\r\n    if (!isGoodObject(state)){\r\n        state=blankFuel;\r\n    }\r\n\r\n    switch (action){\r\n        case 'reset':\r\n            return blankFuel;\r\n\r\n        case 'set-takeoff':\r\n            payload=addReadOnly(sanitizeFuelState(payload));\r\n            return {...state, takeoff: payload};\r\n\r\n        case 'set-landing':\r\n            payload=addReadOnly(sanitizeFuelState(payload));\r\n            return {...state, landing: payload};\r\n\r\n        case 'set':\r\n            payload.takeoff=addReadOnly(sanitizeFuelState(payload.takeoff));\r\n            payload.landing=addReadOnly(sanitizeFuelState(payload.landing));\r\n            return payload;\r\n\r\n        default:\r\n            console.error('unknown fuelReducer action: ', action);\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction useFuelReducer(hysterisis=1000){\r\n    const [fuel, {current: fuelDispatch}] = useStoredReducer('cwab-fuel', fuelReducer, blankFuel, localStorage, hysterisis);\r\n\r\n    return [fuel, fuelDispatch];\r\n}\r\n\r\nexport {useFuelReducer as default, fuelReducer};","\r\n// let localStorageSize=null;\r\n\r\n// function getLocalStorageSize(){\r\n//     if (localStorageSize!==null) return localStorageSize;\r\n\r\n//     localStorageSize=0;\r\n\r\n//     let dataChunk=\"0\".repeat(10223);\r\n//     let keys=[];\r\n//     let count=0;\r\n//     try {\r\n//         while (count<1000){\r\n//                 const key='wab-calcsize'+String(count++).padStart(5,'0');\r\n//                 localStorage.setItem(key, dataChunk);\r\n//                 keys.push(key);\r\n//         }\r\n//     } catch (e) {\r\n//     }\r\n\r\n//     keys.forEach( key => {\r\n//         localStorageSize+=10000+key.length;\r\n//         localStorage.removeItem(key);\r\n//     });\r\n\r\n//     for (let i=0;i<localStorage.length;i++){\r\n//         const key = localStorage.key(i);\r\n//         localStorageSize+=key.length+localStorage.getItem(key).length;\r\n//     }\r\n    \r\n//     return localStorageSize;\r\n// }\r\n\r\nfunction getUsedSpace(){\r\n    let storageUsed=0;\r\n    try {\r\n        for (let i=0;i<localStorage.length;i++){\r\n            const key = localStorage.key(i);\r\n            storageUsed+=key.length+localStorage.getItem(key).length;\r\n        }\r\n    } catch (e) {\r\n    }\r\n    return storageUsed;\r\n}\r\n\r\nexport {getUsedSpace};\r\n","import { useEffect, useState } from \"react\";\r\nimport { Header, Segment, Progress, Button } from \"semantic-ui-react\";\r\n\r\nimport {flushSaveToStorage} from '@dteel/use-stored-reducer/src/saveToStorage';\r\n\r\nimport useAircraftReducer from '../reducers/aircraftReducer';\r\nimport useCargoReducer from '../reducers/cargoReducer';\r\nimport useFuelReducer from \"../reducers/fuelReducer\";\r\n\r\nimport { getUsedSpace } from '../getLocalStorageSize'\r\nimport ConfirmationModal from './ConfirmationModal';\r\n\r\n\r\nfunction getSpaceUsedByWAB(){\r\n    let spaceUsedByWAB = 0;\r\n    try {\r\n        for (let i = 0; i < localStorage.length; i++){\r\n            const key=localStorage.key(i);\r\n            if (key.trim().toLowerCase().startsWith(\"cwab-\")){\r\n                const size=localStorage.getItem(key).length+key.length;\r\n                spaceUsedByWAB+=size;\r\n            }   \r\n        }\r\n    } catch (e) {\r\n    }\r\n    return spaceUsedByWAB;\r\n}\r\n\r\nexport default function Options(){\r\n\r\n    const [aircraft, aircraftDispatch] = useAircraftReducer(0);\r\n    const [cargo, cargoDispatch] = useCargoReducer(0);\r\n    const [fuel, fuelDispatch] = useFuelReducer(0);\r\n\r\n    const [spaceUsedByWAB, setSpaceUsedByWAB] = useState(0);\r\n    const [spaceUsed, setSpaceUsed] = useState(0);\r\n    const [deleteLocalModal, setDeleteLocalModal] = useState(false);\r\n\r\n    useEffect( ()=>{\r\n        flushSaveToStorage();\r\n        setSpaceUsedByWAB(getSpaceUsedByWAB());\r\n        setSpaceUsed(getUsedSpace());\r\n\r\n        const storageChanged = () => {\r\n            setSpaceUsedByWAB(getSpaceUsedByWAB());\r\n            setSpaceUsed(getUsedSpace());\r\n        };\r\n\r\n        window.addEventListener('storage', storageChanged);\r\n        return ()=>window.removeEventListener('storage', storageChanged);\r\n    }, [cargo, aircraft, fuel]);\r\n\r\n    return (\r\n        <>\r\n                <Segment secondary>\r\n                    <Header as='h4' textAlign=\"center\">Local Storage</Header>\r\n\r\n                    <Progress\r\n                        value={spaceUsedByWAB}\r\n                        total={spaceUsed}\r\n                        progress='percent'\r\n                        precision={1}\r\n                        label={'WABs Useage: '+Math.ceil(spaceUsedByWAB/1024)+' Kb / '+Math.ceil(spaceUsed/1024)+' Kb'}\r\n                    />\r\n                    <ConfirmationModal \r\n                        title=\"Are you sure?\"\r\n                        content=\"This will erase everything WAB related on your device, are you sure?\"\r\n                        onNo={()=>setDeleteLocalModal(false)} \r\n                        onYes={()=>{\r\n                            fuelDispatch('reset');\r\n                            cargoDispatch('reset');\r\n                            aircraftDispatch('reset');\r\n                            setDeleteLocalModal(false);\r\n                        }}\r\n                        isOpen={deleteLocalModal}\r\n                    />\r\n                    <Button negative onClick={()=>setDeleteLocalModal(true)}>Clear WAB LocalStorage</Button>\r\n                </Segment>\r\n        </>\r\n    );\r\n}","import TouchInput from '@dteel/touch-input'\r\nimport { Table, Input } from 'semantic-ui-react';\r\n\r\nconst inputStyle={style:{paddingLeft:'5px', paddingRight:'5px'}};\r\n\r\nexport default function IndividualFuel({fuel, setFuel}){\r\n    return <>\r\n        <Table compact size=\"small\" unstackable style={{maxWidth:'650px'}}>\r\n            <Table.Header>\r\n                <Table.Row>\r\n                    <Table.HeaderCell>Total Fuel</Table.HeaderCell>\r\n                    <Table.HeaderCell>Moment</Table.HeaderCell>\r\n                </Table.Row>\r\n            </Table.Header>\r\n            <Table.Body>\r\n                <Table.Row>\r\n                    <Table.Cell>\r\n                        <TouchInput as={Input} \r\n                        value={fuel.readOnly.totalFuel}\r\n                        onChange={(v)=>{\r\n                            const desiredTotalFuel=v;\r\n                            v=Number(v);\r\n                            const mains = Math.max(0, Math.min(31940, v));\r\n                            v=v-31940;//subtract max main fuel tanks\r\n                            const auxs = Math.max(0, Math.min(11620, v));\r\n                            v=v-11620;//subtract max aux tanks\r\n                            const exts= Math.max(0, Math.min(17800, v));\r\n\r\n                            let outboards=Math.max(0, mains/2+650);\r\n                            let inboards=Math.max(0, mains/2-650);\r\n                            if (desiredTotalFuel<6000){\r\n                                outboards=mains/2;\r\n                                inboards=mains/2;\r\n                            }\r\n                            setFuel({\r\n                                main1: outboards/2,\r\n                                main2: inboards/2,\r\n                                main3: inboards/2,\r\n                                main4: outboards/2,\r\n                                laux: auxs/2,\r\n                                raux: auxs/2,\r\n                                lext: exts/2,\r\n                                rext: exts/2\r\n                            });\r\n                        }} fluid  type='number' title='Total Fuel' input={inputStyle}/>\r\n                    </Table.Cell>\r\n                    <Table.Cell>{fuel.readOnly.totalMoment}</Table.Cell>\r\n                </Table.Row>\r\n            </Table.Body>\r\n        </Table>\r\n        <Table compact size=\"small\" unstackable style={{maxWidth: '650px'}}>\r\n            <Table.Header>\r\n                <Table.Row>\r\n                    <Table.HeaderCell textAlign='center'>OBs</Table.HeaderCell>\r\n                    <Table.HeaderCell textAlign='center'>IBs</Table.HeaderCell>\r\n                    <Table.HeaderCell textAlign='center'>AUXs</Table.HeaderCell>\r\n                    <Table.HeaderCell textAlign='center'>EXTs</Table.HeaderCell>\r\n                </Table.Row>\r\n            </Table.Header>\r\n            <Table.Body style={{marginBottom: 0}}>\r\n                <Table.Row>\r\n                    <Table.Cell>\r\n                        <TouchInput as={Input} value={fuel.main1+fuel.main4} onChange={(v)=>{\r\n                            v=Number(v);\r\n                            setFuel({...fuel, main1: v/2, main4: v/2});\r\n                        }} fluid  type='number' title='Outboards' input={inputStyle}/>\r\n                    </Table.Cell>\r\n                    <Table.Cell>\r\n                        <TouchInput as={Input} value={fuel.main2+fuel.main3} onChange={(v)=>{\r\n                            v=Number(v);\r\n                            setFuel({...fuel, main2: v/2, main3: v/2});\r\n                        }} fluid  type='number' title='Inboards' input={inputStyle}/>\r\n                    </Table.Cell>\r\n                    <Table.Cell>\r\n                        <TouchInput as={Input} value={fuel.laux+fuel.raux} onChange={(v)=>{\r\n                            v=Number(v);\r\n                            setFuel({...fuel, laux: v/2, raux: v/2});\r\n                        }} fluid  type='number' title='Auxiliarys' input={inputStyle}/>\r\n                    </Table.Cell>\r\n                    <Table.Cell>\r\n                        <TouchInput as={Input} value={fuel.lext+fuel.rext} onChange={(v)=>{\r\n                            v=Number(v);\r\n                            setFuel({...fuel, lext: v/2, rext: v/2});\r\n                        }} fluid  type='number' title='Externals' input={inputStyle}/>\r\n                    </Table.Cell>\r\n                </Table.Row>\r\n            </Table.Body>\r\n        </Table>\r\n        <Table compact  size=\"small\"  unstackable style={{maxWidth: '650px'}}>\r\n            <Table.Header>\r\n                <Table.Row>\r\n                    <Table.HeaderCell textAlign='center'>L Ext</Table.HeaderCell>\r\n                    <Table.HeaderCell textAlign='center'>Main 1</Table.HeaderCell>\r\n                    <Table.HeaderCell textAlign='center'>Main 2</Table.HeaderCell>\r\n                    <Table.HeaderCell textAlign='center'>L Aux</Table.HeaderCell>\r\n                </Table.Row>\r\n            </Table.Header>\r\n            <Table.Body>\r\n                <Table.Row>\r\n                    <Table.Cell>\r\n                        <TouchInput as={Input} value={fuel.lext} onChange={(v)=>{\r\n                            setFuel({...fuel, lext: v});\r\n                        }} fluid  type='number' title='L Ext' input={inputStyle}/>\r\n                    </Table.Cell>\r\n                    <Table.Cell>\r\n                        <TouchInput as={Input} value={fuel.main1} onChange={(v)=>{\r\n                            setFuel({...fuel, main1: v});\r\n                        }} fluid  type='number' title='Main 1' input={inputStyle}/>\r\n                    </Table.Cell>\r\n                    <Table.Cell>\r\n                        <TouchInput as={Input} value={fuel.main2} onChange={(v)=>{\r\n                            setFuel({...fuel, main2: v});\r\n                        }} fluid  type='number' title='Main 2' input={inputStyle}/>\r\n                    </Table.Cell>\r\n                    <Table.Cell>\r\n                        <TouchInput as={Input} value={fuel.laux} onChange={(v)=>{\r\n                            setFuel({...fuel, laux: v});\r\n                        }} fluid  type='number' title='L Aux' input={inputStyle}/>\r\n                    </Table.Cell>\r\n                </Table.Row>\r\n            </Table.Body>\r\n            <Table.Header>\r\n                <Table.Row>\r\n                    <Table.HeaderCell textAlign='center'>R Aux</Table.HeaderCell>\r\n                    <Table.HeaderCell textAlign='center'>Main 3</Table.HeaderCell>\r\n                    <Table.HeaderCell textAlign='center'>Main 4</Table.HeaderCell>\r\n                    <Table.HeaderCell textAlign='center'>R Ext</Table.HeaderCell>\r\n                </Table.Row>\r\n            </Table.Header>\r\n            <Table.Body>\r\n                <Table.Row>\r\n                    <Table.Cell>\r\n                        <TouchInput as={Input} value={fuel.raux} onChange={(v)=>{\r\n                            setFuel({...fuel, raux: v});\r\n                        }} fluid  type='number' title='R Aux' input={inputStyle}/>\r\n                    </Table.Cell>\r\n                    <Table.Cell>\r\n                        <TouchInput as={Input} value={fuel.main3} onChange={(v)=>{\r\n                            setFuel({...fuel, main3: v});\r\n                        }} fluid  type='number' title='Main 3' input={inputStyle}/>\r\n                    </Table.Cell>\r\n                    <Table.Cell>\r\n                        <TouchInput as={Input} value={fuel.main4} onChange={(v)=>{\r\n                            setFuel({...fuel, main4: v});\r\n                        }} fluid  type='number' title='Main 4' input={inputStyle}/>\r\n                    </Table.Cell>\r\n                    <Table.Cell>\r\n                        <TouchInput as={Input} value={fuel.rext} onChange={(v)=>{\r\n                            setFuel({...fuel, rext: v});\r\n                        }} fluid  type='number' title='R Ext' input={inputStyle}/>\r\n                    </Table.Cell>\r\n                </Table.Row>\r\n            </Table.Body>\r\n        </Table>\r\n    </>\r\n}\r\n","import { Header } from 'semantic-ui-react';\r\n\r\n\r\nimport IndividualFuel from './IndividualFuel';\r\n\r\n\r\nexport default function Fuel({fuel, fuelDispatch}){\r\n    return (\r\n        <>\r\n            <Header textAlign='center'>\r\n                Takeoff Fuel\r\n            </Header>\r\n            <IndividualFuel fuel={fuel.takeoff} setFuel={(newFuel)=>{\r\n                fuelDispatch('set-takeoff', newFuel);\r\n            }}/>\r\n\r\n            <Header textAlign='center'>\r\n                Landing Fuel\r\n            </Header>\r\n            <IndividualFuel fuel={fuel.landing} setFuel={(newFuel)=>{\r\n                fuelDispatch('set-landing', newFuel);\r\n            }}/>\r\n        </>\r\n    );\r\n}","import {useStoredReducer} from '@dteel/use-stored-reducer';\r\n\r\nfunction selectedMenuReducer(state, action, payload) {\r\n    return {page: action, ...payload};\r\n}\r\n\r\nfunction useSelectedMenuReducer(hysterisis=1000){\r\n    const [selectedMenu, {current: selectedMenuDispatch}] = useStoredReducer('cwab-menu', selectedMenuReducer, {page: 'aircraft'}, sessionStorage, hysterisis);\r\n\r\n    return [selectedMenu, selectedMenuDispatch];\r\n}\r\n\r\n\r\nexport {useSelectedMenuReducer as default, selectedMenuReducer};","import {Interpreter, NumberObj, BoolObj, StringObj} from '@dteel/gpdsl';\r\n\r\n//returns true if any of the inputs are null or undefined\r\nfunction isAnyNil(...vals){\r\n\tfor (const a of vals){\r\n\t\tif (a===null || a===undefined) return true;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nfunction isAboutEquals(a, b, allowableDelta=0.00001){\r\n\tif (isAnyNil(a,b)) return false;\r\n\r\n\tif (Math.abs(a-b)<=allowableDelta){\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\n\r\n\r\n///classess\r\nclass Point {\r\n\tconstructor(x,y){\r\n\t\tif (x instanceof Point){//act as a copy constructor\r\n\t\t\tthis.x = x.x;\r\n\t\t\tthis.y = x.y;\r\n\t\t}else{\r\n\t\t\tthis.x = isAnyNil(x) ? 0 : x;\r\n\t\t\tthis.y = isAnyNil(y) ? 0 : y;\r\n\t\t}\r\n\t}\r\n\r\n\tflip(){\r\n\t\tconst tempX=this.x;\r\n\t\tthis.x=this.y;\r\n\t\tthis.y=tempX;\r\n\t}\r\n\r\n\tdistance(otherPoint){\r\n\t\tconst xDiff = Math.abs(otherPoint.x - this.x);\r\n\t\tconst yDiff = Math.abs(otherPoint.y - this.y);\r\n\t\treturn Math.sqrt(xDiff*xDiff + yDiff*yDiff);\r\n\t}\r\n}\r\n\r\nclass Line {\r\n\tconstructor(pointsArray, value=null){\r\n\t\tif (pointsArray instanceof Line){\r\n\t\t\tthis.points=pointsArray.points.map( point => {return new Point(point);} )\r\n\t\t\tthis.value=pointsArray.value;\r\n\t\t}else{\r\n\t\t\tthis.points=pointsArray.map( point => {return new Point(point);} );\r\n\t\t\tthis.value=value;\r\n\t\t}\r\n\t}\r\n\r\n\tflipPoints(){\r\n\t\tfor (const point of this.points){\r\n\t\t\tpoint.flip();\r\n\t\t}\r\n\t}\r\n\r\n\tisLinear(yIsInputAxis){\r\n\t\tif (this.points.length < 2) {\r\n\t\t\treturn false;//line doesnt have enough points to even have one segment\r\n\t\t}\r\n\t\t\r\n\t\tif (isAboutEquals((yIsInputAxis ? this.points[1].y : this.points[1].x), (yIsInputAxis ? this.points[0].y : this.points[0].x))) {\r\n\t\t\treturn false;//first and second point are on the same x/y location, wouldnt be able to determine direction\r\n\t\t}\r\n\t\t\r\n\t\tlet lastX = (yIsInputAxis ? this.points[0].y : this.points[0].x);\r\n\t\tlet goingUp = (yIsInputAxis ? this.points[1].y : this.points[1].x) > lastX;\r\n\t\t\r\n\t\tfor (let i = 1; i < this.points.length; i++) {\r\n\t\t\tif (goingUp) {\r\n\t\t\t\tif ((yIsInputAxis ? this.points[i].y : this.points[i].x) <= lastX){\r\n\t\t\t\t\treturn false;//line x was ascending, but now its going down\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif ((yIsInputAxis ? this.points[i].y : this.points[i].x) >= lastX) {\r\n\t\t\t\t\treturn false;//line x was descending, but now its going up\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlastX = (yIsInputAxis ? this.points[i].y : this.points[i].x);\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\t//Only finds segments in the x axis (flip the points if you want to find it in the y axis)\r\n\tfindSegment(x) {\r\n\t\tif (this.points.length < 2 || this.isLinear(false)===false) {\r\n\t\t\treturn null;//not enough points for even one segment\r\n\t\t}\r\n\t\t\r\n\t\tconst leftX = this.points[0].x;\r\n\t\tconst rightX = this.points[this.points.length-1].x;\r\n\t\t\r\n\t\t//not going to be able to find a segment within the line, so we have to extrapolate\r\n\t\tif ((leftX<rightX && x<leftX) || (rightX<leftX && x>leftX)) {\r\n\t\t\treturn new Segment(this.points[0], this.points[1]);\r\n\t\t} else if ((leftX<rightX && x>rightX) || (rightX<leftX && x<rightX))  {\r\n\t\t\treturn new Segment(this.points[this.points.length - 2],this.points[this.points.length - 1]);\r\n\t\t}\r\n\t\t\r\n\t\tfor (let i = 0; i < this.points.length-1; i++) {\r\n\t\t\tif ((x >= this.points[i].x  &&  x <= this.points[i + 1].x) || (x <= this.points[i].x  &&  x >= this.points[i + 1].x)) {\r\n\t\t\t\treturn new Segment(this.points[i], this.points[i + 1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn null;//should be impossible to get here unless the line is a mess\r\n\t}\r\n\r\n}\r\n\r\nclass Rect {\r\n\tconstructor(pointA, pointB){\r\n\t\tif (pointA instanceof Rect){\r\n\t\t\tthis.pointA=new Point(pointA.pointA);\r\n\t\t\tthis.pointB=new Point(pointA.pointB);\r\n\t\t}else{\r\n\t\t\tthis.pointA=new Point(pointA);\r\n\t\t\tthis.pointB=new Point(pointB);\r\n\t\t}\r\n\t}\r\n\r\n\tisPointInside({x:px, y: py}, padding=undefined){\r\n\t\tif (padding===undefined){\r\n\t\t\treturn ((px >= this.pointA.x && px <= this.pointB.x) || (px >= this.pointB.x && px <= this.pointA.x)) &&\r\n\t\t\t((py >= this.pointA.y && py <= this.pointB.y) || (py >= this.pointB.y && py <= this.pointA.y));\r\n\t\t}else{\r\n\t\t\tconst a=new Point(this.pointA);\r\n\t\t\tconst b=new Point(this.pointB);\r\n\r\n\t\t\tif (a.x<b.x){\r\n\t\t\t\ta.x-=padding; b.x+=padding;\r\n\t\t\t}else{\r\n\t\t\t\ta.x+=padding; b.x-=padding;\r\n\t\t\t}\r\n\t\t\tif (a.y<b.y){\r\n\t\t\t\ta.y-=padding; b.y+=padding;\r\n\t\t\t}else{\r\n\t\t\t\ta.y+=padding; b.y-=padding;\r\n\t\t\t}\r\n\r\n\t\t\tlet paddedRect=new Rect(a, b);\r\n\t\t\treturn paddedRect.isPointInside(new Point(px,py));\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nclass Segment {\r\n\tconstructor(pointA, pointB){\r\n\t\tif (pointA instanceof Segment){\r\n\t\t\tthis.pointA=new Point(pointA.pointA);\r\n\t\t\tthis.pointB=new Point(pointA.pointB);\r\n\t\t}else{\r\n\t\t\tthis.pointA=new Point(pointA);\r\n\t\t\tthis.pointB=new Point(pointB);\r\n\t\t}\r\n\t}\r\n\r\n\tsetPointA(toPoint){\r\n\t\tthis.pointA = new Point(toPoint);\r\n\t}\r\n\tsetPointB(toPoint){\r\n\t\tthis.pointB = new Point(toPoint);\r\n\t}\r\n\r\n\t//Returns null if unable to get an intersection, will return a Point if able.\r\n\t//This should be a static class method, but whatevs.\r\n\tstatic getSegmentIntersectionWith(seg1, seg2, needsToBeTouching){\r\n\t\tconst xy=new Point(0,0);\r\n\t\tconst t = (seg2.pointB.y - seg2.pointA.y)*(seg1.pointB.x - seg1.pointA.x) - (seg2.pointB.x - seg2.pointA.x)*(seg1.pointB.y - seg1.pointA.y);\r\n\t\tif (Math.abs(t)>=0.00001) {//make sure lines arent parallel\r\n\t\t\tconst ua = ((seg2.pointB.x - seg2.pointA.x)*(seg1.pointA.y - seg2.pointA.y) - (seg2.pointB.y - seg2.pointA.y)*(seg1.pointA.x - seg2.pointA.x)) / t;\r\n\t\t\txy.x = seg1.pointA.x + ua * (seg1.pointB.x - seg1.pointA.x);\r\n\t\t\txy.y = seg1.pointA.y + ua * (seg1.pointB.y - seg1.pointA.y);\r\n\t\t\t\r\n\t\t\tif (needsToBeTouching) {\r\n\t\t\t\tconst rect1 = new Rect(seg1.pointA, seg1.pointB);\r\n\t\t\t\tconst rect2 = new Rect(seg2.pointA, seg2.pointB);\r\n\t\t\t\tif (!(rect1.isPointInside(xy) && rect2.isPointInside(xy))) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn xy;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\t//Returns null if unable to get an intersection, will return a Point if able.\r\n\tgetSegmentIntersection(otherSeg, needsToBeTouching){\r\n\t\treturn Segment.getSegmentIntersectionWith(this, otherSeg, needsToBeTouching);\r\n\t}\r\n\r\n\t//Returns null if unable to get an intersection, will return the y value of the intersion if able.\r\n\tstatic figureYCrossingWith(seg1, xAxis){\r\n\t\tconst seg2 = new Segment(new Point(xAxis, -100), new Point(xAxis, 100));\r\n\t\tconst intersection = Segment.getSegmentIntersectionWith(seg1, seg2, false);\r\n\t\tif (intersection != null) {\r\n\t\t\treturn intersection.y;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\t//Returns null if unable to get an intersection, will return the y value of the intersion if able.\r\n\tfigureYCrossing(xAxis){\r\n\t\treturn Segment.figureYCrossingWith(this, xAxis);\r\n\t}\r\n}\r\n\r\n\r\nclass ChartObject {\r\n\tconstructor(name=\"\", type=\"chartobject\", initialValue=null){\r\n\t\tthis.name=name;\r\n\t\tthis.type=type;\r\n\t\tthis.value=initialValue;\r\n\t}\r\n\r\n\tcalc(chartObjectArray, alertsArray, noticesArray){//Meant to be overridden at child class\r\n\t}\r\n}\r\n\r\nclass LinearChart extends ChartObject {\r\n\tconstructor(name=\"\", yIsInputAxis=false, xOrYRefObj=null, zRefObj=null, ...lines){\r\n\t\tsuper(name, \"linear\", null);\r\n\r\n\t\tthis.yIsInputAxis=yIsInputAxis;\r\n\r\n\t\tthis.xOrYRefObj=xOrYRefObj;\r\n\t\tthis.zRefObj=zRefObj;\r\n\r\n\t\tif (Array.isArray(lines)){\r\n\t\t\tthis.lines=lines.map( line => {return new Line(line);} );\r\n\t\t\tif (yIsInputAxis){\r\n\t\t\t\tthis.lines.forEach( line => {line.flipPoints();} )\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.lines=[];\r\n\t\t}\r\n\t}\r\n\r\n\tcalc(chartObjectArray, alertsArray, noticesArray){\r\n\t\tif (isAnyNil(this.xOrYRefObj, this.zRefObj)){\r\n\t\t\tthis.value=null;\r\n\t\t}else{\r\n\t\t\tthis.value = this.figureChart(this.xOrYRefObj.value, this.zRefObj.value);\r\n\t\t}\r\n\t}\r\n\r\n\tfigureChart(xOrYIn, zIn){\r\n\t\tif (isAnyNil(xOrYIn,zIn)) return null;\r\n\t\tlet belowLine=null;\r\n\t\tlet aboveLine=null;\r\n\t\tlet linesAreSame=false;\r\n\r\n\t\tfor (let currentLine of this.lines){\r\n\t\t\tif (isAboutEquals(currentLine.value, zIn)){\r\n\t\t\t\tbelowLine=currentLine;\r\n\t\t\t\taboveLine=currentLine;\r\n\t\t\t\tlinesAreSame=true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif (currentLine.value < zIn){\r\n\t\t\t\tif (belowLine){\r\n\t\t\t\t\tif (belowLine.value < currentLine.value) belowLine=currentLine;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbelowLine=currentLine;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (currentLine.value > zIn){\r\n\t\t\t\tif (aboveLine){\r\n\t\t\t\t\tif (aboveLine.value > currentLine.value) aboveLine=currentLine;\r\n\t\t\t\t}else{\r\n\t\t\t\t\taboveLine=currentLine;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (isAnyNil(aboveLine, belowLine)) return null;\r\n\r\n\t\tlet aboveCrossing=aboveLine.findSegment(xOrYIn)?.figureYCrossing(xOrYIn);\r\n\t\tif (linesAreSame) return aboveCrossing;\r\n\r\n\t\tlet belowCrossing=belowLine.findSegment(xOrYIn)?.figureYCrossing(xOrYIn);\r\n\r\n\t\tif (isAnyNil(aboveCrossing, belowCrossing)) return null;\r\n\r\n\t\treturn ((zIn - belowLine.value) / (aboveLine.value - belowLine.value))*(aboveCrossing - belowCrossing) + belowCrossing;\r\n\t}\r\n}\r\n\r\nclass ClampChart extends ChartObject {\r\n\r\n\tconstructor(name=\"\", yIsInputAxis=false, xOrYRefObj=null, valueToClampRefObj=null, minLine=null, maxLine=null){\r\n\tsuper(name, \"clamp\", null);\r\n\t\r\n\t\tthis.yIsInputAxis=yIsInputAxis;\r\n\r\n\t\tthis.xOrYRefObj=xOrYRefObj;\r\n\t\tthis.valueToClampRefObj=valueToClampRefObj;\r\n\r\n\t\tthis.minLine=isAnyNil(minLine) ? null : new Line(minLine);\r\n\t\tthis.maxLine=isAnyNil(maxLine) ? null : new Line(maxLine);\r\n\t\tif (yIsInputAxis){\r\n\t\t\tthis.minLine.flipPoints();\r\n\t\t\tthis.maxLine.flipPoints();    \r\n\t\t}\r\n\t}\r\n\r\n\tcalc(chartObjectArray, alertsArray, noticesArray){\r\n\t\tif (isAnyNil(this.xOrYRefObj, this.valueToClampRefObj)){\r\n\t\t\tthis.value=null;\r\n\t\t}else{\r\n\t\t\tthis.value=this.figureClamp(this.xOrYRefObj.value, this.valueToClampRefObj.value);\r\n\t\t}\r\n\t}\r\n\r\n\tfigureClamp(xOrYIn, valueToClamp){\r\n\t\tif (isAnyNil(xOrYIn, valueToClamp)) return null;\r\n\t\t\r\n\t\tif (this.minLine?.points.length>0) {\r\n\t\t\tconst minValue=this.minLine.findSegment(xOrYIn)?.figureYCrossing(xOrYIn);\r\n\t\t\tif (!minValue) return null;\r\n\t\r\n\t\t\tif (valueToClamp < minValue) valueToClamp = minValue;\r\n\t\t}\r\n\r\n\t\tif (this.maxLine?.points.length>0) {\r\n\t\t\tconst maxValue=this.maxLine.findSegment(xOrYIn)?.figureYCrossing(xOrYIn);\r\n\t\t\tif (!maxValue) return null;\r\n\t\r\n\t\t\tif (valueToClamp > maxValue) valueToClamp = maxValue;\r\n\t\t}\r\n\r\n\t\treturn valueToClamp;\r\n\t}\r\n}\r\n\r\nclass TrendChart extends ChartObject{\r\n\tconstructor(name=\"\", yIsInputAxis=false, xOrYRefObj=null, entryPointRefObj=null, exitPointRefObj=null, ...lines){\r\n\t\tsuper(name, \"trend\", null);\r\n\r\n\t\tthis.yIsInputAxis=yIsInputAxis;\r\n\r\n\t\tthis.xOrYRefObj=xOrYRefObj;\r\n\t\tthis.entryPointRefObj=entryPointRefObj;\r\n\t\tthis.exitPointRefObj=exitPointRefObj;\r\n\r\n\t\tif (Array.isArray(lines)){\r\n\t\t\tthis.lines=lines.map( line => {return new Line(line);} );\r\n\t\t\tif (!yIsInputAxis){\r\n\t\t\t\tthis.lines.forEach( line => {line.flipPoints();} )//we flip the points when yIsInputAxis==false for trendcharts\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.lines=[];\r\n\t\t}\r\n\t}\r\n\r\n\tcalc(chartObjectArray, alertsArray, noticesArray){\r\n\t\tif (isAnyNil(this.xOrYRefObj, this.entryPointRefObj, this.exitPointRefObj)){\r\n\t\t\tthis.value=null;\r\n\t\t}else{\r\n\t\t\tthis.value=this.figureTrend(this.xOrYRefObj.value, this.entryPointRefObj.value, this.exitPointRefObj.value);\r\n\t\t}\r\n\t}\r\n\r\n\tfigureTrend(xOrYIn, entryPoint, exitPoint){\r\n\t\tif (isAnyNil(xOrYIn, entryPoint, exitPoint)) return null;\r\n\r\n\t\tlet leftLineFind=null;\r\n\t\tlet rightLineFind=null;\r\n\t\tlet leftEntryCross=0;\r\n\t\tlet rightEntryCross=0;\r\n\t\t\r\n\t\tfor (let currentLine of this.lines){\r\n\t\t\tlet yCrossing = currentLine.findSegment(entryPoint)?.figureYCrossing(entryPoint);\r\n\t\t\tif (yCrossing){//should we hard fail here? It would highlight bad data. Maybe it should.\r\n\t\t\t\tif (yCrossing>=xOrYIn){\r\n\t\t\t\t\tif (rightLineFind){\r\n\t\t\t\t\t\tif (yCrossing<rightEntryCross){\r\n\t\t\t\t\t\t\trightLineFind=currentLine;\r\n\t\t\t\t\t\t\trightEntryCross=yCrossing\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\trightLineFind=currentLine;\r\n\t\t\t\t\t\trightEntryCross=yCrossing;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (yCrossing<=xOrYIn){\r\n\t\t\t\t\tif (leftLineFind){\r\n\t\t\t\t\t\tif (yCrossing>leftEntryCross){\r\n\t\t\t\t\t\t\tleftLineFind=currentLine;\r\n\t\t\t\t\t\t\tleftEntryCross=yCrossing\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tleftLineFind=currentLine;\r\n\t\t\t\t\t\tleftEntryCross=yCrossing;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (isAnyNil(leftLineFind, rightLineFind)) return null;\r\n\t\r\n\t\tconst leftEndCross = leftLineFind.findSegment(exitPoint)?.figureYCrossing(exitPoint);\r\n\t\tif (leftLineFind===rightLineFind || isAboutEquals(rightEntryCross, leftEntryCross)){\r\n\t\t\treturn leftEndCross;\r\n\t\t}\r\n\t\tconst rightEndCross = rightLineFind.findSegment(exitPoint)?.figureYCrossing(exitPoint);\r\n\r\n\t\tif (isAnyNil(leftEndCross, rightEndCross)) return null;\r\n\t\t\r\n\t\tlet entryRatio=(xOrYIn - leftEntryCross) / (rightEntryCross - leftEntryCross);\r\n\t\treturn (rightEndCross - leftEndCross) * entryRatio + leftEndCross;\r\n\t}\r\n}\r\n\r\nclass PolyChart extends ChartObject{\r\n\tconstructor(name=\"\", xInRefObj=null, yInRefObj=null, ...lines){\r\n\t\tsuper(name, \"poly\", null);\r\n\r\n\t\tthis.xInRefObj=xInRefObj;\r\n\t\tthis.yInRefObj=yInRefObj;\r\n\r\n\t\tif (Array.isArray(lines)){\r\n\t\t\tthis.lines=lines.map( line => {return new Line(line);} );\r\n\t\t}else{\r\n\t\t\tthis.lines=[];\r\n\t\t}\r\n\t}\r\n\r\n\tcalc(chartObjectArray, alertsArray, noticesArray){\r\n\t\tif (isAnyNil(this.xInRefObj, this.yInRefObj)){\r\n\t\t\tthis.value=null;\r\n\t\t}else{\r\n\t\t\tthis.value=this.figurePoly(this.xInRefObj.value, this.yInRefObj.value);\r\n\t\t}\r\n\t}\r\n\r\n\tfigurePoly(xIn, yIn){\r\n\t\tif (isAnyNil(xIn, yIn)) return null;\r\n\r\n\t\tlet minX=0;\r\n\t\tlet maxX=0;\r\n\t\tfor (let currentLine of this.lines){\r\n\t\t\tfor (let currentPoint of currentLine.points){\r\n\t\t\t\tif (currentPoint.x>maxX) maxX=currentPoint.x;\r\n\t\t\t\tif (currentPoint.x<minX) minX=currentPoint.x;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet horizSeg = new Segment(new Point(minX-1, yIn), new Point(maxX+1,yIn));\r\n\t\tlet curSeg = new Segment();\r\n\r\n\t\tfor (let currentLine of this.lines) {\r\n\t\t\tlet intersectsLeftOfX = 0;\r\n\r\n\t\t\tif (currentLine.points.length > 2) {\r\n\t\t\t\tfor (let i = 0; i < currentLine.points.length; i++) {\r\n\t\t\t\t\tcurSeg.setPointA(currentLine.points[i])\r\n\t\t\t\t\tif (i === currentLine.points.length - 1) {\r\n\t\t\t\t\t\tcurSeg.setPointB(currentLine.points[0]);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcurSeg.setPointB(currentLine.points[i+1]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (curSeg.getSegmentIntersection(horizSeg, true)?.x <= xIn){\r\n\t\t\t\t\t\tintersectsLeftOfX++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (intersectsLeftOfX > 0 && intersectsLeftOfX%2 > 0) {\r\n\t\t\t\t\treturn currentLine.value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nclass ChartTableEntry {\r\n\tconstructor(refObj, value){\r\n\t\tif (refObj instanceof ChartTableEntry){\r\n\t\t\tthis.refObj=refObj.refObj;\r\n\t\t\tthis.value=refObj.value;\r\n\t\t}else{\r\n\t\t\tthis.refObj=refObj;\r\n\t\t\tthis.value=value;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass ChartTable extends ChartObject {\r\n\tconstructor(name=\"\", inputRefObj=null, ...table){\r\n\t\tsuper(name, \"table\", null);\r\n\r\n\t\tthis.inputRefObj=inputRefObj;\r\n\r\n\t\tif (Array.isArray(table)){\r\n\t\t\tthis.table=table.map( entry => {return new ChartTableEntry(entry);} );\r\n\t\t}else{\r\n\t\t\tthis.table=[];\r\n\t\t}\r\n\t}\r\n\r\n\tfigureTable(inValue){\r\n\t\tif (isAnyNil(inValue)) return null;\r\n\t\tlet below=null;\r\n\t\tlet above=null;\r\n\r\n\t\tfor (let item of this.table) {\r\n\t\t\tif (isAboutEquals(item.value, inValue)) {\r\n\t\t\t\tbelow = item;\r\n\t\t\t\tabove = item;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif (item.value <= inValue) {\r\n\t\t\t\tif (below){\r\n\t\t\t\t\tif (item.value>below.value) below=item;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbelow=item;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (item.value >= inValue) {\r\n\t\t\t\tif (above){\r\n\t\t\t\t\tif (item.value<above.value) above=item;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tabove=item;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (isAnyNil(above?.refObj?.value, below?.refObj?.value)) return null;\r\n\r\n\t\tif (below===above || isAboutEquals(below.refObj.value, above.refObj.value)){\r\n\t\t\treturn above.refObj.value;\r\n\t\t}\r\n\r\n\t\tconst resultDiff = above.refObj.value - below.refObj.value;\r\n\t\tconst valDiff = above.value - below.value;\r\n\t\treturn ((inValue - below.value) / valDiff) * resultDiff + below.refObj.value;\r\n\t}\r\n\r\n\tcalc(chartObjectArray, alertsArray, noticesArray){\r\n\t\tif (isAnyNil(this.inputRefObj)){ \r\n\t\t\tthis.value=null;\r\n\t\t}else{\r\n\t\t\tthis.value=this.figureTable(this.inputRefObj.value)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass ChartConstant extends ChartObject {\r\n\tconstructor(name=\"\", value=0){\r\n\t\tsuper(name, \"constant\", value);\r\n\t}\r\n}\r\n\r\nclass ScriptRuntime {\r\n\tconstructor(chartObjectArray, alertsArray, noticesArray){\r\n\t\tthis.chartObjectArray=chartObjectArray;\r\n\t\tthis.alertsArray=alertsArray;\r\n\t\tthis.noticesArray=noticesArray;\r\n\t}\r\n\r\n\tfindChart = (name, type) => {\r\n\t\tif (name===null || type===null) return null;\r\n\t\tfor (const obj of this.chartObjectArray){\r\n\t\t\tif (obj.name===name && obj.type===type){\r\n\t\t\t\treturn obj;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tlinear = (popFn) => {\r\n\t\tconst z=popFn();\r\n\t\tconst x=popFn();\r\n\t\tconst chartName=popFn();\r\n\r\n\t\tconst chart=this.findChart(chartName.value, 'linear');\r\n\r\n\t\tif (z.value==null || x.value==null || chart==null) return new NumberObj(null, null, false);\r\n\r\n\t\treturn new NumberObj(null, chart.figureChart(x.value, z.value), false);\r\n\t}\r\n\tclamp = (popFn) => {\r\n\t\tconst value=popFn();\r\n\t\tconst x=popFn();\r\n\t\tconst chartName=popFn();\r\n\r\n\t\tconst chart=this.findChart(chartName.value, 'clamp');\r\n\r\n\t\tif (value.value==null || x.value==null || chart==null) return new NumberObj(null, null, false);\r\n\r\n\t\treturn new NumberObj(null, chart.figureClamp(x.value, value.value), false);\r\n\t}\r\n\tpoly = (popFn) => {\r\n\t\tconst y=popFn();\r\n\t\tconst x=popFn();\r\n\t\tconst chartName=popFn();\r\n\r\n\t\tconst chart=this.findChart(chartName.value, 'poly');\r\n\r\n\t\tif (y.value==null || x.value==null || chart==null) return new NumberObj(null, null, false);\r\n\r\n\t\treturn new NumberObj(null, chart.figurePoly(x.value, y.value), false);\r\n\t}\r\n\ttrend = (popFn) => {\r\n\t\tconst exit=popFn();\r\n\t\tconst entry=popFn();\r\n\t\tconst value=popFn();\r\n\t\tconst chartName=popFn();\r\n\r\n\t\tconst chart=this.findChart(chartName.value, 'trend');\r\n\r\n\t\tif (exit.value==null || entry.value==null || value.value==null || chart==null) return new NumberObj(null, null, false);\r\n\r\n\t\treturn new NumberObj(null, chart.figureTrend(value.value, entry.value, exit.value), false);\r\n\r\n\t}\r\n\talert = (popFn) => {\r\n\t\tthis.alertsArray.push(popFn().value);\r\n\t\treturn new BoolObj(null, null, false);\r\n\t}\r\n\r\n\tnotice = (popFn) => {\r\n\t\tthis.noticesArray.push(popFn().value);\r\n\t\treturn new BoolObj(null, null, false);\r\n\t}\r\n\r\n\tbuildExternList = (thisObj) => {\r\n\t\tconst externs=[\r\n\t\t\tInterpreter.funcDef(\"runLinear\", this.linear, \"double\", \"string\", \"double\", \"double\"),\r\n\t\t\tInterpreter.funcDef(\"runClamp\", this.clamp, \"double\", \"string\", \"double\", \"double\"),\r\n\t\t\tInterpreter.funcDef(\"runPoly\", this.poly, \"double\", \"string\", \"double\", \"double\"),\r\n\t\t\tInterpreter.funcDef(\"runTrend\", this.trend, \"double\", \"string\", \"double\", \"double\", \"double\"),\r\n\t\t\tInterpreter.funcDef(\"alert\", this.alert, \"bool\", \"string\"),\r\n\t\t\tInterpreter.funcDef(\"notice\", this.notice, \"bool\", \"string\")\r\n\t\t];\r\n\r\n\t\tif (this.chartObjectArray){\r\n\t\t\tfor (const obj of this.chartObjectArray){\r\n\t\t\t\tif (obj.type==='constant'){\r\n\t\t\t\t\texterns.push(new NumberObj(obj.name, obj.value, true));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (thisObj && thisObj.type!=='input'){\r\n\t\t\t\tfor (const obj of this.chartObjectArray){\r\n\t\t\t\t\tif (obj.type==='input'){\r\n\t\t\t\t\t\texterns.push(new NumberObj(obj.name, obj.value, true));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tfor (const obj of this.chartObjectArray){\r\n\t\t\t\t\tif (obj.name===thisObj.name) break;\r\n\t\t\t\t\tif (obj.type!=='input' && obj.type!=='constant'){\r\n\t\t\t\t\t\texterns.push(new NumberObj(obj.name, obj.value, true));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn externs;\r\n\t}\r\n}\r\n\r\nclass ChartInput extends ChartObject {\r\n\tconstructor(name=\"\", script=\"\", initialValue=null){\r\n\t\tsuper(name, \"input\", null);\r\n\t\tthis.script=script;\r\n\t\tthis.invalid=false;\r\n\t\tthis.input=initialValue;\r\n\t}\r\n\r\n\tcalc(chartObjectArray, alertsArray, noticesArray){\r\n\t\tconst interpreter = new Interpreter();\r\n\t\tconst scriptRuntime = new ScriptRuntime(chartObjectArray, alertsArray, noticesArray);\r\n\r\n\t\tconst externs=scriptRuntime.buildExternList(this);\r\n\t\tconst thisObj = new StringObj('input', this.input, true);\r\n\t\texterns.push(thisObj);\r\n\t\tconst invalidObj = new BoolObj('invalid', false, false);\r\n\t\texterns.push(invalidObj);\r\n\r\n\t\tconst result=interpreter.runCode(this.script, \"double\", true, false, externs);\r\n\t\tif (result.error){\r\n\t\t\tconsole.log(this.name, \" error -> \",result.error.message);\r\n\t\t\talertsArray.push(\"Error running \"+this.name+\" input script -> \"+result.error);\r\n\t\t\tthis.invalid=true;\r\n\t\t\tthis.value=null;\r\n\t\t}else{\r\n\t\t\tthis.invalid=Boolean(invalidObj.value);\r\n\t\t\tthis.value=result.exitObject.value;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass ChartScript extends ChartObject {\r\n\tconstructor(name=\"\", script=\"\"){\r\n\t\tsuper(name, \"script\", null);\r\n\t\tthis.script=script;\r\n\t}\r\n\r\n\tcalc(chartObjectArray, alertsArray, noticesArray){\r\n\t\tconst interpreter = new Interpreter();\r\n\t\tconst scriptRuntime = new ScriptRuntime(chartObjectArray, alertsArray, noticesArray);\r\n\t\tconst result=interpreter.runCode(this.script, \"double\", true, false, scriptRuntime.buildExternList(this));\r\n\t\tif (result.error){\r\n\t\t\tconsole.log(this.name, \" error -> \",result.error.message);\r\n\t\t\talertsArray.push(\"Error executing \"+this.name+\" script -> \"+result.error);\r\n\t\t\tthis.value=null;\r\n\t\t}else{\r\n\t\t\tthis.value=result.exitObject.value;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport {Point, Line, ChartObject, LinearChart, ClampChart, TrendChart, PolyChart, ChartTableEntry, ChartTable, ChartInput, ChartScript, ChartConstant};\r\n","import { Table, Input, Button, Header } from 'semantic-ui-react';\r\n\r\nimport useAircraftReducer from '../reducers/aircraftReducer';\r\nimport useCargoReducer from '../reducers/cargoReducer';\r\nimport useFuelReducer from \"../reducers/fuelReducer\";\r\n\r\nimport ChartProject from '../charts';\r\n\r\nimport { toMAC, calcArm, displayVal } from '../common';\r\nimport { useState } from 'react';\r\n\r\nconst charts = new ChartProject();\r\n\r\nfunction displayOpArea(val){\r\n    if (val===0) return 'A';\r\n    if (val===1) return 'B';\r\n    if (val===2) return 'C';\r\n    if (val===3) return 'D';\r\n    return 'E';\r\n}\r\n\r\nexport default function Calced(){\r\n    const [aircraft, aircraftDispatch] = useAircraftReducer(1000);\r\n    const [fuel, fuelDispatch] = useFuelReducer(1000);\r\n    const [cargo, cargoDispatch] = useCargoReducer(1000);\r\n    const [whichOpArea, setWhichOpArea] = useState('A');\r\n\r\n    let cargoWeightTakeoff=0;\r\n    let cargoMomentTakeoff=0;\r\n    let cargoWeightLanding=0;\r\n    let cargoMomentLanding=0;\r\n    for (const item of cargo){\r\n        cargoWeightTakeoff+=item.weight;\r\n        cargoMomentTakeoff+=item.moment;\r\n        if (!item.expended){\r\n            cargoWeightLanding+=item.weight;\r\n            cargoMomentLanding+=item.moment;\r\n        }\r\n    }\r\n\r\n    charts.$operatingWeight.input=aircraft.readOnly.operatingWeight;\r\n    charts.$fuelWeightTakeoff.input=fuel.takeoff.readOnly.totalFuel;\r\n    charts.$fuelWeightLanding.input=fuel.landing.readOnly.totalFuel;\r\n    charts.$cargoWeightTakeoff.input=cargoWeightTakeoff;\r\n    charts.$cargoWeightLanding.input=cargoWeightLanding;\r\n    charts.calc();\r\n\r\n    const takeoffWeight = aircraft.readOnly.operatingWeight+fuel.takeoff.readOnly.totalFuel+cargoWeightTakeoff;\r\n    const takeoffMoment = aircraft.readOnly.operatingMoment+fuel.takeoff.readOnly.totalMoment+cargoMomentTakeoff;\r\n    const takeoffMAC = toMAC(calcArm(takeoffWeight, takeoffMoment));\r\n    const takeoffHasFuelInExternals = fuel.takeoff.lext>0 || fuel.takeoff.rext>0;\r\n    const takeoffForwardCG = takeoffHasFuelInExternals ? charts.$extForwardCGTakeoff.value : charts.$noExtForwardCGTakeoff.value;\r\n    const takeoffAftCG = takeoffHasFuelInExternals ? charts.$extAftCGTakeoff.value : charts.$noExtAftCGTakeoff.value;\r\n    const takeoffOpArea = displayOpArea(charts.$operatingAreaTakeoff.value);\r\n\r\n    const landingWeight = aircraft.readOnly.operatingWeight+fuel.landing.readOnly.totalFuel+cargoWeightLanding;\r\n    const landingMoment = aircraft.readOnly.operatingMoment+fuel.landing.readOnly.totalMoment+cargoMomentLanding;\r\n    const landingMAC = toMAC(calcArm(landingWeight, landingMoment));\r\n    const landingHasFuelInExternals = fuel.landing.lext>0 || fuel.landing.rext>0;\r\n    const landingForwardCG = takeoffHasFuelInExternals ? charts.$extForwardCGLanding.value : charts.$noExtForwardCGLanding.value;\r\n    const landingAftCG = takeoffHasFuelInExternals ? charts.$extAftCGLanding.value : charts.$noExtAftCGLanding.value;\r\n    const landingOpArea = displayOpArea(charts.$operatingAreaLanding.value);\r\n\r\n    const limitingFuelMaxZFW = {\r\n        A: charts.$areaAMaxZFWOverall.value,\r\n        B: charts.$areaBMaxZFWOverall.value,\r\n        C: charts.$areaCMaxZFWOverall.value,\r\n        D: charts.$areaDMaxZFWOverall.value\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Header textAlign='center'>\r\n                Calced\r\n            </Header>\r\n            <Table unstackable style={{maxWidth: '650px'}}>\r\n                <Table.Header>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell textAlign='center'>Op Weight</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Moment</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>%MAC</Table.HeaderCell>\r\n                    </Table.Row>\r\n                </Table.Header>\r\n                <Table.Body>\r\n                    <Table.Row>\r\n                        <Table.Cell textAlign='center'>{aircraft.readOnly.operatingWeight}</Table.Cell>\r\n                        <Table.Cell textAlign='center'>{aircraft.readOnly.operatingMoment}</Table.Cell>\r\n                        <Table.Cell textAlign='center'>{toMAC(calcArm(aircraft.readOnly.operatingWeight, aircraft.readOnly.operatingMoment))}%</Table.Cell>\r\n                    </Table.Row>\r\n                </Table.Body>\r\n                <Table.Header>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell textAlign='center'>Zero Fuel Weight</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Moment</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'></Table.HeaderCell>\r\n                    </Table.Row>\r\n                </Table.Header>\r\n                <Table.Body>\r\n                    <Table.Row>\r\n                        <Table.Cell textAlign='center'>{aircraft.readOnly.operatingWeight+cargoWeightTakeoff}</Table.Cell>\r\n                        <Table.Cell textAlign='center'>{aircraft.readOnly.operatingMoment+cargoMomentTakeoff}</Table.Cell>\r\n                        <Table.Cell textAlign='center'></Table.Cell>\r\n                    </Table.Row>\r\n                </Table.Body>\r\n            </Table>\r\n            <Table unstackable style={{maxWidth: '650px'}}>\r\n                <Table.Header>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell textAlign='center'>Takeoff Weight</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Moment</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>%MAC</Table.HeaderCell>\r\n                    </Table.Row>\r\n                </Table.Header>\r\n                <Table.Body>\r\n                    <Table.Row>\r\n                        <Table.Cell textAlign='center'>{aircraft.readOnly.operatingWeight+cargoWeightTakeoff+fuel.takeoff.readOnly.totalFuel}</Table.Cell>\r\n                        <Table.Cell textAlign='center'>{aircraft.readOnly.operatingMoment+cargoMomentTakeoff+fuel.takeoff.readOnly.totalMoment}</Table.Cell>\r\n                        <Table.Cell textAlign='center'>\r\n                            {takeoffMAC}%\r\n                        </Table.Cell>\r\n                    </Table.Row>\r\n                </Table.Body>\r\n                <Table.Header>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell textAlign='center'>Op Area</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>For CG Limit {takeoffHasFuelInExternals?'(ext has fuel)':'(no ext fuel)'}</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Aft CG Limit {takeoffHasFuelInExternals?'(ext has fuel)':'(no ext fuel)'}</Table.HeaderCell>\r\n                    </Table.Row>\r\n                </Table.Header>\r\n                <Table.Body>\r\n                    <Table.Row>\r\n                        <Table.Cell textAlign='center'>{takeoffOpArea}</Table.Cell>\r\n                        <Table.Cell textAlign='center'>{displayVal(takeoffForwardCG,1)}%</Table.Cell>\r\n                        <Table.Cell textAlign='center'>{displayVal(takeoffAftCG,1)}%</Table.Cell>\r\n                    </Table.Row>\r\n                </Table.Body>\r\n            </Table>\r\n            <Table unstackable style={{maxWidth: '650px'}}>\r\n                <Table.Header>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell textAlign='center'>Landing Weight</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Moment</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>%MAC</Table.HeaderCell>\r\n                    </Table.Row>\r\n                </Table.Header>\r\n                <Table.Body>\r\n                    <Table.Row>\r\n                        <Table.Cell textAlign='center'>{aircraft.readOnly.operatingWeight+cargoWeightLanding+fuel.landing.readOnly.totalFuel}</Table.Cell>\r\n                        <Table.Cell textAlign='center'>{aircraft.readOnly.operatingMoment+cargoMomentLanding+fuel.landing.readOnly.totalMoment}</Table.Cell>\r\n                        <Table.Cell textAlign='center'>\r\n                            {landingMAC}%\r\n                        </Table.Cell>\r\n                    </Table.Row>\r\n                </Table.Body>\r\n                <Table.Header>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell textAlign='center'>Op Area</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>For CG Limit {landingHasFuelInExternals?'(ext has fuel)':'(no ext fuel)'}</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>Aft CG Limit {landingHasFuelInExternals?'(ext has fuel)':'(no ext fuel)'}</Table.HeaderCell>\r\n                    </Table.Row>\r\n                </Table.Header>\r\n                <Table.Body>\r\n                    <Table.Row>\r\n                        <Table.Cell textAlign='center'>{landingOpArea}</Table.Cell>\r\n                        <Table.Cell textAlign='center'>{displayVal(landingForwardCG,1)}%</Table.Cell>\r\n                        <Table.Cell textAlign='center'>{displayVal(landingAftCG,1)}%</Table.Cell>\r\n                    </Table.Row>\r\n                </Table.Body>\r\n            </Table>\r\n            \r\n            <Table unstackable style={{maxWidth: '650px'}}>\r\n                <Table.Header>\r\n                    <Table.Row>\r\n                        <Table.HeaderCell textAlign='center'>A Max ZFW/Cargo</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>B Max ZFW/Cargo</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>C Max ZFW/Cargo</Table.HeaderCell>\r\n                        <Table.HeaderCell textAlign='center'>D Max ZFW/Cargo</Table.HeaderCell>\r\n                    </Table.Row>\r\n                </Table.Header>\r\n                <Table.Body>\r\n                    <Table.Row>\r\n                        <Table.Cell textAlign='center'>{displayVal(limitingFuelMaxZFW.A)}</Table.Cell>\r\n                        <Table.Cell textAlign='center'>{displayVal(limitingFuelMaxZFW.B)}</Table.Cell>\r\n                        <Table.Cell textAlign='center'>{displayVal(limitingFuelMaxZFW.C)}</Table.Cell>\r\n                        <Table.Cell textAlign='center'>{displayVal(limitingFuelMaxZFW.D)}</Table.Cell>\r\n                    </Table.Row>\r\n                    <Table.Row>\r\n                        <Table.Cell textAlign='center'>{displayVal(limitingFuelMaxZFW.A-aircraft.readOnly.operatingWeight)}</Table.Cell>\r\n                        <Table.Cell textAlign='center'>{displayVal(limitingFuelMaxZFW.B-aircraft.readOnly.operatingWeight)}</Table.Cell>\r\n                        <Table.Cell textAlign='center'>{displayVal(limitingFuelMaxZFW.C-aircraft.readOnly.operatingWeight)}</Table.Cell>\r\n                        <Table.Cell textAlign='center'>{displayVal(limitingFuelMaxZFW.D-aircraft.readOnly.operatingWeight)}</Table.Cell>\r\n                    </Table.Row>\r\n                </Table.Body>\r\n            </Table>\r\n        </>\r\n    );\r\n}","import {Point,Line,LinearChart,ClampChart,TrendChart,PolyChart,ChartTableEntry,ChartTable,ChartInput,ChartScript,ChartConstant} from './ChartObjects';\n\nexport default class ChartProject{\n\tconstructor(){\n\t\tconst O=true;\n\t\tconst F=false;\n\t\tconst T=this;\n\t\tconst P=(x,y)=>{return new Point(x,y);};\n\t\tconst L=(val,...points)=>{return new Line(points,val);};\n\t\tT._$1=new ChartConstant('zero',0);\n\t\tT.$operatingWeight=new ChartInput('operatingWeight','exit double(input);','97000');\n\t\tT.$fuelWeightTakeoff=new ChartInput('fuelWeightTakeoff','exit double(input);','32000');\n\t\tT.$cargoWeightTakeoff=new ChartInput('cargoWeightTakeoff','exit double(input);','30000');\n\t\tT.$fuelWeightLanding=new ChartInput('fuelWeightLanding','exit double(input);','10000');\n\t\tT.$cargoWeightLanding=new ChartInput('cargoWeightLanding','exit double(input);','0');\n\t\t\n\t\tT.$takeoffGrossWeight=new ChartScript('takeoffGrossWeight','exit operatingWeight+fuelWeightTakeoff+cargoWeightTakeoff;');\n\t\tT.$landingGrossWeight=new ChartScript('landingGrossWeight','exit operatingWeight+fuelWeightLanding+cargoWeightLanding;');\n\t\tT.$takeoffZeroFuelWeight=new ChartScript('takeoffZeroFuelWeight','exit operatingWeight+cargoWeightTakeoff;');\n\t\tT.$landingZeroFuelWeight=new ChartScript('landingZeroFuelWeight','exit operatingWeight+cargoWeightLanding;');\n\t\tT.$extForwardCGTakeoff=new LinearChart('extForwardCGTakeoff',O,T.$takeoffGrossWeight,T._$1,L(0,P(26.813,174990.853),P(24.815,158087.342),P(23.023,143364.138),P(21.926,134688.733),P(20.884,127810.283),P(19.995,123129.834),P(19.032,118682.115),P(18.089,115501.478),P(17.818,114458.825),P(16.771,108852.63),P(15.531,103039.564),P(15.06,100970.858),P(15.047,69501.234)));\n\t\tT.$extAftCGTakeoff=new LinearChart('extAftCGTakeoff',O,T.$takeoffGrossWeight,T._$1,L(0,P(29.104,175001.479),P(29.092,150482.045),P(29.122,131863.684),P(29.978,127698.22),P(29.984,114949.377),P(29.11,105356.187),P(28.375,97814.174),P(27.513,89861.924),P(26.989,85444.008),P(26.061,78533.125),P(25.331,73957.427),P(24.699,69918.189)));\n\t\tT.$noExtForwardCGTakeoff=new LinearChart('noExtForwardCGTakeoff',O,T.$takeoffGrossWeight,T._$1,L(0,P(15.047,69501.234),P(15.06,100970.858),P(15.531,103039.564),P(16.771,108852.63),P(18.394,117932.14),P(19.932,127760.903),P(21.189,137156.68),P(22.496,148241.099),P(23.67,159282.22),P(24.629,168894.49),P(25.225,175086.178)));\n\t\tT.$noExtAftCGTakeoff=new LinearChart('noExtAftCGTakeoff',O,T.$takeoffGrossWeight,T._$1,L(0,P(24.699,69918.189),P(25.331,73957.427),P(26.061,78533.125),P(26.989,85444.008),P(27.513,89861.924),P(28.375,97814.174),P(29.11,105356.187),P(29.984,114949.377),P(29.978,127698.22),P(29.995,175012.734)));\n\t\tT.$extForwardCGLanding=new ChartScript('extForwardCGLanding','exit runLinear(\"extForwardCGTakeoff\", landingGrossWeight, zero);');\n\t\tT.$extAftCGLanding=new ChartScript('extAftCGLanding','exit runLinear(\"extAftCGTakeoff\", landingGrossWeight, zero);');\n\t\tT.$noExtForwardCGLanding=new ChartScript('noExtForwardCGLanding','exit runLinear(\"noExtForwardCGTakeoff\", landingGrossWeight, zero);');\n\t\tT.$noExtAftCGLanding=new ChartScript('noExtAftCGLanding','exit runLinear(\"noExtAftCGTakeoff\", landingGrossWeight, zero);');\n\t\tT.$operatingAreaTakeoff=new PolyChart('operatingAreaTakeoff',T.$fuelWeightTakeoff,T.$takeoffZeroFuelWeight,L(0,P(-121.984,102094.804),P(2228.694,102119.533),P(13784.132,113370.955),P(31352.356,120171.265),P(42957.281,108548.917),P(53949.933,101106.062),P(60551.976,94434.865),P(60537.305,79670.259),P(-98.537,79660.76)),L(1,P(-121.984,102094.804),P(2228.694,102119.533),P(13784.132,113370.955),P(31352.356,120171.265),P(42957.281,108548.917),P(53949.933,101106.062),P(43029.506,111996.042),P(28015.745,126965.57),P(24972.236,130007.164),P(21433.847,130031.892),P(14307.581,123478.866),P(4632.686,114255.173),P(2356.24,112153.259),P(-68.669,112153.259)),L(2,P(-68.669,112153.259),P(2356.24,112153.259),P(4632.686,114255.173),P(14307.581,123478.866),P(21433.847,130031.892),P(24972.236,130007.164),P(28015.745,126965.57),P(53949.933,101106.062),P(60525.811,94428.358),P(60567.247,103371.041),P(51392.316,112585.588),P(42308.225,121573.176),P(32610.959,131377.817),P(29136.294,134850.294),P(21051.454,134872.99),P(12164.698,132937.567),P(2306.751,128376.906),P(-135.453,128376.906)),L(3,P(40013.038,134889.69),P(60589.078,114232.036),P(60567.247,103371.041),P(51392.316,112585.588),P(42308.225,121573.176),P(32610.959,131377.817),P(29136.294,134850.294)));\n\t\tT.$operatingAreaLanding=new ChartScript('operatingAreaLanding','exit runPoly(\"operatingAreaTakeoff\", fuelWeightLanding, landingZeroFuelWeight);');\n\t\tT._$21=new LinearChart('areaAMaxZFWTakeoff',F,T.$fuelWeightTakeoff,T._$1,L(0,P(-121.984,102094.804),P(2228.694,102119.533),P(13784.132,113370.955),P(31352.356,120171.265),P(42957.281,108548.917),P(53949.933,101106.062),P(60551.976,94434.865)));\n\t\tT.$areaAMaxZFWOverall=new ChartScript('areaAMaxZFWOverall','exit min(areaAMaxZFWTakeoff, runLinear(\"areaAMaxZFWTakeoff\", fuelWeightLanding, zero));');\n\t\tT._$23=new LinearChart('areaBMaxZFWTakeoff',F,T.$fuelWeightTakeoff,T._$1,L(0,P(-68.669,112153.259),P(2356.24,112153.259),P(4632.686,114255.173),P(14307.581,123478.866),P(21433.847,130031.892),P(24972.236,130007.164),P(28015.745,126965.57),P(43029.506,111996.042),P(53949.933,101106.062),P(60607.369,94397.62)));\n\t\tT.$areaBMaxZFWOverall=new ChartScript('areaBMaxZFWOverall','exit min(areaBMaxZFWTakeoff, runLinear(\"areaBMaxZFWTakeoff\", fuelWeightLanding, zero));');\n\t\tT._$25=new LinearChart('areaCMaxZFWTakeoff',F,T.$fuelWeightTakeoff,T._$1,L(0,P(-135.453,128376.906),P(2306.751,128376.906),P(12164.698,132937.567),P(21051.454,134872.99),P(29136.294,134850.294),P(32610.959,131377.817),P(42308.225,121573.176),P(51392.316,112585.588),P(60567.247,103371.041)));\n\t\tT.$areaCMaxZFWOverall=new ChartScript('areaCMaxZFWOverall','exit min(areaCMaxZFWTakeoff, runLinear(\"areaCMaxZFWTakeoff\", fuelWeightLanding, zero));');\n\t\tT._$27=new LinearChart('areaDMaxZFWTakeoff',F,T.$fuelWeightTakeoff,T._$1,L(0,P(-165.173,128415.847),P(2335.646,128415.847),P(11917.437,132908.871),P(21021.543,134958.814),P(40013.038,134889.69),P(60589.078,114232.036),P(61006.064,113774.364)));\n\t\tT.$areaDMaxZFWOverall=new ChartScript('areaDMaxZFWOverall','exit min(areaDMaxZFWTakeoff, runLinear(\"areaDMaxZFWTakeoff\", fuelWeightLanding, zero));');\n\n\t\tT.calcArray=[T._$1,T.$operatingWeight,T.$fuelWeightTakeoff,T.$cargoWeightTakeoff,T.$fuelWeightLanding,T.$cargoWeightLanding,T.$takeoffGrossWeight,T.$landingGrossWeight,T.$takeoffZeroFuelWeight,T.$landingZeroFuelWeight,T.$extForwardCGTakeoff,T.$extAftCGTakeoff,T.$noExtForwardCGTakeoff,T.$noExtAftCGTakeoff,T.$extForwardCGLanding,T.$extAftCGLanding,T.$noExtForwardCGLanding,T.$noExtAftCGLanding,T.$operatingAreaTakeoff,T.$operatingAreaLanding,T._$21,T.$areaAMaxZFWOverall,T._$23,T.$areaBMaxZFWOverall,T._$25,T.$areaCMaxZFWOverall,T._$27,T.$areaDMaxZFWOverall,];\n\t}\n\n\tcalcInputs=()=>{\n\t\tconst alerts=[];\n\t\tconst notices=[];\n\t\tfor (let obj of this.calcArray){\n\t\t\tif (obj.type==='input') obj.calc(this.calcArray, alerts, notices);\n\t\t}\n\t\treturn [alerts, notices];\n\t};\n\n\tcalc=()=>{\n\t\tconst alerts=[];\n\t\tconst notices=[];\n\t\tfor (let obj of this.calcArray){\n\t\t\tobj.calc(this.calcArray, alerts, notices);\n\t\t}\n\t\treturn [alerts, notices];\n\t};\n}","import React from 'react';\r\nimport { Container, Header, Segment } from 'semantic-ui-react';\r\nimport WABMenu from './components/WABMenu';\r\nimport Aircraft from './components/Aircraft';\r\nimport Cargo from './components/Cargo';\r\nimport Options from './components/Options';\r\nimport Fuel from './components/Fuel';\r\n\r\nimport useAircraftReducer from './reducers/aircraftReducer';\r\nimport useSelectedMenuReducer from './reducers/selectedMenuReducer';\r\nimport useCargoReducer from './reducers/cargoReducer';\r\nimport useFuelReducer from './reducers/fuelReducer';\r\nimport Calced from './components/Calced';\r\n\r\nconst menuItems=[\r\n    {page: 'aircraft', title: 'Aircraft'},\r\n    {page: 'fuel', title: 'Fuel'},\r\n    {page: 'cargo', title: 'Cargo'},\r\n    {page: 'calced',title: 'Calced'},\r\n    {page: 'options', title: 'Options'},\r\n]\r\n\r\n\r\n\r\n\r\nfunction App() {\r\n    const [selectedMenu, selectedMenuDispatch] = useSelectedMenuReducer(1000);\r\n    const [aircraft, aircraftDispatch] = useAircraftReducer(1000);\r\n    const [fuel, fuelDispatch] = useFuelReducer(1000);\r\n    const [cargo, cargoDispatch] = useCargoReducer(1000);\r\n\r\n    let pageToShow=null;\r\n\r\n    if (selectedMenu?.page==='aircraft'){\r\n        pageToShow=<Aircraft aircraft={aircraft} aircraftDispatch={aircraftDispatch}/>\r\n    }else if (selectedMenu?.page==='fuel'){\r\n        pageToShow=<Fuel fuel={fuel} fuelDispatch={fuelDispatch}/>\r\n    }else if (selectedMenu?.page==='cargo'){\r\n        pageToShow=<Cargo cargo={cargo} cargoDispatch={cargoDispatch}/>\r\n    }else if (selectedMenu?.page==='calced'){\r\n        pageToShow=<Calced/>\r\n    }else if (selectedMenu?.page==='options'){\r\n        pageToShow=<Options/>\r\n    }else{\r\n        selectedMenuDispatch('aircraft');\r\n    }\r\n\r\n    return ( \r\n        <Container style={{flexGrow:1, margin:0}}>\r\n            <Segment inverted attached=\"top\">\r\n                <Header as='h1' textAlign=\"center\">CWAB</Header>\r\n                <Header as='h6' textAlign='center' style={{color:'#FFFFFF33'}}>Reference Use Only</Header>\r\n            </Segment>\r\n            <WABMenu menuItems={menuItems} selectedMenu={selectedMenu} selectedMenuDispatch={selectedMenuDispatch}/>\r\n            <Segment attached=\"bottom\" secondary style={{alignItems:'center', display:'flex', flexDirection:'column'}}>\r\n                {pageToShow}\r\n            </Segment>\r\n        </Container>\r\n    );\r\n}\r\n\r\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './assets/fomantic/semantic.min.css';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <div className='background'>\n      <App/>\n    </div>\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}